<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:23" />
    <title>Adding Transport Header Actions</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyactionsTransportHeadersAction.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1315156"> </a><h2 class="pHead1Split">
Adding Transport Header Actions
</h2>
<a name="wp1315157"> </a><p class="pBody">
Use a transport header action to set the header values in messages. 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1314356"> </a><li>Navigate to where you want to add the action, as described in <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();"><span class="cHyperlink">
Adding and Editing Actions in Message Flows</span></a>.</li>
<a name="wp1314358"> </a><li>Click the appropriate icon, then select <b class="cBold">Add an Action &gt; Communication</b> &gt; <b class="cBold">Transport Headers</b>.</li>
<a name="wp1329274"> </a><li>From the <b class="cBold">Set Transport Headers for</b> list, select one of the following, to specify to the run time which of the message context locations are to be modified:</li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1329275"> </a><li><b class="cBold">Outbound Request</b> - Select this option to set header values for outbound requests (the messages sent out by a proxy service in route, publish, or service callout actions). This header element is located in the message context as follows:</li>
<a name="wp1329329"> </a><p class="pBodyRelative">
<code class="cCode">$outbound/ctx:transport/ctx:request/tp:headers</code>
</p>
<a name="wp1329220"> </a><li><b class="cBold">Inbound Response</b> - Select this option to set header values for inbound responses (the response messages a proxy service sends back to clients). This header element is located in the message context as follows:</li>
<a name="wp1329356"> </a><p class="pBodyRelative">
<code class="cCode">$inbound/ctx:transport/ctx:response/tp:headers</code> 
</p>
</ul></div>
<a name="wp1274199"> </a><li>Optionally, select <b class="cBold">Pass all Headers through Pipeline</b> to pass all headers through from the inbound message to the outbound message or vice versa. Every header in the source set of headers will be copied to the target header set, overwriting any existing values in the target header set.</li>
<a name="wp1347954"> </a><p class="pBodyRelative">
For information about using this option in conjunction with the header-specific pass through option, &quot;Configuring Transport Headers in Message Flows&quot; in the <em class="cEmphasis">Oracle Fusion Middleware Developer&#39;s Guide for Oracle Service Bus</em> at <span class="cHyperlink">
<a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
<a name="wp1347956"> </a><li>Complete the following steps for each Header you want to add:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1274206"> </a><li>In the <b class="cBold">Transport Headers</b> table, click <b class="cBold">Add Header</b> to display fields for configuring the header.</li>
<a name="wp1274213"> </a><li>Specify a header by doing either of the following:</li>
<div class="pSmartList3Bullet"><ul class="SmartList3Bullet">
<a name="wp1316694"> </a><li>From the drop-down list in the <b class="cBold">Name</b> column, select a header name. The list contains all of the predefined header names for the target transport (for example, <b class="cBold">Content-Type</b> for HTTP transports, <b class="cBold">JMSCorrelationID </b>for JMS transports, etc.). </li>
<a name="wp1316711"> </a><li>Enter a header name in the <b class="cBold">Other </b>field. If that header name is not one of the predefined headers for this service&#39;s transport, it becomes a user-header, as defined by the transport specification.</li>
</ul></div>
<a name="wp1274215"> </a><li>Select one of the options in the <b class="cBold">Action</b> column to specify how to set the headers value:</li>
<a name="wp1274216"> </a><p class="pBodyRelative">
<b class="cBold">Set Header to Expression</b>
</p>
<a name="wp1274217"> </a><p class="pBodyRelative">
Selecting this option allows you to use an XQuery or XSLT expression to set the value of the header. The expression can be simple (for example, &quot;text/xml&quot;) or a complex XQuery or XSLT expression.
</p>
<a name="wp1274221"> </a><p class="pBodyRelative">
Because the Oracle Service Bus transport layer defines the XML representation of all headers as string values, the result of any expression is converted to a string before the header value is set. Expressions that return nothing result in the header value being set to the empty string. You cannot delete a header using an expression.
</p>
<a name="wp1274222"> </a>
<table class="ListNote">
<tr>
<td valign="top"><strong>Caution:</strong></td>
<td>Not all of the header settings you can specify in this action are honored at run time.For information about which of the headers for a given transport you can set and which of those set are honored at run time, &quot;Configuring Transport Headers in Message Flows&quot; in the <em class="cEmphasis">Oracle Fusion Middleware Developer&#39;s Guide for Oracle Service Bus</em> at <span class="cHyperlink">
<a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>. </td>
</tr>
</table>
<a name="wp1274226"> </a><p class="pBodyRelative">
<b class="cBold">Delete Header</b>
</p>
<a name="wp1274227"> </a><p class="pBodyRelative">
Specifies that the header is removed from the request or response metadata.
</p>
<a name="wp1274228"> </a><p class="pBodyRelative">
<b class="cBold">Copy Header from Inbound Request </b>(if you are setting transport headers for the Outbound Request)<br />&#160;&#160;&#160;&#160;&#160;&#160;or<br /><b class="cBold">Copy Header from Outbound Response</b> (if you are setting transport headers for the Inbound Response)
</p>
<a name="wp1274235"> </a><p class="pBodyRelative">
Specifies that this header is copied directly from the corresponding header of the same name from the inbound message to the outbound message and vice versa. For example, if you want to set the SOAPAction header for an outbound request, selecting <b class="cBold">Copy Header from Inbound Request</b> causes the run time to copy the value from the SOAPAction request header of <code class="cCode">$inbound</code>. In the case of inbound response headers, the source of the header to copy is the response headers of <code class="cCode">$outbound</code>. 
</p>
<a name="wp1274236"> </a><p class="pBodyRelative">
If the <b class="cBold">Copy Header..</b>. option is selected for a header that does not exist in the source, this option is ignored and no action is performed on the target for this header. 
</p>
<a name="wp1340228"> </a><p class="pBodyRelative">
For information about using this option in conjunction with the global <b class="cBold">Pass all Headers through Pipeline</b> option, &quot;Configuring Transport Headers in Message Flows&quot; in the <em class="cEmphasis">Oracle Fusion Middleware Developer&#39;s Guide for Oracle Service Bus</em> at <span class="cHyperlink">
<a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
</ol></div>
<a name="wp1274241"> </a><li>To add additional Headers to the table, click the <b class="cBold">Header</b> icon, then click <b class="cBold">Add Header</b>. </li>
<a name="wp1274248"> </a><p class="pBodyRelative">
The table is expanded to include an additional row, which includes a new set of options that you can use to configure another transport header. You can add as many headers as necessary to this table. You do not have to order the headers in the table, because the run time declares namespaces and places header elements in their proper order when generating the corresponding XML.
</p>
</ol></div>
<a name="wp1326074"> </a><p class="pBody">
<b class="cBold">After you finish</b> 
</p>
<a name="wp1314160"> </a><p class="pBody">
When you complete the configuration of this action, continue by configuring other actions or by saving your configuration, as described in <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();"><span class="cHyperlink">
Adding and Editing Actions in Message Flows</span></a>.
</p>
<p class="pBody">&nbsp;</p>
<blockquote>
  <h3>Setting Cookies in Outbound HTTP Transport Headers</h3>
</blockquote>
<p>  In an HTTP message flow you can set cookies on the transport header in the following ways:</p>
<ul>
  <li>  With a complex XML expression (Oracle Service Bus default)</li>
  <li>With a string expression (requires server startup option)  </li>
</ul>
<blockquote>
  <h4>Setting a Cookie as a Complex XML Expression</h4>
</blockquote>
<p>  To set a cookie using a complex XML expression, which is the Oracle Service Bus default format, configure the value of the HTTP Cookie header in the outbound request using the following expression syntax:</p>
<p>&lt;cookie-values xmlns=&quot;http://www.bea.com/wli/sb/transports/http&quot;&gt;<br />
  &nbsp;&nbsp;&nbsp;&nbsp;&lt;value&gt;{fn:concat(&quot;cookie_name&quot;, &quot;=&quot;, &quot;cookie_value&quot;)}&lt;/value&gt;<br />
  &lt;/cookie-values&gt;</p>
<blockquote>
  <h4>Setting a Cookie with a String Expression</h4>
</blockquote>
<p>  To set the Cookie header with a string in the outbound request, you must add the following option to your domain startWebLogic command:</p>
<p>  -Dcom.bea.osb.http.cookieAsNoComplexElement=true</p>
<p>After you restart the server with this option, you can set an HTTP Cookie header with a string expression. For example:<br />
  $cookie_name = &quot;cookie_value&quot;</p>
<p class="pBody">&nbsp;</p>
<script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
