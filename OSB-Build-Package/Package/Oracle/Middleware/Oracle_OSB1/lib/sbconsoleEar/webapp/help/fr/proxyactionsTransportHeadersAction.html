<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" lang="fr">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:23" />
    <title>Ajout d'actions d'en-têtes de transport</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyactionsTransportHeadersAction.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1315156"> </a><h2 class="pHead1Split">
Ajout d'actions d'en-têtes de transport
</h2>
<a name="wp1315157"> </a><p class="pBody">
L'action d'en-tête de transport permet de définir les valeurs d'en-tête dans les messages. 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1314356"> </a><li>Accédez à l'emplacement auquel ajouter l'action, comme indiqué dans <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">Ajout et modification d'actions dans les flux de messages</span></a>.</li>
<a name="wp1314358"> </a><li>Cliquez sur l'icône appropriée, puis sélectionnez <b class="cBold">Ajouter une action > Communication</b> > <b class="cBold">En-têtes de transport</b>.</li>
<a name="wp1329274"> </a><li>Dans la liste <b class="cBold">Définir des en-têtes de transport pour</b>, sélectionnez l'une des options suivantes pour indiquer à l'exécution les emplacements du contexte de message à modifier&nbsp;:</li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1329275"> </a><li><b class="cBold">Demande sortante&nbsp;:</b> sélectionnez cette option pour définir les valeurs d'en-tête des demandes sortantes (messages envoyés par un service proxy dans les actions de routage, de publication ou d'appel de service). Cet élément d'en-tête est situé à l'emplacement suivant dans le contexte du message&nbsp;:</li>
<a name="wp1329329"> </a><p class="pBodyRelative">
<code class="cCode">$outbound/ctx:transport/ctx:request/tp:headers</code>
</p>
<a name="wp1329220"> </a><li><b class="cBold">Réponse entrante&nbsp;:</b> sélectionnez cette option pour définir les valeurs d'en-tête des réponses entrantes (messages de réponse renvoyés par un service proxy aux clients). Cet élément d'en-tête est situé à l'emplacement suivant dans le contexte du message&nbsp;:</li>
<a name="wp1329356"> </a><p class="pBodyRelative">
<code class="cCode">$inbound/ctx:transport/ctx:response/tp:headers</code> 
</p>
</ul></div>
<a name="wp1274199"> </a><li>Si vous le souhaitez, vous pouvez sélectionner <b class="cBold">Transmettre tous les en-têtes via le pipeline</b> pour transmettre tous les en-têtes du message entrant vers le message sortant, et inversement. Les en-têtes source seront ainsi copiés vers l'ensemble d'en-têtes cible et toutes les valeurs existantes dans ce dernier seront écrasées.</li>
<a name="wp1347954"> </a><p class="pBodyRelative">
Pour plus d'informations sur l'utilisation de cette option en complément de l'option de transmission propre aux en-têtes, reportez-vous à "Configuring Transport Headers in Message Flows" dans le manuel <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> à l'adresse suivante&nbsp;: <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
<a name="wp1347956"> </a><li>Pour chaque en-tête à ajouter, procédez comme suit&nbsp;:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1274206"> </a><li>Dans la table <b class="cBold">En-têtes de transport</b>, cliquez sur <b class="cBold">Ajouter un en-tête</b> pour afficher les champs permettant de configurer l'en-tête.</li>
<a name="wp1274213"> </a><li>Spécifiez un en-tête en effectuant l'une des opérations suivantes&nbsp;:</li>
<div class="pSmartList3Bullet"><ul class="SmartList3Bullet">
<a name="wp1316694"> </a><li>Dans la liste déroulante de la colonne <b class="cBold">Nom</b>, sélectionnez le nom d'un en-tête. Cette liste contient tous les noms d'en-tête prédéfinis pour le transport cible (par exemple, <b class="cBold">Content-Type</b> pour les transports&nbsp;HTTP, <b class="cBold">JMSCorrelationID</b> pour les transports&nbsp;JMS, etc.). </li>
<a name="wp1316711"> </a><li>Entrez le nom d'un en-tête dans le champ <b class="cBold">Autre</b>. Si ce nom d'en-tête ne fait pas partie des en-têtes prédéfinis pour ce transport de service, il devient un en-tête d'utilisateur tel que défini par la spécification du transport.</li>
</ul></div>
<a name="wp1274215"> </a><li>Sélectionnez l'une des options de la colonne <b class="cBold">Action</b> pour indiquer la méthode de définition des valeurs d'en-têtes à utiliser&nbsp;:</li>
<a name="wp1274216"> </a><p class="pBodyRelative">
<b class="cBold">Définir l'en-tête sur l'expression</b>
</p>
<a name="wp1274217"> </a><p class="pBodyRelative">
Lorsque vous sélectionnez cette option, vous pouvez utiliser une expression&nbsp;XQuery ou XSLT pour définir la valeur de l'en-tête. Il peut s'agir d'une expression simple (par exemple, "text/xml") ou d'une expression&nbsp;XQuery ou XSLT complexe.
</p>
<a name="wp1274221"> </a><p class="pBodyRelative">
Dans la mesure où la couche de transport Oracle&nbsp;Service&nbsp;Bus définit la représentation&nbsp;XML de tous les en-têtes sous forme de valeurs de chaîne, le résultat des expressions est converti en chaîne avant la définition de la valeur de l'en-tête. Lorsqu'une expression ne renvoie aucune donnée, la valeur de l'en-tête est une chaîne vide. Vous ne pouvez pas supprimer un en-tête au moyen d'une expression.
</p>
<a name="wp1274222"> </a>
<table class="ListNote">
<tr>
<td valign="top"><strong>Attention :</strong></td>
<td>l'ensemble des paramètres d'en-tête que vous pouvez spécifier pour cette action ne sont pas nécessairement tous appliqués lors de l'exécution. Pour plus d'informations sur les en-têtes que vous pouvez définir pour un transport donné et les paramètres qui sont appliqués lors de l'exécution, reportez-vous à "Configuring Transport Headers in Message Flows" dans le manuel <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> à l'adresse suivante&nbsp;: <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>. </td>
</tr>
</table>
<a name="wp1274226"> </a><p class="pBodyRelative">
<b class="cBold">Supprimer un en-tête</b>
</p>
<a name="wp1274227"> </a><p class="pBodyRelative">
Cette option indique que l'en-tête est enlevé des métadonnées de demande ou de réponse.
</p>
<a name="wp1274228"> </a><p class="pBodyRelative">
<b class="cBold">Copier l'en-tête de la demande entrante </b>(si vous définissez les en-têtes de transport pour la demande sortante)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ou<br /><b class="cBold">Copier l'en-tête de la réponse sortante</b> (si vous définissez les en-têtes de transport pour la réponse entrante)
</p>
<a name="wp1274235"> </a><p class="pBodyRelative">
Ces options indiquent que l'en-tête est copié directement à partir de l'en-tête correspondant du même nom du message entrant vers le message sortant, et inversement. Par exemple, si vous voulez paramétrer l'en-tête&nbsp;SOAPAction pour une demande sortante et que vous sélectionnez <b class="cBold">Copier l'en-tête de la demande entrante</b>, l'exécution copie la valeur à partir de l'en-tête de demande&nbsp;SOAPAction de <code class="cCode">$inbound</code>. Dans le cas des en-têtes de réponse entrante, la source de l'en-tête à copier correspond aux en-têtes de réponse de <code class="cCode">$outbound</code>. 
</p>
<a name="wp1274236"> </a><p class="pBodyRelative">
Si une des options <b class="cBold">Copier l'en-tête...</b> est sélectionnée pour un en-tête qui n'existe pas dans la source, elle n'est pas prise en compte et aucune action n'est exécutée sur la cible de cet en-tête. 
</p>
<a name="wp1340228"> </a><p class="pBodyRelative">
Pour plus d'informations sur l'utilisation de cette option en complément de l'option globale <b class="cBold">Transmettre tous les en-têtes via le pipeline</b>, reportez-vous à "Configuring Transport Headers in Message Flows" dans le manuel <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> à l'adresse suivante&nbsp;: <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
</ol></div>
<a name="wp1274241"> </a><li>Pour ajouter des en-têtes supplémentaires à la table, cliquez sur l'icône <b class="cBold">En-tête</b>, puis sur <b class="cBold">Ajouter un en-tête</b>. </li>
<a name="wp1274248"> </a><p class="pBodyRelative">
La table est développée afin d'inclure une ligne supplémentaire qui comprend un nouvel ensemble d'options permettant de configurer un autre en-tête de transport. Vous pouvez ajouter autant d'en-têtes que nécessaire à cette table. Vous n'avez pas besoin de trier les en-têtes dans la table, car l'exécution déclare les espaces de noms et place les éléments d'en-tête dans le bon ordre lors de la génération du XML correspondant.
</p>
</ol></div>
<a name="wp1326074"> </a><p class="pBody">
<b class="cBold"> Après avoir fini </b> 
</p>
<a name="wp1314160"> </a><p class="pBody">
Une fois la configuration de cette action terminée, vous pouvez configurer d'autres actions ou enregistrer votre configuration, comme indiqué dans <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">Ajout et modification d'actions dans les flux de messages</span></a>.
</p>
<p class="pBody">&nbsp;</p>
<blockquote>
  <h3>Configuration des cookies dans les en-têtes de transport HTTP sortants</h3>
</blockquote>
<p>  Dans un flux de messages HTTP, vous pouvez définir des cookies sur l'en-tête de transport des deux façons suivantes :</p>
<ul>
  <li>  Avec une expression XML complexe (Oracle Service Bus par défaut)</li>
  <li>Avec une expression de chaîne (exige l'option de démarrage de serveur)  </li>
</ul>
<blockquote>
  <h4>Configuration d'un cookie en tant qu'expression XML complexe</h4>
</blockquote>
<p>  Pour définir un cookie à l'aide d'une expression XML complexe, qui est le format par défaut d'Oracle Service Bus, configurez la valeur de l'en-tête de cookie HTTP dans la demande sortante en utilisant la syntaxe d'expression suivante :</p>
<p>&lt;cookie-values xmlns="http://www.bea.com/wli/sb/transports/http"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&lt;value>{fn:concat("cookie_name", "=", "cookie_value")}&lt;/value><br /> &lt;/cookie-values></p>
<blockquote>
  <h4>Configuration d'un cookie avec une expression de chaîne</h4>
</blockquote>
<p>  Pour définir l'en-tête du cookie avec une chaîne dans la demande sortante, vous devez ajouter l'option suivante à votre commande de domaine startWebLogic :</p>
<p>  -Dcom.bea.osb.http.cookieAsNoComplexElement=true</p>
<p>Une fois le serveur redémarré à l'aide de cette option, vous pouvez définir un en-tête de cookie HTTP avec une expression de chaîne. Par exemple :<br /> $cookie_name = "cookie_value".</p>
<p class="pBody">&nbsp;</p>
<script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
