<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:21" />
    <title>Adding Conditional Branches to Message Flows</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyserviceAddConditionalBranchNode.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1258546"> </a><h2 class="pHead1Split">
Adding Conditional Branches to Message Flows
</h2>
<a name="wp1258703"> </a><p class="pBody">
A branch node allows processing to proceed along exactly one of several possible paths. Branching is driven by an XPath-based switch table. Each branch in the table specifies a condition (for example, <code class="cCode">&lt;500</code>) that is evaluated in order down the message flow against a single XPath expression (for example, <code class="cCode">./ns: PurchaseOrder/ns:totalCost</code> on <code class="cCode">$body</code>). Whichever condition is satisfied first determines which branch is followed. If no branch condition is satisfied, then the default branch is followed. A branch node may have several descendants in the message flow: one for each branch, including the default branch.
</p>
<a name="wp1272648"> </a><p class="pBody">
If the proxy service is not based on a WSDL and receives multiple document types as input, consider using a conditional branch node.
</p>
<a name="wp1272861"> </a><p class="pBody">
Conditional branching is driven by a lookup table with each branch tagged with a simple, but unique, string value. A variable in the message context is designated as the lookup variable for that node, and at run time, its value is used to determine which branch to follow. If no branch matches the value of the lookup variable, the default branch is followed. You should design the proxy service in such a way that the value of the lookup variable is set before reaching the branch node.
</p>
<a name="wp1272862"> </a><p class="pBody">
<b class="cBold">Before you begin</b>
</p>
<a name="wp1272873"> </a><p class="pBody">
These instructions assume you are already editing a message flow in the <b class="cBold">Edit Message Flow</b> page, as explained in <a href="javascript:WWHClickedPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html');" onMouseOver="WWHShowPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();"><span class="cHyperlink">
Creating, Editing, and Viewing Message Flows</span></a>.
</p>
<a name="wp1272881"> </a><p class="pBody">
<b class="cBold">To add a conditional branch to a message flow</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1268737"> </a><li>Click a <b class="cBold">Pipeline Pair Node </b>icon or a <b class="cBold">Branch Node</b> icon, then click <b class="cBold">Create Conditional Branch</b>. The conditional branch node is added, and any existing nodes after the inserted branch node are moved to the default branch of the new conditional branch node.</li>
<a name="wp1091925"> </a><li>To change the default name and add a description for the branch node, do the following:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1245667"> </a><li>Click the <b class="cBold">Conditional Branch</b> icon, then click <b class="cBold">Edit</b> <b class="cBold">Name and Annotation</b>.</li>
<a name="wp1261030"> </a><li>Change the name and description, as desired. </li>
<a name="wp1261031"> </a><li>Click <b class="cBold">Save</b>.</li>
</ol></div>
<a name="wp1261073"> </a><li>To add branch definitions, click the <b class="cBold">Conditional Branch</b> icon, then click <b class="cBold">Edit Branch</b>. The <b class="cBold">Edit Branch Node </b>page is displayed. </li>
<a name="wp1273957"> </a><li>Do the following:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1272548"> </a><li>In the <b class="cBold">Selected Path</b> field, click <b class="cBold">Edit</b> to add an XPath expression for specifying the path. See <a href="javascript:WWHClickedPopup('consolehelp', 'proxyservicesCreatingAndEditingInlineExpressions.html');" onMouseOver="WWHShowPopup('consolehelp', 'proxyservicesCreatingAndEditingInlineExpressions.html', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();">Creating and Editing Inline XQuery and XPath Expressions</a>.</li>
<a name="wp1272552"> </a><li>In the <b class="cBold">Variable</b> field, enter a context variable.</li>
<a name="wp1272553"> </a><li>From the <b class="cBold">Operator</b> field, select a comparison operator.</li>
<a name="wp1130131"> </a><li>In the <b class="cBold">Value</b> field, enter a value for the branch.</li>
<a name="wp1130132"> </a><li>In the <b class="cBold">Label</b> field, enter a label for the branch.</li>
</ol></div>
<a name="wp1263481"> </a><li>Optionally, under <b class="cBold">Options</b>: </li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1263482"> </a><li>Click <b class="cBold">Add a New Branch</b> to add a new branch definition to this branch node.</li>
<a name="wp1263483"> </a><li>Click <b class="cBold">Delete this Branch</b> to delete a branch definition.</li>
<a name="wp1263484"> </a><li>Click <b class="cBold">Move Branch Up </b>or click <b class="cBold">Move Branch Down </b>to change the positions of branch definitions. This option displays only when more than one branch definition exists.</li>
</ul></div>
<a name="wp1262480"> </a><li>Click <b class="cBold">Save</b> to commit the updates in the current session. </li>
<a name="wp1262504"> </a><li>On the <b class="cBold">Edit Message Flow</b> page, continue to construct the message flow, as described in <a href="javascript:WWHClickedPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html');" onMouseOver="WWHShowPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html', (document.all||document.getElementById||document.layers)?event:null);" onMouseOut="WWHHidePopup();"><span class="cHyperlink">
Creating, Editing, and Viewing Message Flows</span></a>.</li>
<a name="wp1262506"> </a><li>Click <b class="cBold">Save</b> to commit the updates in the current session. </li>
<a name="wp1274742"> </a><li>To end the session and deploy the configuration to the run time, click <span style="font-weight: bold">Activate</span> under <span style="font-weight: bold">Change Center</span>. </li>
</ol></div>



  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
