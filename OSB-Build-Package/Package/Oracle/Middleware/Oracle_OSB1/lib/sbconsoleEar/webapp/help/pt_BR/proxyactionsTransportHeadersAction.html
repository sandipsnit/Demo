<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="pt_BR" lang="pt_BR">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:23" />
    <title>Adicionando Ações do Cabeçalho de Transporte</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyactionsTransportHeadersAction.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1315156"> </a><h2 class="pHead1Split">
Adicionando Ações do Cabeçalho de Transporte
</h2>
<a name="wp1315157"> </a><p class="pBody">
Use uma ação do cabeçalho de transporte para definir os valores do cabeçalho em mensagens. 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1314356"> </a><li>Navegue até o local onde você deseja adicionar a ação, conforme descrito em <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink"> Adicionando e Editando Ações em Fluxos de Mensagens</span></a>.</li>
<a name="wp1314358"> </a><li>Clique no ícone apropriado, depois selecione <b class="cBold">Adicionar uma Ação > Comunicação</b> > <b class="cBold">Cabeçalhos de Transporte</b>.</li>
<a name="wp1329274"> </a><li>Na lista <b class="cBold">Definir Cabeçalhos de Transporte para</b>, selecione um dos seguintes, para especificar ao run-time qual dos locais do contexto da mensagem deve ser modificado:</li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1329275"> </a><li><b class="cBold">Solicitação de Saída</b> - Selecione esta opção para definir valores do cabeçalho para solicitações de saída (as mensagens enviadas por um serviço de proxy em uma rota, publicação ou em ações de chamada de serviço). Esse elemento do cabeçalho está localizado no contexto da mensagem, conforme a seguir:</li>
<a name="wp1329329"> </a><p class="pBodyRelative">
<code class="cCode">$outbound/ctx:transport/ctx:request/tp:headers</code>
</p>
<a name="wp1329220"> </a><li><b class="cBold">Resposta de Entrada</b> - Selecione esta opção para definir valores do cabeçalho para respostas de entrada (as mensagens de resposta que um serviço de proxy retorna aos clientes). Esse elemento do cabeçalho está localizado no contexto da mensagem, conforme a seguir:</li>
<a name="wp1329356"> </a><p class="pBodyRelative">
<code class="cCode">$inbound/ctx:transport/ctx:response/tp:headers</code> 
</p>
</ul></div>
<a name="wp1274199"> </a><li>Como opção, selecione <b class="cBold">Transmitir todos os Cabeçalhos por meio do Pipeline</b> para transmitir todos os cabeçalhos da mensagem de entrada para a mensagem de saída, ou vice-versa. Cada cabeçalho no conjunto de origem de cabeçalhos será copiado para o conjunto de cabeçalhos de destino, substituindo qualquer valor existente no conjunto de cabeçalhos de destino.</li>
<a name="wp1347954"> </a><p class="pBodyRelative">
Para obter informações sobre o uso desta opção em conjunto com a opção de passagem específica ao cabeçalho, consulte "Configuring Transport Headers in Message Flows" no <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> em <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
<a name="wp1347956"> </a><li>Execute as etapas a seguir para cada Cabeçalho que você deseja adicionar:</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1274206"> </a><li>Na tabela <b class="cBold">Cabeçalhos de Transporte</b>, clique em <b class="cBold">Adicionar Cabeçalho</b> para exibir campos para configuração do cabeçalho.</li>
<a name="wp1274213"> </a><li>Especifique um cabeçalho executando uma das ações a seguir:</li>
<div class="pSmartList3Bullet"><ul class="SmartList3Bullet">
<a name="wp1316694"> </a><li>Na lista drop-down na coluna <b class="cBold">Nome</b>, selecione um nome de cabeçalho. A lista contém todos os nomes de cabeçalhos predefinidos para o transporte de destino (por exemplo, <b class="cBold">Tipo de Conteúdo</b> para transportes HTTP, <b class="cBold">JMSCorrelationID</b> para transportes JMS, etc.). </li>
<a name="wp1316711"> </a><li>Informe um nome de cabeçalho no campo <b class="cBold">Outro</b>. Se esse nome de cabeçalho não for um dos cabeçalhos predefinidos para o transporte deste serviço, ele se tornará um cabeçalho do usuário, conforme definido pela especificação de transporte.</li>
</ul></div>
<a name="wp1274215"> </a><li>Selecione uma das opções na coluna <b class="cBold">Ação</b> para especificar como definir o valor de cabeçalhos:</li>
<a name="wp1274216"> </a><p class="pBodyRelative">
<b class="cBold">Definir Cabeçalho para Expressão</b>
</p>
<a name="wp1274217"> </a><p class="pBodyRelative">
A seleção desta opção permite o uso de uma expressão XQuery ou XSLT para definir o valor do cabeçalho. A expressão pode ser simples (por exemplo, "text/xml") ou uma expressão XQuery ou XSLT complexa.
</p>
<a name="wp1274221"> </a><p class="pBodyRelative">
Como a camada de transporte do Oracle Service Bus define a representação XML de todos os cabeçalhos como valores de string, o resultado de qualquer expressão é convertido em uma string antes que o valor do cabeçalho seja definido. Expressões que retornam nada fazem com que o valor do cabeçalho seja definido como a string vazia. Não é possível deletar um cabeçalho usando uma expressão.
</p>
<a name="wp1274222"> </a>
<table class="ListNote">
<tr>
<td valign="top"><strong>Cuidado:</strong></td>
<td>Nem todas as definições do cabeçalho que você pode especificar nesta ação são respeitadas no run-time. Para obter informações sobre quais cabeçalhos para um determinado transporte você pode definir e quais são respeitados no run-time, consulte "Configuring Transport Headers in Message Flows" no <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> em <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>. </td>
</tr>
</table>
<a name="wp1274226"> </a><p class="pBodyRelative">
<b class="cBold">Deletar Cabeçalho</b>
</p>
<a name="wp1274227"> </a><p class="pBodyRelative">
Especifica que o cabeçalho é removido dos metadados de solicitação ou de resposta.
</p>
<a name="wp1274228"> </a><p class="pBodyRelative">
<b class="cBold">Copiar Cabeçalho da Solicitação de Entrada</b> (se você estiver definindo cabeçalhos de transporte para a Solicitação de Saída)<br />&nbsp;ou <br /><b class="cBold">Copiar Cabeçalho da Solicitação de Saída</b> (se você estiver definindo cabeçalhos de transporte para a Solicitação de Entrada)
</p>
<a name="wp1274235"> </a><p class="pBodyRelative">
Especifica que este cabeçalho é copiado diretamente do cabeçalho correspondente com o mesmo nome da mensagem de entrada para a mensagem de saída e vice-versa. Por exemplo, se você quiser definir o cabeçalho SOAPAction para uma solicitação de saída, a seleção de <b class="cBold">Copiar Cabeçalho da Solicitação de Entrada</b> fará com que o run-time copie o valor da cabeçalho da solicitação SOAPAction de <code class="cCode">$inbound</code>. No caso de cabeçalhos de resposta de entrada, a origem do cabeçalho para cópia é o cabeçalho de resposta de <code class="cCode">$outbound</code>. 
</p>
<a name="wp1274236"> </a><p class="pBodyRelative">
Se a opção <b class="cBold">Copiar Cabeçalho...</b> for selecionada para um cabeçalho que não existe na origem, essa opção será ignorada e nenhuma ação será executada no destino deste cabeçalho. 
</p>
<a name="wp1340228"> </a><p class="pBodyRelative">
Para obter informações sobre o uso desta opção em conjunto com a opção global <b class="cBold">Transmitir todos os Cabeçalhos por meio do Pipeline</b>, consulte "Configuring Transport Headers in Message Flows" no <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> em <span class="cHyperlink"> <a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>.
</p>
</ol></div>
<a name="wp1274241"> </a><li>Para adicionar Cabeçalhos extras à tabela, clique no ícone <b class="cBold">Cabeçalho</b> e, em seguida, em <b class="cBold">Adicionar Cabeçalho</b>. </li>
<a name="wp1274248"> </a><p class="pBodyRelative">
A tabela é expandida para incluir uma linha adicional, que contém um novo conjunto de opções que podem ser usadas para configurar outro cabeçalho de transporte. É possível adicionar tantos cabeçalhos quantos forem necessários nesta tabela. Não é preciso ordenar os cabeçalhos na tabela, porque o run-time declara os namespaces e coloca os elementos de cabeçalho na ordem adequada ao gerar o XML correspondente.
</p>
</ol></div>
<a name="wp1326074"> </a><p class="pBody">
<b class="cBold">Depois de finalizar</b> 
</p>
<a name="wp1314160"> </a><p class="pBody">
Ao concluir a configuração desta ação, continue configurando outras ações ou salvando sua configuração, conforme descrito em <a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink"> Adicionando e Editando Ações em Fluxos de Mensagens</span></a>.
</p>
<p class="pBody">&nbsp;</p>
<blockquote>
  <h3>Definindo Cookies em Cabeçalhos de Transporte HTTP de Saída</h3>
</blockquote>
<p>  Em um fluxo de mensagem HTTP você pode definir cookies no cabeçalho de transporte dos seguintes modos:</p>
<ul>
  <li>  Com uma expressão XML complexa (default Oracle Service Bus)</li>
  <li>Com uma expressão de string (requer opção de inicialização do servidor)  </li>
</ul>
<blockquote>
  <h4>Definindo um Cookie como Expressão XML Complexa</h4>
</blockquote>
<p>  Para definir um cookie usando uma expressão XML complexa, que é o formato default do Oracle Service Bus, configure o valor do cabeçalho de Cookie HTTP na solicitação de saída usando a seguinte sintaxe de expressão:</p>
<p>&lt;cookie-values xmlns="http://www.bea.com/wli/sb/transports/http"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&lt;value>{fn:concat("cookie_name", "=", "cookie_value")}&lt;/value><br /> &lt;/cookie-values></p>
<blockquote>
  <h4>Definindo um Cookie com uma Expressão de String</h4>
</blockquote>
<p>  Para definir o cabeçalho do Cookie com uma string na solicitação de entrada, adicione a seguinte opção ao seu comando startWebLogic de domínio:</p>
<p>  -Dcom.bea.osb.http.cookieAsNoComplexElement=true</p>
<p>Após reiniciar o servidor com essa opção, você pode definir um cabeçalho de Cookie HTTP com uma expressão de string. Por exemplo:<br /> $cookie_name = "cookie_value"</p>
<p class="pBody">&nbsp;</p>
<script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
