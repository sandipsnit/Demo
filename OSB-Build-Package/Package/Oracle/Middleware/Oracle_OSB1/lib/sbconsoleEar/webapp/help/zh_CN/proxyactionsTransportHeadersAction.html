<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:23" />
    <title>添加传输标头操作</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyactionsTransportHeadersAction.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1315156"> </a><h2 class="pHead1Split">
添加传输标头操作
</h2>
<a name="wp1315157"> </a><p class="pBody">
使用传输标头操作可设置消息中的标头值。 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1314356"> </a><li>导航至要添加操作的位置，如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">向消息流添加操作和编辑消息流中的操作</span></a>中所述。</li>
<a name="wp1314358"> </a><li>单击相应的图标，然后选择<b class="cBold">添加操作 > 通信</b> > <b class="cBold">传输标头</b>。</li>
<a name="wp1329274"> </a><li>从<b class="cBold">设置传输标头用于</b>列表中，选择以下选项之一，以指定给要修改消息上下文位置的运行时：</li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1329275"> </a><li><b class="cBold">出站请求</b> - 选择此选项可为出站请求 (由代理服务在路由、发布或服务标注操作中发出的消息) 设置标头值。此标头元素位于消息上下文中，如下所述：</li>
<a name="wp1329329"> </a><p class="pBodyRelative">
<code class="cCode">$outbound/ctx:transport/ctx:request/tp:headers</code>
</p>
<a name="wp1329220"> </a><li><b class="cBold">入站响应</b> - 选择此选项可为入站响应 (代理服务发送回客户机的响应消息) 设置标头值。此标头元素位于消息上下文中，如下所述：</li>
<a name="wp1329356"> </a><p class="pBodyRelative">
<code class="cCode">$inbound/ctx:transport/ctx:response/tp:headers</code> 
</p>
</ul></div>
<a name="wp1274199"> </a><li>或者，选择<b class="cBold">通过管道传递所有标头</b>，将所有标头从入站消息传递到出站消息，反之亦然。源标头集中的每个标头将被复制到目标标头集，从而覆盖目标标头集中现有的所有值。</li>
<a name="wp1347954"> </a><p class="pBodyRelative">
有关将此选项与标头特定的通过选项配合使用的信息，请参阅 <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> 中的“Configuring Transport Headers in Message Flows”，网址为：<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>。
</p>
<a name="wp1347956"> </a><li>对要添加的每个标头完成以下步骤：</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1274206"> </a><li>在<b class="cBold">传输标头</b>表中，单击<b class="cBold">添加标头</b>，以便显示用于配置该标头的字段。</li>
<a name="wp1274213"> </a><li>通过执行下面两项操作之一指定标头：</li>
<div class="pSmartList3Bullet"><ul class="SmartList3Bullet">
<a name="wp1316694"> </a><li>从<b class="cBold">名称</b>列的下拉列表中，选择标头名称。该列表包含为目标传输预定义的所有标头名称，例如 <b class="cBold">Content-Type</b> (对于 HTTP 传输) 和 <b class="cBold">JMSCorrelationID</b> (对于 JMS 传输) 等。 </li>
<a name="wp1316711"> </a><li>在<b class="cBold">其他</b>字段中输入标头名称。如果该标头名称不是为此服务的传输预定义的标头之一，则根据传输规范的定义，该名称为用户标头。</li>
</ul></div>
<a name="wp1274215"> </a><li>选择<b class="cBold">操作</b>列中的选项之一，以指定如何设置标头值：</li>
<a name="wp1274216"> </a><p class="pBodyRelative">
<b class="cBold">将标头设为表达式</b>
</p>
<a name="wp1274217"> </a><p class="pBodyRelative">
选择该选项，能够使用 XQuery 或 XSLT 表达式来设置标头值。表达式可以是简单表达式 (例如，“text/xml”)，也可以是复杂的 XQuery 或 XSLT 表达式。
</p>
<a name="wp1274221"> </a><p class="pBodyRelative">
因为 Oracle Service Bus 传输层将所有标头的 XML 表示形式定义为字符串值，所以任何表达式的结果都会在设置标头值之前转换为字符串。如果表达式不返回任何结果，则会将标头值设置为空字符串。不能删除使用表达式的标头。
</p>
<a name="wp1274222"> </a>
<table class="ListNote">
<tr>
<td valign="top"><strong>注意：</strong></td>
<td>并非所有可在此操作中指定的标头设置都在运行时生效。有关您可以为给定传输设置哪些标头以及其中的哪些已设置标头在运行时生效的信息，请参阅 <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> 中的“Configuring Transport Headers in Message Flows”，网址为：<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>。 </td>
</tr>
</table>
<a name="wp1274226"> </a><p class="pBodyRelative">
<b class="cBold">删除标头</b>
</p>
<a name="wp1274227"> </a><p class="pBodyRelative">
指定将标头从请求或响应元数据中删除。
</p>
<a name="wp1274228"> </a><p class="pBodyRelative">
<b class="cBold">从入站请求复制标头</b> (如果是为出站请求设置传输标头) <br />或<br /><b class="cBold">从出站响应复制标头</b> (如果是为入站响应设置传输标头)
</p>
<a name="wp1274235"> </a><p class="pBodyRelative">
指定将此标头从入站消息中的同名相应标头直接复制到出站消息，反之亦然。例如，如果要为出站请求设置 SOAPAction 标头，则选择<b class="cBold">从入站请求复制标头</b>会导致运行时复制 <code class="cCode">$inbound</code> 的 SOAPAction 请求标头中的值。若是入站响应标头，要复制的标头的源是 <code class="cCode">$outbound</code> 的响应标头。 
</p>
<a name="wp1274236"> </a><p class="pBodyRelative">
如果为该源中不存在的标头选择<b class="cBold">复制标头...</b> 选项，则会忽略该选项，且不对该标头的目标执行任何操作。 
</p>
<a name="wp1340228"> </a><p class="pBodyRelative">
有关将此选项与全局<b class="cBold">通过管道传递所有标头</b>选项配合使用的信息，请参阅 <em class="cEmphasis">Oracle Fusion Middleware Developer's Guide for Oracle Service Bus</em> 中的“Configuring Transport Headers in Message Flows”，网址为：<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">http://www.oracle.com/pls/as111170/lookup?id=OSBAG201</a></span>。
</p>
</ol></div>
<a name="wp1274241"> </a><li>要将其他标头添加至表，请单击<b class="cBold">标头</b>图标，然后单击<b class="cBold">添加标头</b>。 </li>
<a name="wp1274248"> </a><p class="pBodyRelative">
下表扩展为包括一个附加行，该行包括一组可以用于配置其他传输标头的新选项。根据需要，可在此表中添加尽可能多的标头。无须对表中的标头进行排序，因为运行时会在生成相应 XML 时声明名称空间，并按适当顺序排列标头元素。
</p>
</ol></div>
<a name="wp1326074"> </a><p class="pBody">
<b class="cBold">完成之后</b> 
</p>
<a name="wp1314160"> </a><p class="pBody">
配置完此操作后，继续配置其他操作或保存您的配置，如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">向消息流添加操作和编辑消息流中的操作</span></a>中所述。
</p>
<p class="pBody">&nbsp;</p>
<blockquote>
  <h3>在出站 HTTP 传输标头中设置 Cookie</h3>
</blockquote>
<p>  可以通过以下方式在 HTTP 消息流中针对传输标头设置 Cookie：</p>
<ul>
  <li>  使用复杂 XML 表达式 (Oracle Service Bus 默认方式)</li>
  <li>使用字符串表达式 (需要服务器启动选项)  </li>
</ul>
<blockquote>
  <h4>将 Cookie 设置为复杂 XML 表达式</h4>
</blockquote>
<p>  要使用复杂的 XML 表达式 (Oracle Service Bus 默认格式) 设置 Cookie，请使用以下表达式语法配置出站请求中的 HTTP Cookie 标头的值：</p>
<p>&lt;cookie-values xmlns="http://www.bea.com/wli/sb/transports/http"><br />     &lt;value>{fn:concat("cookie_name", "=", "cookie_value")}&lt;/value><br /> &lt;/cookie-values></p>
<blockquote>
  <h4>使用字符串表达式设置 Cookie</h4>
</blockquote>
<p>  要使用出站请求中的字符串设置 Cookie 标头，必须将以下选项添加到域 startWebLogic 命令中：</p>
<p>  -Dcom.bea.osb.http.cookieAsNoComplexElement=true</p>
<p>使用此选项重新启动服务器后，可以使用字符串表达式设置 HTTP Cookie 标头。例如：<br /> $cookie_name = "cookie_value"</p>
<p class="pBody">&nbsp;</p>
<script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
