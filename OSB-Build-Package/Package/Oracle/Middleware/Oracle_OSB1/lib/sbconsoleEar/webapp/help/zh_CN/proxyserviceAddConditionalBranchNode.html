<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_CN" lang="zh_CN">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:21" />
    <title>向消息流添加条件分支</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyserviceAddConditionalBranchNode.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1258546"> </a><h2 class="pHead1Split">
向消息流添加条件分支
</h2>
<a name="wp1258703"> </a><p class="pBody">
分支节点使处理过程只能沿着几个可能路径中的一个路径继续进行。分支处理是由基于 XPath 的切换式表驱动的。该表中的每个分支都指定了一个条件 (例如，<code class="cCode">&lt;500</code>)，该条件是根据单个 XPath 表达式以消息流的顺序计算的 (例如，基于 <code class="cCode">$body</code> 的 <code class="cCode">./ns: PurchaseOrder/ns:totalCost</code>)。首先满足的条件确定后面要沿哪一个分支继续。如果不满足任何分支条件，则后面将沿默认分支继续。一个分支节点在消息流中可能具有几个子节点：每个分支一个，包括默认分支。
</p>
<a name="wp1272648"> </a><p class="pBody">
如果代理服务不基于 WSDL，且收到多个文档类型作为输入，请考虑使用条件分支节点。
</p>
<a name="wp1272861"> </a><p class="pBody">
条件分支处理是由一个查找表驱动的，该表中的每个分支都用一个简单但是唯一的字符串值进行标记。消息上下文中的变量指定为此节点的查找变量，在运行时，它的值用于确定要沿用哪个分支。如果没有任何分支匹配此查找变量的值，则沿用默认分支。应该采用如下方式设计代理服务：在访问分支节点前设置查找变量的值。
</p>
<a name="wp1272862"> </a><p class="pBody">
<b class="cBold">开始之前</b>
</p>
<a name="wp1272873"> </a><p class="pBody">
这些说明假定您已在<b class="cBold">编辑消息流</b>页中编辑了消息流，如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">创建、编辑和查看消息流</span></a>中所述。
</p>
<a name="wp1272881"> </a><p class="pBody">
<b class="cBold">要向消息流添加条件分支，请执行以下操作：</b>
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1268737"> </a><li>单击<b class="cBold">管道对节点</b>图标或<b class="cBold">分支节点</b>图标，然后单击<b class="cBold">创建条件分支</b>。将添加条件分支节点，并将已插入的分支节点后的任何现有节点都移至新条件分支节点的默认分支。</li>
<a name="wp1091925"> </a><li>要更改默认名称并添加分支节点的说明，请执行以下操作：</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1245667"> </a><li>单击<b class="cBold">条件分支</b>图标，然后单击<b class="cBold">编辑</b><b class="cBold">名称和批注</b>。</li>
<a name="wp1261030"> </a><li>根据需要更改名称和说明。 </li>
<a name="wp1261031"> </a><li>单击<b class="cBold">保存</b>。</li>
</ol></div>
<a name="wp1261073"> </a><li>要添加分支定义，请单击<b class="cBold">条件分支</b>图标，然后单击<b class="cBold">编辑分支</b>。此时将显示<b class="cBold">编辑分支节点</b>页。 </li>
<a name="wp1273957"> </a><li>请执行以下操作：</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1272548"> </a><li>在<b class="cBold">所选路径</b>字段中，单击<b class="cBold">编辑</b>可添加用于指定路径的 XPath 表达式。请参阅<a href="javascript:WWHClickedPopup('consolehelp', 'proxyservicesCreatingAndEditingInlineExpressions.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyservicesCreatingAndEditingInlineExpressions.html', (document.all||document.getElementById||document.layers)?event:null);">创建和编辑内嵌 XQuery 和 XPath 表达式</a>。</li>
<a name="wp1272552"> </a><li>在<b class="cBold">变量</b>字段中，输入一个上下文变量。</li>
<a name="wp1272553"> </a><li>在<b class="cBold">运算符</b>字段中，选择比较运算符。</li>
<a name="wp1130131"> </a><li>在<b class="cBold">值</b>字段中，输入此分支的值。</li>
<a name="wp1130132"> </a><li>在<b class="cBold">标签</b>字段中，输入此分支的标签。</li>
</ol></div>
<a name="wp1263481"> </a><li>或者，在<b class="cBold">选项</b>下，执行以下操作： </li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1263482"> </a><li>单击<b class="cBold">添加新分支</b>，将新的分支定义添加至此分支节点。</li>
<a name="wp1263483"> </a><li>单击<b class="cBold">删除此分支</b>，删除分支定义。</li>
<a name="wp1263484"> </a><li>单击<b class="cBold">上移分支</b>或<b class="cBold">下移分支</b>，更改分支定义的位置。此选项仅在有多个分支定义时才会显示。</li>
</ul></div>
<a name="wp1262480"> </a><li>单击<b class="cBold">保存</b>可提交当前会话中的更新。 </li>
<a name="wp1262504"> </a><li>在<b class="cBold">编辑消息流</b>页上，继续构造消息流，如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyserviceCreateEditViewMessageFlows.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">创建、编辑和查看消息流</span></a>中所述。</li>
<a name="wp1262506"> </a><li>单击<b class="cBold">保存</b>可提交当前会话中的更新。 </li>
<a name="wp1274742"> </a><li>要结束该会话并将配置部署到运行时，请单击<span style="font-weight: bold">更改中心</span>下的<span style="font-weight: bold">激活</span>。 </li>
</ol></div>



  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
