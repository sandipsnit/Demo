<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh_TW" lang="zh_TW">
  <head>

<!-- LOCALIZATION RELATED INFORMATION -->
<meta name="LOC_PROJ_ID" content="WLPF8.1" />
<meta name="LOC_OWNER" content="BEAJ" />
<meta name="LOC_STATUS" content="READY!" />
<meta name="LOC_COMMENT" content="LOC_COMMENT" />
<meta name="LOC_US_REV" content="" />
<meta name="LOC_US_CHANGE" content="" />
<meta name="LOC_US_SRCFILE" content="" />
<!-- LOCALIZATION RELATED INFORMATION -->

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta http-equiv="Content-Style-Type" content="text/css" />
    <meta name="GENERATOR" content="Quadralay WebWorks AutoMap 2003 Platinum Edition for FrameMaker 8.6.6577.0" />
    <meta name="TEMPLATEBASE" content="BEA_WWH_Template_V1.0" />
    <meta name="LASTUPDATED" content="03/06/10 00:59:23" />
    <title>新增傳輸標頭動作</title>
    <link rel="StyleSheet" href="edocs.css" type="text/css" />
<script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/context.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/towwhdir.js"></script>
  <script type="text/javascript" language="JavaScript1.2" src="wwhdata/common/wwhpagef.js"></script>

  <script type="text/javascript" language="JavaScript1.2">
   <!--
    // Set reference to top level help frame
    //
    var  WWHFrame = WWHGetWWHFrame("");

if (top.location == self.location )
    self.location = "index.html?href=proxyactionsTransportHeadersAction.html"
   // -->
  </script>

    <script type="text/javascript" language="JavaScript1.2" src="scripts/expand.js"></script>
  </head>

  <body onload="WWHUpdate();" onunload="WWHUnload();" onkeydown="WWHHandleKeyDown((document.all||document.getElementById||document.layers)?event:null);" onkeypress="WWHHandleKeyPress((document.all||document.getElementById||document.layers)?event:null);" onkeyup="WWHHandleKeyUp((document.all||document.getElementById||document.layers)?event:null);">

<a name="wp1315156"> </a><h2 class="pHead1Split">
新增傳輸標頭動作
</h2>
<a name="wp1315157"> </a><p class="pBody">
使用傳輸標頭動作可以設定訊息中的標頭值。 
</p>
<div class="pSmartList1"><ol type="1" class="pSmartList1">
<a name="wp1314356"> </a><li>瀏覽至想要新增動作的位置 (如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">新增和編輯訊息流程的動作</span></a>中所述)。</li>
<a name="wp1314358"> </a><li>按一下適當的圖示，然後選取「新增動作」>「通訊」>「傳輸標頭」。<b class="cBold"></b><b class="cBold"></b></li>
<a name="wp1329274"> </a><li>從「設定傳輸標頭」清單選取下列其中一項，以指定要在執行時期修改的訊息相關資訊環境位置：<b class="cBold"></b></li>
<div class="pSmartList2Bullet"><ul class="pSmartList2Bullet">
<a name="wp1329275"> </a><li><b class="cBold">外送要求</b> - 選取此選項，可以設定外送要求 (代理主機服務在路由、發佈或服務外部呼叫動作中送出的訊息) 的標頭值。此標頭元素是位在訊息相關資訊環境中 (如下所示)：</li>
<a name="wp1329329"> </a><p class="pBodyRelative">
<code class="cCode">$outbound/ctx:transport/ctx:request/tp:headers</code>
</p>
<a name="wp1329220"> </a><li><b class="cBold">內送回應</b> - 選取此選項，可以設定內送回應 (代理主機服務送回給從屬端的回應訊息) 的標頭值。此標頭元素是位在訊息相關資訊環境中 (如下所示)：</li>
<a name="wp1329356"> </a><p class="pBodyRelative">
<code class="cCode">$inbound/ctx:transport/ctx:response/tp:headers</code> 
</p>
</ul></div>
<a name="wp1274199"> </a><li>選擇性地選取<b class="cBold">透過管線傳遞所有標頭</b>，將所有標頭從內送訊息傳遞給外送訊息，反之亦然。來源標頭集中的每個標頭都會複製到目標標頭集，覆寫目標標頭集中的任何現有值。</li>
<a name="wp1347954"> </a><p class="pBodyRelative">
如需瞭解如何將此選項搭配標頭特有的透通選項一起使用，請參閱「Oracle Fusion Middleware Developer's Guide for Oracle Service Bus」中的「Configuring Transport Headers in Message Flows」，網址為：<em class="cEmphasis"> </em>http://www.oracle.com/pls/as111170/lookup?id=OSBAG201<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">。</a></span>
</p>
<a name="wp1347956"> </a><li>針對您要新增的每個「標頭」，完成下列步驟：</li>
<div class="pSmartList2"><ol type="a" class="pSmartList2">
<a name="wp1274206"> </a><li>在「傳輸標頭」表格中，按一下「新增標頭」顯示用來設定標頭的欄位。<b class="cBold"></b><b class="cBold"></b></li>
<a name="wp1274213"> </a><li>請執行下列任一操作來指定標頭：</li>
<div class="pSmartList3Bullet"><ul class="SmartList3Bullet">
<a name="wp1316694"> </a><li>從<b class="cBold">名稱</b>欄的下拉清單中，選取標頭名稱。此清單包含目標傳輸的所有預先定義標頭名稱 (例如，HTTP 傳輸的 <b class="cBold">Content-Type</b>、JMS 傳輸的 <b class="cBold">JMSCorrelationID</b> 等)。 </li>
<a name="wp1316711"> </a><li>在<b class="cBold">其他</b>欄位中輸入標頭名稱。如果該標頭名稱不是此服務傳輸的其中一個預先定義標頭，則會變成使用者標頭 (透過傳輸規範所定義)。</li>
</ul></div>
<a name="wp1274215"> </a><li>在「動作」欄中選取其中一個選項，以指定如何設定標頭值：<b class="cBold"></b></li>
<a name="wp1274216"> </a><p class="pBodyRelative">
<b class="cBold">將標頭設定為表示式</b>
</p>
<a name="wp1274217"> </a><p class="pBodyRelative">
選取此選項可以讓您使用 XQuery 或 XSLT 表示式來設定標頭值。表示式可以很簡單 (例如："text/xml")，也可以是複雜的 XQuery 或 XSLT 表示式。
</p>
<a name="wp1274221"> </a><p class="pBodyRelative">
因為 Oracle Service Bus 傳輸層將所有標頭的 XML 表示法定義成字串值，所以任何表示式的結果都會先轉換成字串，才會設定標頭值。表示式若沒有傳回任何內容，其標頭值會設定成空字串。您不能使用表示式來刪除標頭。
</p>
<a name="wp1274222"> </a>
<table class="ListNote">
<tr>
<td valign="top"><strong>注意：</strong></td>
<td>在此動作中指定的標頭設定，並非全部都能在執行時期使用。如需瞭解您可以為特定傳輸設定的標頭及可在執行時期使用的標頭，請參閱「Oracle Fusion Middleware Developer's Guide for Oracle Service Bus」中的「Configuring Transport Headers in Message Flows」，網址為：<em class="cEmphasis"> </em>http://www.oracle.com/pls/as111170/lookup?id=OSBAG201<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window">。</a></span> </td>
</tr>
</table>
<a name="wp1274226"> </a><p class="pBodyRelative">
<b class="cBold">刪除標頭</b>
</p>
<a name="wp1274227"> </a><p class="pBodyRelative">
指定將標頭從要求或回應描述資料中移除。
</p>
<a name="wp1274228"> </a><p class="pBodyRelative">
<b class="cBold">從內送要求中複製標頭</b>(如果設定「外送要求」的傳輸標頭)<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;或<br /><b class="cBold">從外送要求中複製標頭</b> (如果設定「內送要求」的傳輸標頭)
</p>
<a name="wp1274235"> </a><p class="pBodyRelative">
指定將此標頭直接從內傳訊息中同名的對應標頭複製至外傳訊息，反之亦然。例如，如果想要為外送要求設定 SOAPAction 標頭，選取<b class="cBold">從內送要求中複製標頭</b>會導致執行時期從 <code class="cCode">$inbound</code> 的 SOAPAction 要求標頭複製該值。如果是內送回應標頭，則要複製的標頭來源是 <code class="cCode">$outbound</code> 的回應標頭。 
</p>
<a name="wp1274236"> </a><p class="pBodyRelative">
如果為不在來源中的標題選取「...複製標頭」<b class="cBold"></b>選項，則會忽略此選項，而且不會在目標上為此標頭執行任何動作。 
</p>
<a name="wp1340228"> </a><p class="pBodyRelative">
如需瞭解如何將此選項搭配全域「透過管線傳遞所有標頭」選項一起使用，請參閱「Oracle Fusion Middleware Developer's Guide for Oracle Service Bus」中的「Configuring Transport Headers in Message Flows」，網址為：<b class="cBold"></b> http://www.oracle.com/pls/as111170/lookup?id=OSBAG201<em class="cEmphasis"></em>。<span class="cHyperlink"><a href="http://www.oracle.com/pls/as111170/lookup?id=OSBAG201" target="_window"></a></span>
</p>
</ol></div>
<a name="wp1274241"> </a><li>若要在表格中新增其他「標頭」，請按一下「標頭」圖示，然後按一下「新增標頭」。<b class="cBold"></b><b class="cBold"></b> </li>
<a name="wp1274248"> </a><p class="pBodyRelative">
會擴充表格以包含額外的列，其中包括一組可用來設定其他傳輸標頭的新選項。您可以在表格中新增需要的標頭數。您不需要排序表格中的標頭，因為執行時期在產生對應的 XML 時會宣告命名空間，並以適當的順序放置標頭元素。
</p>
</ol></div>
<a name="wp1326074"> </a><p class="pBody">
<b class="cBold">完成作業後</b> 
</p>
<a name="wp1314160"> </a><p class="pBody">
完成此動作的組態時，請繼續設定其他動作，或儲存組態 (如<a href="javascript:WWHClickedPopup('consolehelp', 'proxyactionsAddAction.html');" onMouseOut="WWHHidePopup();" onMouseOver="WWHShowPopup('consolehelp', 'proxyactionsAddAction.html', (document.all||document.getElementById||document.layers)?event:null);"><span class="cHyperlink">新增和編輯訊息流程的動作</span></a>中所述)。
</p>
<p class="pBody">&nbsp;</p>
<blockquote>
  <h3>設定外送 HTTP 傳輸標頭中的 Cookie</h3>
</blockquote>
<p>  您可以透過下列方式，在 HTTP 訊息流程中設定傳輸標頭中的 Cookie：</p>
<ul>
  <li>  使用複雜 XML 表示式 (Oracle Service Bus 預設值)</li>
  <li>使用字串表示式 (需有伺服器啟動選項)  </li>
</ul>
<blockquote>
  <h4>使用複雜 XML 表示式設定 Cookie</h4>
</blockquote>
<p>  若要使用複雜 XML 表示式 (Oracle Service Bus 預設格式) 設定 Cookie，請使用下列表示式語法設定外送要求之 HTTP Cookie 標頭的值：</p>
<p>&lt;cookie-values xmlns="http://www.bea.com/wli/sb/transports/http"><br /> &nbsp;&nbsp;&nbsp;&nbsp;&lt;value>{fn:concat("cookie_name", "=", "cookie_value")}&lt;/value><br /> &lt;/cookie-values></p>
<blockquote>
  <h4>使用字串表示式設定 Cookie</h4>
</blockquote>
<p>  若要在外送要求中使用字串設定 Cookie 標頭，必須將以下選項新增至您的網域 startWebLogic 命令：</p>
<p>  -Dcom.bea.osb.http.cookieAsNoComplexElement=true</p>
<p>使用此選項重新啟動伺服器之後，您就可以使用字串表示式設定 HTTP Cookie 標頭。例如：<br /> $cookie_name = "cookie_value"</p>
<p class="pBody">&nbsp;</p>
<script type="text/javascript" language="JavaScript1.2">
   <!--
    // Clear related topics
    //
    WWHClearRelatedTopics();

   // -->
  </script>


<script type="text/javascript" language="JavaScript1.2">
   <!--
function WWHDefineBEALogoLink()
{
return "http://www.bea.com";
}
    document.write(WWHRelatedTopicsDivTag() + WWHPopupDivTag() + WWHALinksDivTag());
   // -->
  </script>

  </body>
</html>
