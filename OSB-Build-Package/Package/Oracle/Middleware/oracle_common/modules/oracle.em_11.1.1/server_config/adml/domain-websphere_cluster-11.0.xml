<?xml version='1.0' encoding='UTF-8' ?>
<Adml xmlns="http://www.oracle.com/iAS/aggregator"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      TableSpace="websphere_cluster">

 <Table Name="response">
  <ColumnDef Name="clusterName" Type="String" Key="true"/>
  <ColumnDef Name="Status" Type="Integer"/>
  <Select Name="response_from_cluster">
    <TableFrom Name="Cluster"/>
    <Column Name="clusterName" Type="String">
      <ColumnFrom Name="clusterName"/>
    </Column>
    <Column Name="Status" Type="String">
      <If>
        <Condition Operator="EQ">
          <ColumnFrom Name="state"/>
          <Value>websphere.cluster.running</Value>
        </Condition>
      <Then>
        <Value>1</Value>
      </Then>
      <ElseIf>
        <Condition Operator="EQ">
          <ColumnFrom Name="state"/>
          <Value>websphere.cluster.partial.stop</Value>
        </Condition>
      <Then>
        <Value>1</Value>
      </Then>
      </ElseIf>
      <ElseIf>
        <Condition Operator="EQ">
          <ColumnFrom Name="state"/>
          <Value>websphere.cluster.partial.start</Value>
        </Condition>
      <Then>
        <Value>1</Value>
      </Then>
      </ElseIf>
      <Else>
        <Value>0</Value>
      </Else>
      </If>
    </Column>
    <Where>
      <Or>
        <Condition Type="String" Operator="EQ">
          <ColumnFrom Name="clusterName"/>
          <Value Name="clusterName.parameter"/>
        </Condition>
        <Condition Type="String" Operator="EQ">
          <Value Name="clusterName.parameter"
                 xsi:nil="true"/>
          <Null/>
        </Condition>
      </Or>
    </Where>
  </Select>
 </Table>
<!--
 <Table Name="response">
  <ColumnDef Name="clusterName" Type="String" Key="true"/>
  <ColumnDef Name="Status" Type="Integer"/>
  <Select Name="response_result">
    <TableFrom Name="websphere_cluster:response_raw"/>
    <Column Name="clusterName" Type="String">
      <ColumnFrom Name="clusterName"/>
    </Column>
    <Column Name="Status" Type="Integer">
      <ColumnFrom Name="Status"/>
    </Column>
    <Where>
      <Or>
        <Condition Type="String" Operator="EQ">
          <ColumnFrom Name="clusterName"/>
          <Value Name="clusterName.parameter"/>
        </Condition>
        <Condition Type="String" Operator="EQ">
          <Value Name="clusterName.parameter"
                 xsi:nil="true"/>
          <Null/>
        </Condition>
      </Or>
    </Where>
  </Select>
 </Table>
-->

</Adml>
