<?xml version='1.0' encoding='UTF-8' ?>

<!-- Copyright (c) 2007, 2008, Oracle. All rights reserved.-->

<!--
This is the configuration file for the MAS Metric Service metrics for oracle_bam_server.
-->

<Adml xmlns="http://www.oracle.com/iAS/aggregator"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      TableSpace="oracle_bam_web">

<!-- **************************************************** -->
<!--        Aggregation for BAM Web Reports Server      -->
<!-- **************************************************** -->  	

 <Table Name="BAM_server_reportserver_activity_rate">

  <ColumnDef Name="Activity.MsgRate" Type="Double"/>
  <ColumnDef Name="Activity.openViewSetAvgTime" Type="Double"/>
  
  <!--
  	<ColumnDef Name="Activity.messageRatePerViewSet" Type="Integer"/>
  -->
  
  <ColumnDef Name="ReportingComponentNodeID" Type="String" Key="true"/>


  <Select Name="BAM_server_reportserver_activity_rate_result">
   <TableFrom Name="BAM_server_reportserver_activity"/>

   <Column Name="Activity.MsgRate" Type="Double">
	<Rate Interval="300000">
		<ColumnFrom Name="TotalMessages.value"/>
		<Default>0</Default>
	</Rate>
   </Column>
   <Column Name="Activity.openViewSetAvgTime" Type="Double">
   	<Expression Operator="Div">
   		<ColumnFrom Name="openViewSetElaspedTime.avg"/>
   		<Value>1000</Value>
   	</Expression>
	<Default>0</Default>
   </Column>
   <!--
   <Column Name="Activity.messageRatePerViewSet" Type="Double">
   	<Expression Operator="Div">
   		<ColumnFrom Name="Activity.MsgRate" Table="BAM_server_reportserver_activity_rate"/>
		<ColumnFrom Name="Open_ViewSets.value" Table="BAM_server_reportcache_viewsets"/>   		
   	</Expression>
	<Default>0</Default>
   </Column>
   -->


   <Column Name="ReportingComponentNodeID" Type="String"/>
  </Select>

 </Table> <!-- BAM_server_reportserver_activity_rate -->
 
 <Table Name="BAM_server_reportserver_activedatapage">

 	<ColumnDef Name="OpenConnections.value" Type="Integer"/>
  	<ColumnDef Name="ReportingComponentNodeID" Type="String" Key="true"/>
  	<Select Name="BAM_server_reportserver_activedatapage_result">

   		<TableFrom Name="BAM_server_reportserver_activedatapage"/>
		<Column Name="OpenConnections.value" Type="Integer">
			<ColumnFrom Name="OpenConnections.value"/>
		</Column>
		<Column Name="ReportingComponentNodeID" Type="String"/>

  	</Select>

 </Table> <!-- BAM_server_reportserver_activedatapage-->
 

<Table Name="BAM_server_reportserver_activedatapageinfo">

 	<ColumnDef Name="OpenedReports.value" Type="Integer"/>
  	<ColumnDef Name="ReportingComponentNodeID" Type="String" Key="true"/>
  	<Select Name="BAM_server_reportserver_activedatapageinfo_result">

   		<TableFrom Name="BAM_server_reportserver_activedatapageinfo"/>
		<Column Name="OpenedReports.value" Type="Integer">
			<ColumnFrom Name="OpenedReports.value"/>
		</Column>
		<Column Name="ReportingComponentNodeID" Type="String"/>

  	</Select>

 </Table> <!-- BAM_server_reportserver_activedatapageinfo--> 

<Table Name="BAM_server_reportserver_activedataviewset">

 	<ColumnDef Name="OpenedViewSets.value" Type="Integer"/>
  	<ColumnDef Name="ReportingComponentNodeID" Type="String" Key="true"/>
  	<Select Name="BAM_server_reportserver_activedataviewset_result">

   		<TableFrom Name="BAM_server_reportserver_activedataviewset"/>
		<Column Name="OpenedViewSets.value" Type="Integer">
			<ColumnFrom Name="OpenedViewSets.value"/>
		</Column>
		<Column Name="ReportingComponentNodeID" Type="String"/>

  	</Select>

 </Table> <!-- BAM_server_reportserver_activedataviewset--> 

</Adml>
