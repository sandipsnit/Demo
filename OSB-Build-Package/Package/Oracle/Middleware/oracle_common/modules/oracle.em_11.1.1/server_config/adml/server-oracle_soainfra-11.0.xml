<Adml xmlns='http://www.oracle.com/iAS/aggregator' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' TableSpace='oracle_soainfra'>

<!-- Add this response metric after it is defined in the wls target rules file -->
<!--

        <Table Name="Response">
                <ColumnDef Name="ServerName" Type="String" Key="true"/>
                <ColumnDef Name="Status" Type="Integer"/>
                <Select Name="Response_result">
                        <TableFrom Name="oc4j:oc4j_ear"/>
                        <Column Name="ServerName" Type="String"/>
                        <Column Name="Status" Type="Integer">
                                <If>
                                        <Condition Operator="EQ">
                                                <ColumnFrom Name="Application_state.value"/>
                                                <Value>1</Value>
                                        </Condition>
                                        <Then>
                                                <Value>1</Value>
                                        </Then>
                                        <Else>
                                                <Value>0</Value>
                                        </Else>
                                </If>
                                <Default>0</Default>
                        </Column>
                        <Where>
                                <Or>
                                        <Condition Type="String" Operator="EQ">
                                                <ColumnFrom Name="Name"/>
                                                <Value Name="appName.parameter"/>
                                        </Condition>
                                        <Condition Operator='EQ' Type='String'>
                                          <Value xsi:nil='true' Name='appName.parameter' />
                                          <Null />
                                        </Condition>
                                </Or>
                        </Where>
                </Select>
        </Table>
-->
<!-- begin mesh metrics -->
  <Table Name='soainfra_mesh_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Double' Name='Posts.averageTime' />
    <ColumnDef Type='Double' Name='Posts.totalTime' />
    <ColumnDef Type='Integer' Name='Posts.active' />
    <ColumnDef Type='Integer' Name='PostErrors.count' />
    <ColumnDef Type='Integer' Name='Posts.completed' />
    <ColumnDef Type='Double' Name='Posts.time' />
    <ColumnDef Type='Double' Name='Requests.averageTime' />
    <ColumnDef Type='Double' Name='Requests.totalTime' />
    <ColumnDef Type='Integer' Name='Requests.active' />
    <ColumnDef Type='Integer' Name='RequestErrors.count' />
    <ColumnDef Type='Integer' Name='Requests.completed' />
    <ColumnDef Type='Double' Name='Requests.time' />
    <ColumnDef Type='Integer' Name='Mesh.active' />
    <ColumnDef Type='Integer' Name='Mesh.errors' />
    <Select Name='soainfra_mesh_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_Mesh' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Posts.active'>
        <Aggregation Operator='Sum' Name='Posts.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='Requests.active'>
        <Aggregation Operator='Sum' Name='Requests.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='PostErrors.count'>
        <Aggregation Operator='Sum' Name='PostErrors.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='RequestErrors.count'>
        <Aggregation Operator='Sum' Name='RequestErrors.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='Posts.completed'>
        <Aggregation Operator='Sum' Name='Posts.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='Requests.completed'>
        <Aggregation Operator='Sum' Name='Requests.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='Posts.time'>
        <Aggregation Operator='Sum' Name='Posts.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='Requests.time'>
        <Aggregation Operator='Sum' Name='Requests.time' />
        <Default>0</Default>
      </Column>

      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />

    </Select>

    <Select Name='soainfra_mesh_rollup_no_rate_result'>
      <TableFrom Name='soainfra_mesh_rollup_no_rate_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Posts.active' />
      <Column Type='Integer' Name='PostErrors.count' />
      <Column Type='Integer' Name='Posts.completed' />
      <Column Type='Double' Name='Posts.time' />
      <Column Type='Integer' Name='Requests.active' />
      <Column Type='Integer' Name='RequestErrors.count' />
      <Column Type='Integer' Name='Requests.completed' />
      <Column Type='Double' Name='Requests.time' />

<!-- the amount of time spent processing Post messages since startup (milliseconds) -->

      <Column Type='Double' Name='Posts.totalTime'>
        <ColumnFrom Name='Posts.time' />
                <Default>0</Default>
      </Column>

<!-- Average Post Message Processing time since startup -->

      <Column Type='Double' Name='Posts.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='Posts.time' />
                  <ColumnFrom Name='Posts.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

<!-- the amount of time spent processing Request messages since startup (seconds) -->

      <Column Type='Double' Name='Requests.totalTime'>

         <ColumnFrom Name='Requests.time' />


        <Default>0</Default>
      </Column>

<!-- Average Request Message Processing time since startup -->

      <Column Type='Double' Name='Requests.averageTime'>
        <Expression Operator='Div'>

            <ColumnFrom Name='Requests.time' />

          <ColumnFrom Name='Requests.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Integer' Name='Mesh.active'>
        <Expression Operator='Plus'>
          <ColumnFrom Name='Posts.active' />
          <ColumnFrom Name='Requests.active' />
          <Default>0</Default>
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Integer' Name='Mesh.errors'>
        <Expression Operator='Plus'>
          <ColumnFrom Name='PostErrors.count' />
          <ColumnFrom Name='RequestErrors.count' />
          <Default>0</Default>
        </Expression>
        <Default>0</Default>
      </Column>

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- the rate table -->

  <Table Name='soainfra_mesh_rollup'>
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Double' Name='Posts.averageTime' />
    <ColumnDef Type='Double' Name='Posts.totalTime' />
    <ColumnDef Type='Integer' Name='Posts.active' />
    <ColumnDef Type='Double' Name='PostErrors.throughput' />
    <ColumnDef Type='Double' Name='Posts.throughput' />
    <ColumnDef Type='Integer' Name='Posts.completed' />
    <ColumnDef Type='Double' Name='Requests.averageTime' />
    <ColumnDef Type='Double' Name='Requests.totalTime' />
    <ColumnDef Type='Integer' Name='Requests.active' />
    <ColumnDef Type='Double' Name='RequestErrors.throughput' />
    <ColumnDef Type='Double' Name='Requests.throughput' />
    <ColumnDef Type='Integer' Name='Requests.completed' />
    <ColumnDef Type='Integer' Name='Mesh.active' />
    <ColumnDef Type='Integer' Name='Mesh.errors' />
    <ColumnDef Type='Double' Name='Mesh.throughput' />
    <ColumnDef Type='Integer' Name='Mesh.count' />
    <Select Name='soainfra_mesh_rollup_result_1'>
      <TableFrom Name='oracle_soainfra:soainfra_mesh_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Posts.active' />
      <Column Type='Integer' Name='Requests.active' />
      <Column Type='Double' Name='Posts.totalTime' />
      <Column Type='Double' Name='Posts.averageTime' />
          <Column Type='Integer' Name='Posts.completed' />
      <Column Type='Double' Name='Requests.totalTime' />
      <Column Type='Double' Name='Requests.averageTime' />
          <Column Type='Integer' Name='Requests.completed' />
      <Column Type='Integer' Name='Mesh.active' />
      <Column Type='Integer' Name='Mesh.errors' />
      <Column Type='Double' Name='PostErrors.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='PostErrors.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='Posts.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='Posts.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='RequestErrors.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='RequestErrors.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='Requests.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='Requests.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='Mesh.count' >
        <Expression Operator='Plus'>
          <ColumnFrom Name='Posts.completed' />
          <ColumnFrom Name='Requests.completed' />
          <Default>0</Default>
        </Expression>
        <Default>0</Default>
      </Column>
    </Select>
    <Select Name='soainfra_mesh_rollup_result'>
      <TableFrom Name='soainfra_mesh_rollup_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Posts.active' />
      <Column Type='Integer' Name='Requests.active' />
      <Column Type='Double' Name='Posts.totalTime' />
      <Column Type='Double' Name='Posts.averageTime' />
          <Column Type='Integer' Name='Posts.completed' />
      <Column Type='Double' Name='Requests.totalTime' />
      <Column Type='Double' Name='Requests.averageTime' />
          <Column Type='Integer' Name='Requests.completed' />
      <Column Type='Integer' Name='Mesh.active' />
      <Column Type='Integer' Name='Mesh.errors' />
      <Column Type='Double' Name='PostErrors.throughput' />
      <Column Type='Double' Name='Posts.throughput' />
      <Column Type='Double' Name='RequestErrors.throughput' />
      <Column Type='Double' Name='Requests.throughput' />
      <Column Type='Double' Name='Mesh.throughput'>
        <Expression Operator='Plus'>
          <ColumnFrom Name='Posts.throughput' />
          <ColumnFrom Name='Requests.throughput' />
          <Default>0</Default>
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='Mesh.count' />
      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>

<!-- end delta table -->


<!-- ////////////////////////////////////////////////////////////// -->


<!--         B2B Metrics BEGIN                                      -->


<!-- ////////////////////////////////////////////////////////////// -->


<!-- B2B trading partners BEGIN -->
 <Table Name='soa_infra_all_bindings_result_inbound'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Name='soainfra_b2b_tradingPartner_dir' />
    <ColumnDef Type='Integer' Name='processMessagesErrors.count' />
    <ColumnDef Type='Integer' Name='processMessagesEvents.count' />
    <ColumnDef Type='Double' Name='processMessages.time' />
    <ColumnDef Type='Integer' Name='processMessages.completed' />
    <ColumnDef Type='Double' Name='processMessageSize.value' />
  <Select Name="soa_infra_all_bindings_result_inbound">
   <TableFrom Name="soainfra_b2b_tradingPartner"/>
   <Column Name="Name" Type="String">
    <ColumnFrom Name="Name"/>
   </Column>
   <Column Name="ServerName" Type="String"/>
   <Column Name="soainfra_b2b_tradingPartner_dir" Type="String"/>
   <Column Name="processMessagesErrors.count" Type="Integer"/>
   <Column Name="processMessagesEvents.count" Type="Integer">
    <Default>0</Default>
   </Column>
   <Column Name="processMessages.time" Type="Double"/>
   <Column Name="processMessages.completed" Type="Integer"/>
   <Column Name="processMessageSize.value" Type="Double"/>
   <Where>
    <Condition Operator="EQ" Type="String">
     <ColumnFrom Name="soainfra_b2b_tradingPartner_dir"/>
     <Value>to</Value>
    </Condition>
   </Where>
  </Select>
 </Table>

 <Table Name='soa_infra_all_bindings_result_outbound'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Name='soainfra_b2b_tradingPartner_dir' />
    <ColumnDef Type='Integer' Name='processMessagesErrors.count' />
    <ColumnDef Type='Integer' Name='processMessagesEvents.count' />
    <ColumnDef Type='Double' Name='processMessages.time' />
    <ColumnDef Type='Integer' Name='processMessages.completed' />
    <ColumnDef Type='Double' Name='processMessageSize.value' />
    <Select Name="soa_infra_all_bindings_result_outbound">
        <TableFrom Name="soainfra_b2b_tradingPartner"/>
        <Column Name="Name" Type="String">
                <ColumnFrom Name="Name"/>
        </Column>
        <Column Name="ServerName" Type="String"/>
        <Column Name="soainfra_b2b_tradingPartner_dir" Type="String"/>
        <Column Name="processMessagesErrors.count" Type="Integer"/>
        <Column Name="processMessagesEvents.count" Type="Integer">
         <Default>0</Default>
        </Column>
      <Column Name="processMessages.time" Type="Double"/>
      <Column Name="processMessages.completed" Type="Integer"/>
      <Column Name="processMessageSize.value" Type="Double"/>
      <Where>
        <Condition Operator="EQ" Type="String">
          <ColumnFrom Name="soainfra_b2b_tradingPartner_dir"/>
          <Value>from</Value>
        </Condition>
      </Where>
    </Select>
 </Table>

  <Table Name='b2b_trading_partners_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Integer' Name='inboundMessages.count' />
    <ColumnDef Type='Integer' Name='outboundMessages.count' />
    <ColumnDef Type='Double' Name='inboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='outboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='inboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='outboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='inboundMessages.totalTime' />
    <ColumnDef Type='Integer' Name='inboundMessages.completed' />
    <ColumnDef Type='Double' Name='outboundMessages.totalTime' />
    <ColumnDef Type='Integer' Name='outboundMessages.completed' />
    <ColumnDef Type='Integer' Name='inboundMessages.faults' />
    <ColumnDef Type='Integer' Name='outboundMessages.faults' />
        <ColumnDef Type='Integer' Name='totalMessages.count'/>
<!--
        <Select Name="soa_infra_all_bindings_result_inbound">
                <TableFrom Name="soainfra_b2b_tradingPartner"/>
                <Column Name="Name" Type="String">
                        <ColumnFrom Name="Name"/>
                </Column>
                <Column Name="ServerName" Type="String"/>
                <Column Name="soainfra_b2b_tradingPartner_dir" Type="String"/>
                <Column Name="processMessagesErrors.count" Type="Integer"/>
                <Column Name="processMessagesEvents.count" Type="Integer"/>
                <Column Name="processMessages.time" Type="Double"/>
                <Column Name="processMessages.completed" Type="Integer"/>
                <Column Name="processMessageSize.value" Type="Double"/>
      <Where>
        <Condition Operator="EQ" Type="String">
            <ColumnFrom Name="soainfra_b2b_tradingPartner_dir"/>
            <Value>to</Value>
        </Condition>
      </Where>
    </Select>
    <Select Name="soa_infra_all_bindings_result_outbound">
        <TableFrom Name="soainfra_b2b_tradingPartner"/>
        <Column Name="Name" Type="String">
                <ColumnFrom Name="Name"/>
        </Column>
        <Column Name="ServerName" Type="String"/>
        <Column Name="soainfra_b2b_tradingPartner_dir" Type="String"/>
        <Column Name="processMessagesErrors.count" Type="Integer"/>
        <Column Name="processMessagesEvents.count" Type="Integer"/>
      <Column Name="processMessages.time" Type="Double"/>
      <Column Name="processMessages.completed" Type="Integer"/>
      <Column Name="processMessageSize.value" Type="Double"/>
      <Where>
        <Condition Operator="EQ" Type="String">
          <ColumnFrom Name="soainfra_b2b_tradingPartner_dir"/>
          <Value>from</Value>
        </Condition>
      </Where>
    </Select>
    -->
    <Select Name="b2b_trading_partners_rollup_no_rate">
      <TableFrom Name="oracle_soainfra:soa_infra_all_bindings_result_inbound" OuterJoined="true"/>
      <TableFrom Name="oracle_soainfra:soa_infra_all_bindings_result_outbound" OuterJoined="true"/>
      <Column Name="Name" Type="String">
        <If>
          <Condition Operator="NE">
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
            <Null/>
          </Condition>
          <Then>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
          </Then>
          <Else>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
          </Else>
        </If>
      </Column>
      <Column Name="inboundMessages.faults" Type="Integer">
                        <Aggregation Operator="Sum" Name="processMessagesErrors.count"
                                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
                        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.count" Type="Integer">
                        <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
                        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.faults" Type="Integer">
                        <Aggregation Operator="Sum" Name="processMessagesErrors.count"
                                Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
                        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.count" Type="Integer">
                <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                        Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.processingTime" Type="Double">
                        <Expression Operator="Div">
                                <Expression Operator="Div">
                                        <Aggregation Operator="Sum" Name="processMessages.time"
                                                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
                                        <Value>1000</Value>
                                </Expression>
                                <Aggregation Operator="Sum" Name="processMessages.completed"
                                        Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
                        </Expression>
                        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.processingTime" Type="Double">
        <Expression Operator="Div">
          <Expression Operator="Div">
            <Aggregation Operator="Sum" Name="processMessages.time"
                Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
            <Value>1000</Value>
          </Expression>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.messageSize" Type="Double">
            <!--Aggregation Operator="Avg" Name="processMessageSize.value"
                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/-->
         <Expression Operator="Div">
            <Aggregation Operator="Sum" Name="processMessageSize.value"
                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                  Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
         </Expression>
         <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.messageSize" Type="Double">
        <!--Aggregation Operator="Avg" Name="processMessageSize.value"
            Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/-->
        <Expression Operator="Div">
         <Aggregation Operator="Sum" Name="processMessageSize.value"
             Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
       </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="totalMessages.count" Type="Integer">
         <Expression Operator="Plus">
           <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
                         <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                                Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
         </Expression>
      </Column>
      <GroupBy Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
      <GroupBy Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
      <!--OrderBy Name="totalMessages.count"/--> <!-- Sort based on the activity -->
      <!--RowRetained Name="top5TPs">5</RowRetained--> <!-- Only show the first 5 -->
      <Where>
        <And>
          <Condition Operator="EQ" Type="String">
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
          </Condition>
          <Condition Operator="EQ" Type="String">
            <ColumnFrom Name="ServerName" Table="oracle_soainfra:soa_infra_all_bindings_result_inbound"/>
            <ColumnFrom Name="ServerName" Table="oracle_soainfra:soa_infra_all_bindings_result_outbound"/>
          </Condition>
        </And>
      </Where>
    </Select>
  </Table>


<!-- the delta table -->

  <Table Name='b2b_trading_partners_delta_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaCount' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaCount' />
    <ColumnDef Type='Double' Name='inboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='outboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='inboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='outboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='inboundMessages.deltaTime' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaCompleted' />
    <ColumnDef Type='Double' Name='outboundMessages.deltaTime' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaCompleted' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaFaults' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaFaults' />
    <ColumnDef Type='Double' Name='inboundMessages.deltaMessageSize' />
    <ColumnDef Type='Double' Name='outboundMessages.deltaMessageSize' />
    <ColumnDef Type='Integer' Name='inboundMessages.count' />
    <ColumnDef Type='Integer' Name='outboundMessages.count' />
    <ColumnDef Type='Integer' Name='inboundMessages.faults' />
    <ColumnDef Type='Integer' Name='outboundMessages.faults' />
        <ColumnDef Type='Integer' Name='totalMessages.deltaCount'/>

    <Select Name='b2b_trading_partners_delta_rollup_1'>
      <TableFrom Name='oracle_soainfra:b2b_trading_partners_rollup_no_rate' />
      <Column Type='String' Name='Name' />
                <Column Type='Integer' Name='inboundMessages.count' />
                <Column Type='Integer' Name='outboundMessages.count' />
                <Column Type='Double' Name='inboundMessages.processingTime' />
                <Column Type='Double' Name='outboundMessages.processingTime' />
                <Column Type='Double' Name='inboundMessages.messageSize' />
                <Column Type='Double' Name='outboundMessages.messageSize' />
                <Column Type='Double' Name='inboundMessages.totalTime' />
                <Column Type='Integer' Name='inboundMessages.completed' />
                <Column Type='Double' Name='outboundMessages.totalTime' />
                <Column Type='Integer' Name='outboundMessages.completed' />
                                                    <Column Type='Integer' Name='inboundMessages.faults' />
                                                    <Column Type='Integer' Name='outboundMessages.faults' />
                <Column Type='Integer' Name='totalMessages.count'/>

<!-- Get the previous values of completed and time.  We will use them to
        determine the number of instances and the amount of time spent
        during the last period.  Note that the time period is 5 minutes
        (300 seconds = 300,000 milliseconds) -->
      <Column Type='Integer' Name='inboundMessages.faults.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.faults' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='outboundMessages.faults.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.faults' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='inboundMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='outboundMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='inboundMessages.time.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.totalTime' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='outboundMessages.time.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.totalTime' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='inboundMessages.completed.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.completed' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='outboundMessages.completed.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.completed' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='inboundMessages.messageSize.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.messageSize' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='outboundMessages.messageSize.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.messageSize' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='totalMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='totalMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>
    </Select>

        <Select Name='b2b_trading_partners_delta_rollup_2'>
                <TableFrom Name='b2b_trading_partners_delta_rollup_1' />
                <Column Type='String' Name='Name' />
                <Column Type='Double' Name='inboundMessages.processingTime' />
                <Column Type='Double' Name='outboundMessages.processingTime' />
                <Column Type='Double' Name='inboundMessages.messageSize' />
                <Column Type='Double' Name='outboundMessages.messageSize' />
                            <Column Type='Integer' Name='inboundMessages.count' />
                            <Column Type='Integer' Name='outboundMessages.count' />
                            <Column Type='Integer' Name='inboundMessages.faults' />
                            <Column Type='Integer' Name='outboundMessages.faults' />

                <!-- Compute the activity during the period.  Note that we need to do this
                in a separate table due the way DMS propagates errors. -->

                <Column Type='Integer' Name='outboundMessages.deltaFaults'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.faults.previous' />
                        <ColumnFrom Name='outboundMessages.faults' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='outboundMessages.faults' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.faults' />
                          <ColumnFrom Name='outboundMessages.faults.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='inboundMessages.deltaFaults'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.faults.previous' />
                        <ColumnFrom Name='inboundMessages.faults' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='inboundMessages.faults' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.faults' />
                          <ColumnFrom Name='inboundMessages.faults.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>


                <Column Type='Integer' Name='inboundMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.count.previous' />
                        <ColumnFrom Name='inboundMessages.count' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='inboundMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.count' />
                          <ColumnFrom Name='inboundMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='outboundMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.count.previous' />
                        <ColumnFrom Name='outboundMessages.count' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='outboundMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.count' />
                          <ColumnFrom Name='outboundMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

      <Column Type='Double' Name='inboundMessages.deltaTime'>
        <If>
          <Condition Operator='GT'>
            <ColumnFrom Name='inboundMessages.time.previous' />
            <ColumnFrom Name='inboundMessages.totalTime' />
          </Condition>
          <Then>
<!-- Server was restarted, just use time -->
            <ColumnFrom Name='inboundMessages.totalTime' />
          </Then>
          <Else>
            <Expression Operator='Minus'>
              <ColumnFrom Name='inboundMessages.totalTime' />
              <ColumnFrom Name='inboundMessages.time.previous' />
            </Expression>
          </Else>
        </If>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='outboundMessages.deltaTime'>
        <If>
          <Condition Operator='GT'>
            <ColumnFrom Name='outboundMessages.time.previous' />
            <ColumnFrom Name='outboundMessages.totalTime' />
          </Condition>
          <Then>
<!-- Server was restarted, just use time -->
            <ColumnFrom Name='outboundMessages.totalTime' />
          </Then>
          <Else>
            <Expression Operator='Minus'>
              <ColumnFrom Name='outboundMessages.totalTime' />
              <ColumnFrom Name='outboundMessages.time.previous' />
            </Expression>
          </Else>
        </If>
        <Default>0</Default>
      </Column>

                <Column Type='Integer' Name='inboundMessages.deltaCompleted'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.completed.previous' />
                        <ColumnFrom Name='inboundMessages.completed' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='inboundMessages.completed' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.completed' />
                          <ColumnFrom Name='inboundMessages.completed.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='outboundMessages.deltaCompleted'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.completed.previous' />
                        <ColumnFrom Name='outboundMessages.completed' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='outboundMessages.completed' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.completed' />
                          <ColumnFrom Name='outboundMessages.completed.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                 <Column Type='Double' Name='inboundMessages.deltaMessageSize'>
                     <Expression Operator="Div">
                            <If>
                              <Condition Operator='GT'>
                                 <ColumnFrom Name='inboundMessages.messageSize.previous' />
                                 <ColumnFrom Name='inboundMessages.messageSize' />
                              </Condition>
                              <Then>
                            <!-- Server was restarted, just use completed -->
                                    <ColumnFrom Name='inboundMessages.messageSize' />
                              </Then>
                              <Else>
                                 <Expression Operator='Minus'>
                                   <ColumnFrom Name='inboundMessages.messageSize' />
                                   <ColumnFrom Name='inboundMessages.messageSize.previous' />
                                 </Expression>
                              </Else>
                            </If>
                            <ColumnFrom Name='inboundMessages.deltaCount' />
                    </Expression>
                    <Default>0</Default>
                </Column>

                <Column Type='Double' Name='outboundMessages.deltaMessageSize'>
                    <Expression Operator="Div">
                        <If>
                          <Condition Operator='GT'>
                                <ColumnFrom Name='outboundMessages.faults.previous' />
                                <ColumnFrom Name='outboundMessages.faults' />
                          </Condition>
                          <Then>
                        <!-- Server was restarted, just use completed -->
                                <ColumnFrom Name='outboundMessages.faults' />
                          </Then>
                          <Else>
                                <Expression Operator='Minus'>
                                  <ColumnFrom Name='outboundMessages.faults' />
                                  <ColumnFrom Name='outboundMessages.faults.previous' />
                                </Expression>
                          </Else>
                        </If>
                        <ColumnFrom Name='outboundMessages.deltaCount' />
                      </Expression>
                    <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='totalMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='totalMessages.count.previous' />
                        <ColumnFrom Name='totalMessages.count' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='totalMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='totalMessages.count' />
                          <ColumnFrom Name='totalMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

           <Where>
  <And>
                 <Or>
                  <Condition Type="String" Operator="EQ">
                   <ColumnFrom Name="Name"/>
                   <Value Name="Name.parameter"/>
                  </Condition>
                  <Condition Type="String" Operator="EQ">
                   <Value Name="Name.parameter" xsi:nil="true"/>
                   <Null/>
                  </Condition>
                 </Or>
                  <Condition Type="String" Operator="NE">
                   <ColumnFrom Name="Name"/>
                   <Null/>
                  </Condition>
  </And>
           </Where>
        </Select>
  </Table>

<!-- B2B trading partners END -->


<!-- B2B document type begin -->

 <Table Name='soa_infra_b2b_all_document_inbound'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Name='soainfra_b2b_document_dir' />
    <ColumnDef Type='Integer' Name='processMessagesErrors.count' />
    <ColumnDef Type='Integer' Name='processMessagesEvents.count' />
    <ColumnDef Type='Double' Name='processMessages.time' />
    <ColumnDef Type='Integer' Name='processMessages.completed' />
    <ColumnDef Type='Double' Name='processMessageSize.value' />
    <Select Name="soa_infra_b2b_all_document_inbound">
      <TableFrom Name="soainfra_b2b_document"/>
      <Column Name="Name" Type="String">
        <ColumnFrom Name="Name"/>
      </Column>
      <Column Name="ServerName" Type="String"/>
      <Column Name="soainfra_b2b_document_dir" Type="String"/>
      <Column Name="processMessagesErrors.count" Type="Integer"/>
      <Column Name="processMessagesEvents.count" Type="Integer">
       <Default>0</Default>
      </Column>
      <Column Name="processMessages.time" Type="Double"/>
      <Column Name="processMessages.completed" Type="Integer"/>
      <Column Name="processMessageSize.value" Type="Double"/>
      <Where>
        <Condition Operator="EQ" Type="String">
          <ColumnFrom Name="soainfra_b2b_document_dir"/>
          <Value>inbound</Value>
        </Condition>
      </Where>
    </Select>
 </Table>

 <Table Name='soa_infra_b2b_all_document_outbound'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='String' Name='soainfra_b2b_document_dir' />
    <ColumnDef Type='Integer' Name='processMessagesErrors.count' />
    <ColumnDef Type='Integer' Name='processMessagesEvents.count' />
    <ColumnDef Type='Double' Name='processMessages.time' />
    <ColumnDef Type='Integer' Name='processMessages.completed' />
    <ColumnDef Type='Double' Name='processMessageSize.value' />
    <Select Name="soa_infra_b2b_all_document_outbound">
      <TableFrom Name="soainfra_b2b_document"/>
      <Column Name="Name" Type="String">
        <ColumnFrom Name="Name"/>
      </Column>
      <Column Name="ServerName" Type="String"/>
      <Column Name="soainfra_b2b_document_dir" Type="String"/>
      <Column Name="processMessagesErrors.count" Type="Integer"/>
      <Column Name="processMessagesEvents.count" Type="Integer">
       <Default>0</Default>
      </Column>
      <Column Name="processMessages.time" Type="Double"/>
      <Column Name="processMessages.completed" Type="Integer"/>
      <Column Name="processMessageSize.value" Type="Double"/>
      <Where>
        <Condition Operator="EQ" Type="String">
          <ColumnFrom Name="soainfra_b2b_document_dir"/>
          <Value>outbound</Value>
        </Condition>
      </Where>
    </Select>
 </Table>

  <Table Name='b2b_document_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Integer' Name='inboundMessages.count' />
    <ColumnDef Type='Integer' Name='outboundMessages.count' />
    <ColumnDef Type='Double' Name='inboundMessages.totalTime' />
    <ColumnDef Type='Double' Name='outboundMessages.totalTime' />
    <ColumnDef Type='Integer' Name='inboundMessages.completed' />
    <ColumnDef Type='Integer' Name='outboundMessages.completed' />
    <ColumnDef Type='Double' Name='inboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='outboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='inboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='outboundMessages.messageSize' />
    <ColumnDef Type='Integer' Name='inboundMessages.faults' />
    <ColumnDef Type='Integer' Name='outboundMessages.faults' />
                <ColumnDef Type='Integer' Name='totalMessages.count'/>
    <Select Name="b2b_document_rollup_no_rate">
      <TableFrom Name="oracle_soainfra:soa_infra_b2b_all_document_inbound" OuterJoined="true"/>
      <TableFrom Name="oracle_soainfra:soa_infra_b2b_all_document_outbound" OuterJoined="true"/>
      <Column Name="Name" Type="String">
        <If>
          <Condition Operator="NE">
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
            <Null/>
          </Condition>
          <Then>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
          </Then>
          <Else>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
          </Else>
        </If>
      </Column>
      <Column Name="inboundMessages.faults" Type="Integer">
        <Aggregation Operator="Sum" Name="processMessagesErrors.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.count" Type="Integer">
        <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.faults" Type="Integer">
        <Aggregation Operator="Sum" Name="processMessagesErrors.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.count" Type="Integer">
        <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.processingTime" Type="Double">
        <Expression Operator="Div">
          <Expression Operator="Div">
            <Aggregation Operator="Sum" Name="processMessages.time"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
            <Value>1000</Value>
          </Expression>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.processingTime" Type="Double">
        <Expression Operator="Div">
          <Expression Operator="Div">
            <Aggregation Operator="Sum" Name="processMessages.time"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
            <Value>1000</Value>
          </Expression>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="inboundMessages.messageSize" Type="Double">
        <!--Aggregation Operator="Avg" Name="processMessageSize.value"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/-->
         <Expression Operator="Div">
            <Aggregation Operator="Sum" Name="processMessageSize.value"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                  Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
         </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="outboundMessages.messageSize" Type="Double">
        <!--Aggregation Operator="Avg" Name="processMessageSize.value"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/-->
        <Expression Operator="Div">
         <Aggregation Operator="Sum" Name="processMessageSize.value"
             Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
          <Aggregation Operator="Sum" Name="processMessages.completed"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
       </Expression>
        <Default>0</Default>
      </Column>
      <Column Name="totalMessages.count" Type="Integer">
         <Expression Operator="Plus">
           <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
           <Aggregation Operator="Sum" Name="processMessagesEvents.count"
                Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
         </Expression>
      </Column>
      <GroupBy Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
      <GroupBy Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
      <!--OrderBy Name="totalMessages.count"/--> <!-- Sort based on the activity -->
      <!--RowRetained Name="top5TPs">5</RowRetained--> <!-- Only show the first 5 -->
      <Where>
        <And>
          <Condition Operator="EQ" Type="String">
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
            <ColumnFrom Name="Name" Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
          </Condition>
          <Condition Operator="EQ" Type="String">
            <ColumnFrom Name="ServerName" Table="oracle_soainfra:soa_infra_b2b_all_document_inbound"/>
            <ColumnFrom Name="ServerName" Table="oracle_soainfra:soa_infra_b2b_all_document_outbound"/>
          </Condition>
        </And>
      </Where>
    </Select>
  </Table>

<!-- the delta table -->
  <Table Name='b2b_document_delta_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaCount' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaCount' />
    <ColumnDef Type='Double' Name='inboundMessages.deltaTime' />
    <ColumnDef Type='Double' Name='outboundMessages.deltaTime' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaCompleted' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaCompleted' />
    <ColumnDef Type='Double' Name='inboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='outboundMessages.processingTime' />
    <ColumnDef Type='Double' Name='inboundMessages.messageSize' />
    <ColumnDef Type='Double' Name='outboundMessages.messageSize' />
    <ColumnDef Type='Integer' Name='inboundMessages.deltaFaults' />
    <ColumnDef Type='Integer' Name='outboundMessages.deltaFaults' />
    <ColumnDef Type='Integer' Name='inboundMessages.count' />
    <ColumnDef Type='Integer' Name='outboundMessages.count' />
    <ColumnDef Type='Integer' Name='inboundMessages.faults' />
    <ColumnDef Type='Integer' Name='outboundMessages.faults' />
        <ColumnDef Type='Integer' Name='totalMessages.deltaCount'/>

    <Select Name='b2b_document_delta_rollup_result_1'>
      <TableFrom Name='oracle_soainfra:b2b_document_rollup_no_rate' />
                <Column Type='String' Name='Name' />
                <Column Type='Integer' Name='inboundMessages.count' />
                <Column Type='Integer' Name='outboundMessages.count' />
                <Column Type='Double' Name='inboundMessages.totalTime' />
                <Column Type='Double' Name='outboundMessages.totalTime' />
                <Column Type='Integer' Name='inboundMessages.completed' />
                <Column Type='Integer' Name='outboundMessages.completed' />
                <Column Type='Double' Name='inboundMessages.processingTime' />
                <Column Type='Double' Name='outboundMessages.processingTime' />
                <Column Type='Double' Name='inboundMessages.messageSize' />
                <Column Type='Double' Name='outboundMessages.messageSize' />
                                                    <Column Type='Integer' Name='inboundMessages.faults' />
                                                    <Column Type='Integer' Name='outboundMessages.faults' />
                <Column Type='Integer' Name='totalMessages.count'/>

<!-- Get the previous values of completed and time.  We will use them to
        determine the number of instances and the amount of time spent
        during the last period.  Note that the time period is 5 minutes
        (300 seconds = 300,000 milliseconds) -->
      <Column Type='Integer' Name='inboundMessages.faults.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.faults' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='outboundMessages.faults.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.faults' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='inboundMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='outboundMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='inboundMessages.time.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.totalTime' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='outboundMessages.time.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.totalTime' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='inboundMessages.completed.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='inboundMessages.completed' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Double' Name='outboundMessages.completed.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='outboundMessages.completed' />
          <Default>0</Default>
        </Previous>
      </Column>
      <Column Type='Integer' Name='totalMessages.count.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='totalMessages.count' />
          <Default>0</Default>
        </Previous>
      </Column>

    </Select>

        <Select Name='b2b_document_delta_rollup_result_2'>
                <TableFrom Name='b2b_document_delta_rollup_result_1' />
                <Column Type='String' Name='Name' />
                            <Column Type='Integer' Name='inboundMessages.count' />
                            <Column Type='Integer' Name='outboundMessages.count' />
                            <Column Type='Integer' Name='inboundMessages.faults' />
                            <Column Type='Integer' Name='outboundMessages.faults' />
                <Column Type='Double' Name='inboundMessages.processingTime' />
                <Column Type='Double' Name='outboundMessages.processingTime' />
                <Column Type='Double' Name='inboundMessages.messageSize' />
                <Column Type='Double' Name='outboundMessages.messageSize' />

                <Column Type='Integer' Name='outboundMessages.deltaFaults'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.faults.previous' />
                        <ColumnFrom Name='outboundMessages.faults' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='outboundMessages.faults' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.faults' />
                          <ColumnFrom Name='outboundMessages.faults.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='inboundMessages.deltaFaults'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.faults.previous' />
                        <ColumnFrom Name='inboundMessages.faults' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='inboundMessages.faults' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.faults' />
                          <ColumnFrom Name='inboundMessages.faults.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='inboundMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.count.previous' />
                        <ColumnFrom Name='inboundMessages.count' />
                  </Condition>
                  <Then>
                       <ColumnFrom Name='inboundMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.count' />
                          <ColumnFrom Name='inboundMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='outboundMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.count.previous' />
                        <ColumnFrom Name='outboundMessages.count' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='outboundMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.count' />
                          <ColumnFrom Name='outboundMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

      <Column Type='Double' Name='inboundMessages.deltaTime'>
        <If>
          <Condition Operator='GT'>
            <ColumnFrom Name='inboundMessages.time.previous' />
            <ColumnFrom Name='inboundMessages.totalTime' />
          </Condition>
          <Then>
            <ColumnFrom Name='inboundMessages.totalTime' />
          </Then>
          <Else>
            <Expression Operator='Minus'>
              <ColumnFrom Name='inboundMessages.totalTime' />
              <ColumnFrom Name='inboundMessages.time.previous' />
            </Expression>
          </Else>
        </If>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='outboundMessages.deltaTime'>
        <If>
          <Condition Operator='GT'>
            <ColumnFrom Name='outboundMessages.time.previous' />
            <ColumnFrom Name='outboundMessages.totalTime' />
          </Condition>
          <Then>
            <ColumnFrom Name='outboundMessages.totalTime' />
          </Then>
          <Else>
            <Expression Operator='Minus'>
              <ColumnFrom Name='outboundMessages.totalTime' />
              <ColumnFrom Name='outboundMessages.time.previous' />
            </Expression>
          </Else>
        </If>
        <Default>0</Default>
      </Column>

                <Column Type='Integer' Name='inboundMessages.deltaCompleted'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='inboundMessages.completed.previous' />
                        <ColumnFrom Name='inboundMessages.completed' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='inboundMessages.completed' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='inboundMessages.completed' />
                          <ColumnFrom Name='inboundMessages.completed.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='outboundMessages.deltaCompleted'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='outboundMessages.completed.previous' />
                        <ColumnFrom Name='outboundMessages.completed' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='outboundMessages.completed' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='outboundMessages.completed' />
                          <ColumnFrom Name='outboundMessages.completed.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='totalMessages.deltaCount'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='totalMessages.count.previous' />
                        <ColumnFrom Name='totalMessages.count' />
                  </Condition>
                  <Then>
                        <ColumnFrom Name='totalMessages.count' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='totalMessages.count' />
                          <ColumnFrom Name='totalMessages.count.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

           <Where>
  <And>
                 <Or>
                  <Condition Type="String" Operator="EQ">
                   <ColumnFrom Name="Name"/>
                   <Value Name="Name.parameter"/>
                  </Condition>
                  <Condition Type="String" Operator="EQ">
                   <Value Name="Name.parameter" xsi:nil="true"/>
                   <Null/>
                  </Condition>
                 </Or>
                  <Condition Type="String" Operator="NE">
                   <ColumnFrom Name="Name"/>
                   <Null/>
                  </Condition>
  </And>
           </Where>
        </Select>
  </Table>

  <!-- B2B Active Agreements Metrics -->
	<Table Name='soainfra_b2b_agreements_all'>
		<ColumnDef Type='String' Key='true' Name='Name' />
		<ColumnDef Type='String' Key='true' Name='ServerName' />
		<ColumnDef Type='String' Name='Host' />
		<ColumnDef Type='String' Name='Process' />
		<ColumnDef Type='Integer' Name='processMessagesEvents.count' />
		<ColumnDef Type='String' Name='soainfra_b2b_agreement_dir' />
		<Select Name="soainfra_b2b_agreements_inbound">
			<TableFrom Name="soainfra_b2b_agreement"/>
			<Column Name="Name" Type="String"/>
			<Column Name="ServerName" Type="String"/>
			<Column Name="Host" Type="String"/>
			<Column Name="Process" Type="String"/>
			<Column Name="soainfra_b2b_agreement_dir" Type="String"/>
			<Column Name="processMessagesEvents.count" Type="Integer">
				<Default>0</Default>
			</Column>
			<Where>
          <Condition Operator='NE' Type='String'>
            <ColumnFrom Name='Name' />
            <Null />
          </Condition>
			</Where>
		</Select>
	</Table>

<!-- B2B inbound endpoints-->

  <Table Name='b2b_endpoints_inbound'>
    <ColumnDef Type='String' Key='true' Name='protocol' />
    <ColumnDef Type='String' Key='true' Name='uri' />
    <ColumnDef Type='String' Name='status' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <Select Name='b2b_endpoints_inbound'>
      <TableFrom Name='soainfra_b2b_endpoint' />
      <Column Type='String' Name='ServerName' />
      <Column Type='String' Name='protocol'>
        <ColumnFrom Name='endpointProtocol.value' />
      </Column>
      <Column Type='String' Name='uri'>
        <ColumnFrom Name='Name' />
      </Column>
      <Column Type='String' Name='status'>
        <ColumnFrom Name='endpointStatus.value' />
      </Column>
      <Column Type='String' Name='soainfra_b2b_endpoint_dir' />
      <Where>
        <And>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='soainfra_b2b_endpoint_dir' />
            <Value>inbound</Value>
          </Condition>
          <Condition Operator='NE' Type='String'>
            <ColumnFrom Name='uri' />
            <Null />
          </Condition>
        </And>
      </Where>
    </Select>
  </Table>

<!-- B2B outbound endpoints-->

  <Table Name='b2b_endpoints_outbound'>
    <ColumnDef Type='String' Key='true' Name='protocol' />
    <ColumnDef Type='String' Key='true' Name='uri' />
    <ColumnDef Type='String' Name='status' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <Select Name='b2b_endpoints_outbound'>
      <TableFrom Name='soainfra_b2b_endpoint' />
      <Column Type='String' Name='ServerName' />
      <Column Type='String' Name='protocol'>
        <ColumnFrom Name='endpointProtocol.value' />
      </Column>
      <Column Type='String' Name='uri'>
        <ColumnFrom Name='Name' />
      </Column>
      <Column Type='String' Name='status'>
        <ColumnFrom Name='endpointStatus.value' />
      </Column>
      <Column Type='String' Name='soainfra_b2b_endpoint_dir' />
      <Where>
        <And>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='soainfra_b2b_endpoint_dir' />
            <Value>outbound</Value>
          </Condition>
          <Condition Operator='NE' Type='String'>
            <ColumnFrom Name='uri' />
            <Null />
          </Condition>
        </And>
      </Where>
    </Select>
  </Table>

<!-- B2B active entities BEGIN -->

  <Table Name='b2b_active_entities_no_rate'>
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='active.agreements' />
    <ColumnDef Type='Integer' Name='active.documents' />
    <ColumnDef Type='Integer' Name='active.tps' />
    <Select Name='soa_infra_b2b_active_entities_no_rate'>
      <TableFrom Name='soainfra_b2b_active_entities' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.agreements'>
        <Aggregation Operator='Sum' Name='activeAgreements.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='active.documents'>
        <Aggregation Operator='Sum' Name='activeDocuments.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='active.tps'>
        <Aggregation Operator='Sum' Name='activeTradingPartners.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='ServerName' />
    </Select>
  </Table>

        <!-- the delta table -->
  <Table Name='b2b_active_entities_delta_rollup'>
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='active.agreements.deltaValue' />
    <ColumnDef Type='Integer' Name='active.documents.deltaValue' />
    <ColumnDef Type='Integer' Name='active.tps.deltaValue' />
    <ColumnDef Type='Integer' Name='active.agreements'/>
    <ColumnDef Type='Integer' Name='active.documents'/>
    <ColumnDef Type='Integer' Name='active.tps'/>

        <Select Name='b2b_active_entities_delta_rollup_result_1'>
      <TableFrom Name='oracle_soainfra:b2b_active_entities_no_rate' />

      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.agreements'/>
      <Column Type='Integer' Name='active.documents'/>
      <Column Type='Integer' Name='active.tps'/>

      <Column Type='Integer' Name='active.agreements.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='active.agreements' />
          <Default>0</Default>
        </Previous>
      </Column>

          <Column Type='Integer' Name='active.documents.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='active.documents' />
          <Default>0</Default>
        </Previous>
      </Column>

          <Column Type='Integer' Name='active.tps.previous'>
        <Previous Index='0' Interval='300000'>
          <ColumnFrom Name='active.tps' />
          <Default>0</Default>
        </Previous>
      </Column>
    </Select>

        <Select Name='b2b_active_entities_delta_rollup_result'>
      <TableFrom Name='b2b_active_entities_delta_rollup_result_1' />

      <Column Type='String' Name='ServerName' />
        <Column Type='Integer' Name='active.agreements'/>
        <Column Type='Integer' Name='active.documents'/>
        <Column Type='Integer' Name='active.tps'/>

                <Column Type='Integer' Name='active.agreements.deltaValue'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='active.agreements.previous' />
                        <ColumnFrom Name='active.agreements' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='active.agreements' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='active.agreements' />
                          <ColumnFrom Name='active.agreements.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='active.documents.deltaValue'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='active.documents.previous' />
                        <ColumnFrom Name='active.documents' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='active.documents' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='active.documents' />
                          <ColumnFrom Name='active.documents.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>

                <Column Type='Integer' Name='active.tps.deltaValue'>
                <If>
                  <Condition Operator='GT'>
                        <ColumnFrom Name='active.tps.previous' />
                        <ColumnFrom Name='active.tps' />
                  </Condition>
                  <Then>
                <!-- Server was restarted, just use completed -->
                        <ColumnFrom Name='active.tps' />
                  </Then>
                  <Else>
                        <Expression Operator='Minus'>
                          <ColumnFrom Name='active.tps' />
                          <ColumnFrom Name='active.tps.previous' />
                        </Expression>
                  </Else>
                </If>
                <Default>0</Default>
                </Column>
        </Select>

  </Table>

<!-- ////////////////////////////////////////////////////////////// -->


<!--         Workflow Metrics BEGIN                                      -->


<!-- ////////////////////////////////////////////////////////////// -->


<!-- Workflow components BEGIN -->

  <Table Name='WorkflowRequestBreakdown_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='Parent' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='count.count' />
    <ColumnDef Type='Integer' Name='request.active' />
    <ColumnDef Type='Integer' Name='request.completed' />
    <ColumnDef Type='Double' Name='request.totalTime' />
    <ColumnDef Type='Double' Name='request.averageTime' />
    <Select Name='WorkflowRequestBreakdown_rollup_no_rate_result'>
      <TableFrom Name='soainfra_wfRequest' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='Parent' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='count.count'>
        <Aggregation Operator='Sum' Name='count.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='request.active'>
        <Aggregation Operator='Sum' Name='time.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='request.completed'>
        <Aggregation Operator='Sum' Name='time.completed' />
        <Default>0</Default>
      </Column>

<!-- the amount of time spent processing requests since startup (milliseconds) -->

      <Column Type='Double' Name='request.totalTime'>
        <Expression Operator='Div'>
          <Aggregation Operator='Sum' Name='time.time' />
          <Value>1000</Value>
        </Expression>
        <Default>0</Default>
      </Column>

<!-- Average Request Processing time since startup -->

      <Column Type='Double' Name='request.averageTime'>
        <Expression Operator='Div'>
          <Expression Operator='Div'>
            <Aggregation Operator='Sum' Name='time.time' />
            <Value>1000</Value>
          </Expression>
          <Aggregation Operator='Sum' Name='time.completed' />
        </Expression>
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
      <GroupBy Name='Parent' />

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>
  <Table Name='WorkflowRequestBreakdown_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='Parent' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='count.throughput' />
    <ColumnDef Type='Integer' Name='request.active' />
    <ColumnDef Type='Integer' Name='request.completed' />
    <ColumnDef Type='Double' Name='request.totalTime' />
    <ColumnDef Type='Double' Name='request.averageTime' />
    <ColumnDef Type='Double' Name='request.throughput' />
    <ColumnDef Type='Double' Name='request.time' />
    <ColumnDef Type='Integer' Name='count.count' />
    <Select Name='WorkflowRequestBreakdown_rollup_result'>
      <TableFrom Name='oracle_soainfra:WorkflowRequestBreakdown_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='Parent' />
      <Column Type='String' Name='ServerName' />

<!-- Calculate the count throughput for the last 5 mins -->

      <Column Type='Double' Name='count.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='count.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='request.active' />
      <Column Type='Integer' Name='request.completed' />
      <Column Type='Double' Name='request.totalTime' />
      <Column Type='Double' Name='request.averageTime' />
      <Column Type='Double' Name='request.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='request.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- Average Request Processing time in the last 5 mins -->

      <Column Type='Double' Name='request.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='request.totalTime' />
          <ColumnFrom Name='request.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
    <Column Type='Integer' Name='count.count' />
    </Select>
  </Table>
<!-- table end -->

  <Table Name='soainfra_message_processing_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='activeRequests.count' />
    <ColumnDef Type='Integer' Name='activeRequests.value' />
    <ColumnDef Type='Double' Name='faultRequestProcessingTime.averageTime' />
    <ColumnDef Type='Integer' Name='faultRequestProcessingTime.completed' />
    <ColumnDef Type='Double' Name='faultRequestProcessingTime.time' />
    <ColumnDef Type='Double' Name='faultRequestProcessingTime.totalTime' />
    <ColumnDef Type='Double' Name='postProcessingTime.averageTime' />
    <ColumnDef Type='Integer' Name='postProcessingTime.completed' />
    <ColumnDef Type='Double' Name='postProcessingTime.time' />
    <ColumnDef Type='Double' Name='postProcessingTime.totalTime' />
    <ColumnDef Type='Double' Name='requestProcessingTime.averageTime' />
    <ColumnDef Type='Integer' Name='requestProcessingTime.completed' />
    <ColumnDef Type='Double' Name='requestProcessingTime.time' />
    <ColumnDef Type='Double' Name='requestProcessingTime.totalTime' />
    <Select Name='soainfra_message_processing_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_message_processing' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='activeRequests.count'>
        <Aggregation Operator='Sum' Name='activeRequests.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='activeRequests.value'>
        <Aggregation Operator='Sum' Name='activeRequests.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='faultRequestProcessingTime.completed'>
        <Aggregation Operator='Sum' Name='faultRequestProcessingTime.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='faultRequestProcessingTime.time'>
        <Aggregation Operator='Sum' Name='faultRequestProcessingTime.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='postProcessingTime.completed'>
        <Aggregation Operator='Sum' Name='postProcessingTime.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='postProcessingTime.time'>
        <Aggregation Operator='Sum' Name='postProcessingTime.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='requestProcessingTime.completed'>
        <Aggregation Operator='Sum' Name='requestProcessingTime.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='requestProcessingTime.time'>
        <Aggregation Operator='Sum' Name='requestProcessingTime.time' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='ServerName' />
      <GroupBy Name='Name' />
    </Select>
    <Select Name='soainfra_message_processing_rollup_no_rate_result'>
      <TableFrom Name='soainfra_message_processing_rollup_no_rate_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='activeRequests.count' />
      <Column Type='Integer' Name='activeRequests.value' />
      <Column Type='Double' Name='faultRequestProcessingTime.averageTime'>
        <Expression Operator='Div'>

            <ColumnFrom Name='faultRequestProcessingTime.time' />

          <ColumnFrom Name='faultRequestProcessingTime.completed' />
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='faultRequestProcessingTime.completed' />
      <Column Type='Double' Name='faultRequestProcessingTime.time' />
      <Column Type='Double' Name='faultRequestProcessingTime.totalTime'>

          <ColumnFrom Name='faultRequestProcessingTime.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='postProcessingTime.averageTime'>
        <Expression Operator='Div'>

            <ColumnFrom Name='postProcessingTime.time' />
          <ColumnFrom Name='postProcessingTime.completed' />
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='postProcessingTime.completed' />
      <Column Type='Double' Name='postProcessingTime.time' />
      <Column Type='Double' Name='postProcessingTime.totalTime'>

          <ColumnFrom Name='postProcessingTime.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='requestProcessingTime.averageTime'>
        <Expression Operator='Div'>

            <ColumnFrom Name='requestProcessingTime.time' />
          <ColumnFrom Name='requestProcessingTime.completed' />
        </Expression>
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='requestProcessingTime.completed' />
      <Column Type='Double' Name='requestProcessingTime.time' />
      <Column Type='Double' Name='requestProcessingTime.totalTime'>

          <ColumnFrom Name='requestProcessingTime.time' />

        <Default>0</Default>
      </Column>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- soainfra_message_processing_rollup with rate -->

  <Table Name='soainfra_message_processing_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='activeRequests.throughput' />
    <ColumnDef Type='Integer' Name='activeRequests.value' />
    <ColumnDef Type='Integer' Name='activeRequests.count' />
    <ColumnDef Type='Double' Name='fault.time' />
    <ColumnDef Type='Double' Name='fault.throughput' />
    <ColumnDef Type='Double' Name='post.time' />
    <ColumnDef Type='Double' Name='post.throughput' />
    <ColumnDef Type='Double' Name='request.time' />
    <ColumnDef Type='Double' Name='request.throughput' />
    <ColumnDef Type='Integer' Name='fault.count'/>
    <ColumnDef Type='Double' Name='postProcessingTime.averageTime' />
    <ColumnDef Type='Double' Name='requestProcessingTime.averageTime' />
    <ColumnDef Type='Integer' Name='post.count' />
    <ColumnDef Type='Integer' Name='request.count' />
    <ColumnDef Type='Integer' Name='message.count' />

    <Select Name='soainfra_message_processing_rollup_no_rate_result'>
      <TableFrom Name='oracle_soainfra:soainfra_message_processing_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='activeRequests.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='activeRequests.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='activeRequests.count' />
      <Column Type='Integer' Name='activeRequests.value' />
      <Column Type='Double' Name='fault.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='faultRequestProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- Average Faulted Request Processing time in the last 5 mins -->

      <Column Type='Double' Name='fault.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='faultRequestProcessingTime.totalTime' />
          <ColumnFrom Name='faultRequestProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='post.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='postProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- Average Post Request Processing time in the last 5 mins -->

      <Column Type='Double' Name='post.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='postProcessingTime.totalTime' />
          <ColumnFrom Name='postProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='request.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='requestProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- Average Request Processing time in the last 5 mins -->

      <Column Type='Double' Name='request.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='requestProcessingTime.totalTime' />
          <ColumnFrom Name='requestProcessingTime.completed' />
          <Default>0</Default>
        </Rate>
      </Column>


    <Column Type='Integer' Name='fault.count'>
        <ColumnFrom Name='faultRequestProcessingTime.completed' />
    </Column>
    <Column Type='Double' Name='postProcessingTime.averageTime' />
    <Column Type='Double' Name='requestProcessingTime.averageTime' />
    <Column Type='Integer' Name='post.count' >
        <ColumnFrom Name='postProcessingTime.completed' />
    </Column>
    <Column Type='Integer' Name='request.count' >
        <ColumnFrom Name='requestProcessingTime.completed' />
    </Column>
    <Column Type='Integer' Name='message.count' >
       <Expression Operator='Plus'>
          <ColumnFrom Name='postProcessingTime.completed' />
          <ColumnFrom Name='requestProcessingTime.completed' />
          <Default>0</Default>
        </Expression>
        <Default>0</Default>
     </Column>

      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>

<!-- ////////////////////////////////////////////////////////////// -->


<!--         BRSE Metrics BEGIN                                      -->


<!-- ////////////////////////////////////////////////////////////// -->


<!-- BRSE BEGIN -->

  <Table Name='BRSECache_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='accessCount.count' />
    <ColumnDef Type='Double' Name='accessCount.value' />
    <ColumnDef Type='Integer' Name='totalCount.count' />
    <ColumnDef Type='Double' Name='totalCount.value' />
    <Select Name='BRSECache_rollup_no_rate_result'>
      <TableFrom Name='soainfra_brCache' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='accessCount.count'>
        <Aggregation Operator='Sum' Name='accessCount.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='accessCount.value'>
        <Aggregation Operator='Sum' Name='accessCount.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='totalCount.count'>
        <Aggregation Operator='Sum' Name='totalCount.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='totalCount.value'>
        <Aggregation Operator='Sum' Name='totalCount.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

  <Table Name='BRSERequest_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='count.count' />
    <ColumnDef Type='Double' Name='count.value' />
    <ColumnDef Type='Double' Name='time.completed' />
    <ColumnDef Type='Double' Name='time.totalTime' />
    <ColumnDef Type='Double' Name='time.averageTime' />
    <Select Name='BRSERequest_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_brRequest' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='count.count'>
        <Aggregation Operator='Sum' Name='count.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='count.value'>
        <Aggregation Operator='Sum' Name='count.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='time.completed'>
        <Aggregation Operator='Sum' Name='time.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='time.time'>
        <Aggregation Operator='Sum' Name='time.time' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>
    <Select Name='BRSERequest_rollup_no_rate_result'>
      <TableFrom Name='BRSERequest_rollup_no_rate_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='count.count' />
      <Column Type='Double' Name='count.value' />
      <Column Type='Double' Name='time.completed' />

<!-- the amount of time spent processing requests since startup (milliseconds) -->

      <Column Type='Double' Name='time.totalTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='time.time' />
          <Value>1000</Value>
        </Expression>
        <Default>0</Default>
      </Column>

<!-- Average Request Processing time since startup -->

      <Column Type='Double' Name='time.averageTime'>
        <Expression Operator='Div'>
          <Expression Operator='Div'>
            <ColumnFrom Name='time.time' />
            <Value>1000</Value>
          </Expression>
          <ColumnFrom Name='time.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- rate the above table -->

  <Table Name='BRSERequest_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='count.count' />
    <ColumnDef Type='Double' Name='count.throughput' />
    <ColumnDef Type='Double' Name='count.value' />
    <ColumnDef Type='Double' Name='time.completed' />
    <ColumnDef Type='Double' Name='time.throughput' />
    <ColumnDef Type='Double' Name='time.time' />
    <ColumnDef Type='Double' Name='time.averageTime' />
    <Select Name='BRSERequest_rollup_no_rate_result'>
      <TableFrom Name='oracle_soainfra:BRSERequest_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='count.count' />
      <Column Type='Double' Name='count.value' />
      <Column Type='Double' Name='count.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='count.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='time.completed' />
      <Column Type='Double' Name='time.averageTime' />
      <Column Type='Double' Name='time.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='time.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- Average Request Processing time in the last 5 mins -->

      <Column Type='Double' Name='time.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='time.totalTime' />
          <ColumnFrom Name='time.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
    </Select>
  </Table>
<!-- BRSERequest_rollup end -->


<!-- BPEL metrics begin -->

  <Table Name='bpel_active_scheduled_requests_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='active.count' />
    <ColumnDef Type='Integer' Name='active.value' />
    <ColumnDef Type='Integer' Name='scheduled.count' />
    <ColumnDef Type='Integer' Name='scheduled.value' />
    <Select Name='bpel_active_scheduled_requests_rollup_no_rate_result'>
      <TableFrom Name='soainfra_cube_engine_dispatcher_queue_stats' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.count'>
        <Aggregation Operator='Sum' Name='active.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='active.value'>
        <Aggregation Operator='Sum' Name='active.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='scheduled.count'>
        <Aggregation Operator='Sum' Name='scheduled.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='scheduled.value'>
        <Aggregation Operator='Sum' Name='scheduled.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>

    <Select Name='bpel_active_scheduled_requests_rollup_no_rate_result_1'>
      <TableFrom Name='bpel_active_scheduled_requests_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.count'/>
      <Column Type='Integer' Name='active.value'/>
      <Column Type='Integer' Name='scheduled.count'/>
      <Column Type='Integer' Name='scheduled.value'/>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- the rate table -->

  <Table Name='bpel_active_scheduled_requests_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='active.throughput' />
    <ColumnDef Type='Integer' Name='active.value' />
    <ColumnDef Type='Double' Name='scheduled.throughput' />
    <ColumnDef Type='Integer' Name='scheduled.value' />
    <Select Name='bpel_active_scheduled_requests_rollup_result'>
      <TableFrom Name='oracle_soainfra:bpel_active_scheduled_requests_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='active.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='active.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='active.value' />
      <Column Type='Double' Name='scheduled.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='scheduled.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='scheduled.value' />
      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>

<!-- TODO: this table completely and below as well -->

  <!--Table Name='soainfra_bpel_dispatcher_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='avgMessageTotal.count' />
    <ColumnDef Type='Integer' Name='avgMessageTotal.value' />
    <ColumnDef Type='Integer' Name='avgThreadAllocTime.count' />
    <ColumnDef Type='Double' Name='avgThreadAllocTime.value' />
    <ColumnDef Type='Integer' Name='avgThreadLifeTime.count' />
    <ColumnDef Type='Double' Name='avgThreadLifeTime.value' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Integer' Name='maxThreads.value' />
    <ColumnDef Type='Integer' Name='minThreads.count' />
    <ColumnDef Type='Integer' Name='minThreads.value' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <ColumnDef Type='Integer' Name='threadCount.value' />
    <ColumnDef Type='Integer' Name='threadHigh.count' />
    <ColumnDef Type='Integer' Name='threadHigh.value' />
    <ColumnDef Type='Integer' Name='threadPending.count' />
    <ColumnDef Type='Integer' Name='threadPending.value' />
    <ColumnDef Type='Integer' Name='threadTotal.count' />
    <ColumnDef Type='Integer' Name='threadTotal.value' />
    <Select Name='soainfra_bpel_dispatcher_rollup_no_rate_result'>
      <TableFrom Name='soainfra_bpel_dispatcher' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='avgMessageTotal.count'>
        <Aggregation Operator='Sum' Name='avgMessageTotal.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='avgMessageTotal.value'>
        <Aggregation Operator='Sum' Name='avgMessageTotal.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='avgThreadAllocTime.count'>
        <Aggregation Operator='Sum' Name='avgThreadAllocTime.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='avgThreadAllocTime.value'>
        <Aggregation Operator='Sum' Name='avgThreadAllocTime.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='avgThreadLifeTime.count'>
        <Aggregation Operator='Sum' Name='avgThreadLifeTime.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='avgThreadLifeTime.value'>
        <Aggregation Operator='Sum' Name='avgThreadLifeTime.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='maxThreads.count'>
        <Aggregation Operator='Sum' Name='maxThreads.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='maxThreads.value'>
        <Aggregation Operator='Sum' Name='maxThreads.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='minThreads.count'>
        <Aggregation Operator='Sum' Name='minThreads.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='minThreads.value'>
        <Aggregation Operator='Sum' Name='minThreads.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadCount.count'>
        <Aggregation Operator='Sum' Name='threadCount.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadCount.value'>
        <Aggregation Operator='Sum' Name='threadCount.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadHigh.count'>
        <Aggregation Operator='Sum' Name='threadHigh.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadHigh.value'>
        <Aggregation Operator='Sum' Name='threadHigh.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadPending.count'>
        <Aggregation Operator='Sum' Name='threadPending.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadPending.value'>
        <Aggregation Operator='Sum' Name='threadPending.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadTotal.count'>
        <Aggregation Operator='Sum' Name='threadTotal.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='threadTotal.value'>
        <Aggregation Operator='Sum' Name='threadTotal.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>

    <Select Name='soainfra_bpel_dispatcher_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_bpel_dispatcher_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='avgMessageTotal.count'/>
      <Column Type='Integer' Name='avgMessageTotal.value'/>
      <Column Type='Integer' Name='avgThreadAllocTime.count'/>
      <Column Type='Double' Name='avgThreadAllocTime.value'/>
      <Column Type='Integer' Name='avgThreadLifeTime.count'/>
      <Column Type='Double' Name='avgThreadLifeTime.value'/>
      <Column Type='Integer' Name='maxThreads.count'/>
      <Column Type='Integer' Name='maxThreads.value'/>
      <Column Type='Integer' Name='minThreads.count'/>
      <Column Type='Integer' Name='minThreads.value'/>
      <Column Type='Integer' Name='threadCount.count'/>
      <Column Type='Integer' Name='threadCount.value'/>
      <Column Type='Integer' Name='threadHigh.count'/>
      <Column Type='Integer' Name='threadHigh.value'/>
      <Column Type='Integer' Name='threadPending.count'/>
      <Column Type='Integer' Name='threadPending.value'/>
      <Column Type='Integer' Name='threadTotal.count'/>
      <Column Type='Integer' Name='threadTotal.value'/>
      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table-->

  <Table Name='soainfra_bpel_dispatcher_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <Select Name='soainfra_bpel_dispatcher_rollup_no_rate_result'>
      <TableFrom Name='soainfra_message_processing' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <!--Column Type='String' Name='ServerName'>
        <ColumnFrom Name='Host' />
      </Column-->
      <Column Type='String' Name='maxThreads.count'>
        <ColumnFrom Name='activeRequests.maxValue' />
      </Column>
      <Column Type='String' Name='threadCount.count'>
        <ColumnFrom Name='activeRequests.value' />
      </Column>
    </Select>
    <Select Name='soainfra_bpel_dispatcher_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_bpel_dispatcher_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='maxThreads.count'/>
      <Column Type='Integer' Name='threadCount.count'/>
      <Where>
        <Condition Operator='EQ' Type='String'>
          <ColumnFrom Name='Name' />
          <Value>bpel</Value>
        </Condition>
      </Where>
    </Select>
  </Table>

  <!--Table Name='soainfra_bpel_dispatcher_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='avgMessageTotal.count' />
    <ColumnDef Type='Double' Name='avgMessageTotal.throughput' />
    <ColumnDef Type='Integer' Name='avgMessageTotal.value' />
    <ColumnDef Type='Integer' Name='avgThreadAllocTime.count' />
    <ColumnDef Type='Double' Name='avgThreadAllocTime.throughput' />
    <ColumnDef Type='Double' Name='avgThreadAllocTime.value' />
    <ColumnDef Type='Integer' Name='avgThreadLifeTime.count' />
    <ColumnDef Type='Double' Name='avgThreadLifeTime.throughput' />
    <ColumnDef Type='Double' Name='avgThreadLifeTime.value' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Double' Name='maxThreads.throughput' />
    <ColumnDef Type='Integer' Name='maxThreads.value' />
    <ColumnDef Type='Integer' Name='minThreads.count' />
    <ColumnDef Type='Double' Name='minThreads.throughput' />
    <ColumnDef Type='Integer' Name='minThreads.value' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <ColumnDef Type='Double' Name='threadCount.throughput' />
    <ColumnDef Type='Integer' Name='threadCount.value' />
    <ColumnDef Type='Integer' Name='threadHigh.count' />
    <ColumnDef Type='Double' Name='threadHigh.throughput' />
    <ColumnDef Type='Integer' Name='threadHigh.value' />
    <ColumnDef Type='Integer' Name='threadPending.count' />
    <ColumnDef Type='Double' Name='threadPending.throughput' />
    <ColumnDef Type='Integer' Name='threadPending.value' />
    <ColumnDef Type='Integer' Name='threadTotal.count' />
    <ColumnDef Type='Double' Name='threadTotal.throughput' />
    <ColumnDef Type='Integer' Name='threadTotal.value' />
    <Select Name='soainfra_bpel_dispatcher_rollup_result'>
      <TableFrom Name='oracle_soainfra:soainfra_bpel_dispatcher_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='avgMessageTotal.count' />
      <Column Type='Double' Name='avgMessageTotal.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='avgMessageTotal.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='avgMessageTotal.value' />
      <Column Type='Integer' Name='avgThreadAllocTime.count' />
      <Column Type='Double' Name='avgThreadAllocTime.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='avgThreadAllocTime.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='avgThreadAllocTime.value' />
      <Column Type='Integer' Name='avgThreadLifeTime.count' />
      <Column Type='Double' Name='avgThreadLifeTime.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='avgThreadLifeTime.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='avgThreadLifeTime.value' />
      <Column Type='Integer' Name='maxThreads.count' />
      <Column Type='Double' Name='maxThreads.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='maxThreads.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='maxThreads.value' />
      <Column Type='Integer' Name='minThreads.count' />
      <Column Type='Double' Name='minThreads.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='minThreads.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='minThreads.value' />
      <Column Type='Integer' Name='threadCount.count' />
      <Column Type='Double' Name='threadCount.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadCount.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='threadCount.value' />
      <Column Type='Integer' Name='threadHigh.count' />
      <Column Type='Double' Name='threadHigh.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadHigh.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='threadHigh.value' />
      <Column Type='Integer' Name='threadPending.count' />
      <Column Type='Double' Name='threadPending.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadPending.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='threadPending.value' />
      <Column Type='Integer' Name='threadTotal.count' />
      <Column Type='Double' Name='threadTotal.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadTotal.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='threadTotal.value' />
    </Select>
  </Table-->
  <Table Name='soainfra_bpel_dispatcher_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <ColumnDef Type='Double' Name='threadCount.throughput' />
    <Select Name='soainfra_bpel_dispatcher_rollup_result'>
      <TableFrom Name='oracle_soainfra:soainfra_bpel_dispatcher_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='maxThreads.count' />
      <Column Type='Integer' Name='threadCount.count' />
      <Column Type='Double' Name='threadCount.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadCount.count' />
          <Default>0</Default>
        </Rate>
      </Column>
    </Select>
  </Table>
<!-- rate table end -->

<!-- BPMN metrics begin -->

  <Table Name='bpmn_active_scheduled_requests_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='active.count' />
    <ColumnDef Type='Integer' Name='active.value' />
    <ColumnDef Type='Integer' Name='scheduled.count' />
    <ColumnDef Type='Integer' Name='scheduled.value' />
    <Select Name='bpmn_active_scheduled_requests_rollup_no_rate_result'>
      <TableFrom Name='soainfra_bpmn_requests' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.count'>
        <Aggregation Operator='Sum' Name='active.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='active.value'>
        <Aggregation Operator='Sum' Name='active.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='scheduled.count'>
        <Aggregation Operator='Sum' Name='scheduled.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='scheduled.value'>
        <Aggregation Operator='Sum' Name='scheduled.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>

    <Select Name='bpmn_active_scheduled_requests_rollup_no_rate_result_1'>
      <TableFrom Name='bpmn_active_scheduled_requests_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='active.count'/>
      <Column Type='Integer' Name='active.value'/>
      <Column Type='Integer' Name='scheduled.count'/>
      <Column Type='Integer' Name='scheduled.value'/>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- the rate table -->

  <Table Name='bpmn_active_scheduled_requests_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='active.throughput' />
    <ColumnDef Type='Integer' Name='active.value' />
    <ColumnDef Type='Double' Name='scheduled.throughput' />
    <ColumnDef Type='Integer' Name='scheduled.value' />
    <Select Name='bpmn_active_scheduled_requests_rollup_result'>
      <TableFrom Name='oracle_soainfra:bpmn_active_scheduled_requests_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='active.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='active.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='active.value' />
      <Column Type='Double' Name='scheduled.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='scheduled.count' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='scheduled.value' />
      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>

  <Table Name='soainfra_bpmn_dispatcher_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <Select Name='soainfra_bpmn_dispatcher_rollup_no_rate_result'>
      <TableFrom Name='soainfra_message_processing' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <!--Column Type='String' Name='ServerName'>
        <ColumnFrom Name='Host' />
      </Column-->
      <Column Type='String' Name='maxThreads.count'>
        <ColumnFrom Name='activeRequests.maxValue' />
      </Column>
      <Column Type='String' Name='threadCount.count'>
        <ColumnFrom Name='activeRequests.value' />
      </Column>
    </Select>
    <Select Name='soainfra_bpmn_dispatcher_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_bpmn_dispatcher_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='maxThreads.count'/>
      <Column Type='Integer' Name='threadCount.count'/>
      <Where>
        <Condition Operator='EQ' Type='String'>
          <ColumnFrom Name='Name' />
          <Value>bpmn</Value>
        </Condition>
      </Where>
    </Select>
  </Table>

  <Table Name='soainfra_bpmn_dispatcher_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='maxThreads.count' />
    <ColumnDef Type='Integer' Name='threadCount.count' />
    <ColumnDef Type='Double' Name='threadCount.throughput' />
    <Select Name='soainfra_bpmn_dispatcher_rollup_result'>
      <TableFrom Name='oracle_soainfra:soainfra_bpmn_dispatcher_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='maxThreads.count' />
      <Column Type='Integer' Name='threadCount.count' />
      <Column Type='Double' Name='threadCount.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='threadCount.count' />
          <Default>0</Default>
        </Rate>
      </Column>
    </Select>
  </Table>
<!-- rate table end -->

<!-- Mediator Engine metrics start-->
  <Table Name='soainfra_mediatorCache_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='metadataCache.value' />
    <ColumnDef Type='Double' Name='transform.value' />
    <Select Name='soainfra_mediatorCache_rollup_no_rate_result'>
      <TableFrom Name='soainfra_mediatorCache' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='metadataCache.value'>
        <Aggregation Operator='Sum' Name='metadataCache.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='transform.value'>
        <Aggregation Operator='Sum' Name='transform.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>

    <Select Name='soainfra_mediatorCache_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_mediatorCache_rollup_no_rate_result' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='metadataCache.value'/>
      <Column Type='Double' Name='transform.value'/>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>
  <Table Name='soainfra_mediatorRequest_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='callbackRequests-State.value' />
    <ColumnDef Type='Double' Name='delayedRequests-State.value' />
    <ColumnDef Type='Double' Name='dequeuedRequests-State.value' />
    <ColumnDef Type='Double' Name='timeoutRequests-State.value' />
    <Select Name='soainfra_mediatorRequest_rollup_no_rate_result'>
      <TableFrom Name='soainfra_mediatorRequest' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='callbackRequests-State.value'>
        <Aggregation Operator='Sum' Name='callbackRequests-State.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='delayedRequests-State.value'>
        <Aggregation Operator='Sum' Name='delayedRequests-State.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='dequeuedRequests-State.value'>
        <Aggregation Operator='Sum' Name='dequeuedRequests-State.value' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='timeoutRequests-State.value'>
        <Aggregation Operator='Sum' Name='timeoutRequests-State.value' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>
  <Table Name='soainfra_mediatorRequestBreakdown_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.active' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.averageTime' />
    <ColumnDef Type='Integer' Name='invokeOneway-phase.completed' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.totalTime' />
    <ColumnDef Type='Double' Name='transformation-phase.active' />
    <ColumnDef Type='Double' Name='transformation-phase.averageTime' />
    <ColumnDef Type='Integer' Name='transformation-phase.completed' />
    <ColumnDef Type='Double' Name='transformation-phase.totalTime' />
    <ColumnDef Type='Double' Name='publish-phase.active' />
    <ColumnDef Type='Double' Name='publish-phase.averageTime' />
    <ColumnDef Type='Integer' Name='publish-phase.completed' />
    <ColumnDef Type='Double' Name='publish-phase.totalTime' />
    <ColumnDef Type='Double' Name='enqueue-phase.active' />
    <ColumnDef Type='Double' Name='enqueue-phase.averageTime' />
    <ColumnDef Type='Integer' Name='enqueue-phase.completed' />
    <ColumnDef Type='Double' Name='enqueue-phase.totalTime' />
    <ColumnDef Type='Double' Name='invoke-phase.active' />
    <ColumnDef Type='Double' Name='invoke-phase.averageTime' />
    <ColumnDef Type='Integer' Name='invoke-phase.completed' />
    <ColumnDef Type='Double' Name='invoke-phase.totalTime' />
    <Select Name='soainfra_mediatorRequestBreakdown_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_mediatorRequestBreakdown' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />

      <Column Type='Double' Name='invokeOneway-phase.active'>
        <Aggregation Operator='Sum' Name='invokeOneway-phase.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='invokeOneway-phase.time'>
        <Aggregation Operator='Sum' Name='invokeOneway-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='invokeOneway-phase.completed'>
        <Aggregation Operator='Sum' Name='invokeOneway-phase.completed' />
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='transformation-phase.active'>
        <Aggregation Operator='Sum' Name='transformation-phase.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='transformation-phase.time'>
        <Aggregation Operator='Sum' Name='transformation-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='transformation-phase.completed'>
        <Aggregation Operator='Sum' Name='transformation-phase.completed' />
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='publish-phase.active'>
        <Aggregation Operator='Sum' Name='publish-phase.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='publish-phase.time'>
        <Aggregation Operator='Sum' Name='publish-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='publish-phase.completed'>
        <Aggregation Operator='Sum' Name='publish-phase.completed' />
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='enqueue-phase.active'>
        <Aggregation Operator='Sum' Name='enqueue-phase.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='enqueue-phase.time'>
        <Aggregation Operator='Sum' Name='enqueue-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='enqueue-phase.completed'>
        <Aggregation Operator='Sum' Name='enqueue-phase.completed' />
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='invoke-phase.active'>
        <Aggregation Operator='Sum' Name='invoke-phase.active' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='invoke-phase.time'>
        <Aggregation Operator='Sum' Name='invoke-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='invoke-phase.completed'>
        <Aggregation Operator='Sum' Name='invoke-phase.completed' />
        <Default>0</Default>
      </Column>

      <GroupBy Name='Name' />
      <GroupBy Name='ServerName' />
    </Select>
    <Select Name='soainfra_mediatorRequestBreakdown_rollup_no_rate_result_2'>
      <TableFrom Name='soainfra_mediatorRequestBreakdown_rollup_no_rate_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />

      <Column Type='Double' Name='invokeOneway-phase.active' />
      <Column Type='Integer' Name='invokeOneway-phase.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->
      <Column Type='Double' Name='invokeOneway-phase.totalTime'>
        <ColumnFrom Name='invokeOneway-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='invokeOneway-phase.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='invokeOneway-phase.time' />
          <ColumnFrom Name='invokeOneway-phase.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='transformation-phase.active' />
      <Column Type='Integer' Name='transformation-phase.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->

      <Column Type='Double' Name='transformation-phase.totalTime'>
        <ColumnFrom Name='transformation-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='transformation-phase.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='transformation-phase.time' />
          <ColumnFrom Name='transformation-phase.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='publish-phase.active' />
      <Column Type='Integer' Name='publish-phase.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->

      <Column Type='Double' Name='publish-phase.totalTime'>
        <ColumnFrom Name='publish-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='publish-phase.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='publish-phase.time' />
          <ColumnFrom Name='publish-phase.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='enqueue-phase.active' />
      <Column Type='Integer' Name='enqueue-phase.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->

      <Column Type='Double' Name='enqueue-phase.totalTime'>
        <ColumnFrom Name='enqueue-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='enqueue-phase.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='enqueue-phase.time' />
          <ColumnFrom Name='enqueue-phase.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

      <Column Type='Double' Name='invoke-phase.active' />
      <Column Type='Integer' Name='invoke-phase.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->

      <Column Type='Double' Name='invoke-phase.totalTime'>
        <ColumnFrom Name='invoke-phase.time' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='invoke-phase.averageTime'>
        <Expression Operator='Div'>
          <ColumnFrom Name='invoke-phase.time' />
          <ColumnFrom Name='invoke-phase.completed' />
        </Expression>
        <Default>0</Default>
      </Column>
    </Select>

    <Select Name='soainfra_mediatorRequestBreakdown_rollup_no_rate_result'>
      <TableFrom Name='soainfra_mediatorRequestBreakdown_rollup_no_rate_result_2' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='invokeOneway-phase.active' />
      <Column Type='Integer' Name='invokeOneway-phase.completed' />
      <Column Type='Double' Name='invokeOneway-phase.totalTime'/>
      <Column Type='Double' Name='invokeOneway-phase.averageTime'/>
      <Column Type='Double' Name='transformation-phase.active' />
      <Column Type='Integer' Name='transformation-phase.completed' />
      <Column Type='Double' Name='transformation-phase.totalTime'/>
      <Column Type='Double' Name='transformation-phase.averageTime'/>
      <Column Type='Double' Name='publish-phase.active' />
      <Column Type='Integer' Name='publish-phase.completed' />
      <Column Type='Double' Name='publish-phase.totalTime'/>
      <Column Type='Double' Name='publish-phase.averageTime'/>
      <Column Type='Double' Name='enqueue-phase.active' />
      <Column Type='Integer' Name='enqueue-phase.completed' />
      <Column Type='Double' Name='enqueue-phase.totalTime'/>
      <Column Type='Double' Name='enqueue-phase.averageTime'/>
      <Column Type='Double' Name='invoke-phase.active' />
      <Column Type='Integer' Name='invoke-phase.completed' />
      <Column Type='Double' Name='invoke-phase.totalTime'/>
      <Column Type='Double' Name='invoke-phase.averageTime'/>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
     </Select>
  </Table>

  <Table Name='soainfra_mediatorRequestBreakdown_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />

    <ColumnDef Type='Double' Name='invokeOneway-phase.active' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.averageTime' />
    <ColumnDef Type='Integer' Name='invokeOneway-phase.completed' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.totalTime' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.throughput' />
    <ColumnDef Type='Double' Name='invokeOneway-phase.time' />

    <ColumnDef Type='Double' Name='transformation-phase.active' />
    <ColumnDef Type='Double' Name='transformation-phase.averageTime' />
    <ColumnDef Type='Integer' Name='transformation-phase.completed' />
    <ColumnDef Type='Double' Name='transformation-phase.totalTime' />
    <ColumnDef Type='Double' Name='transformation-phase.throughput' />
    <ColumnDef Type='Double' Name='transformation-phase.time' />

    <ColumnDef Type='Double' Name='publish-phase.active' />
    <ColumnDef Type='Double' Name='publish-phase.averageTime' />
    <ColumnDef Type='Integer' Name='publish-phase.completed' />
    <ColumnDef Type='Double' Name='publish-phase.totalTime' />
    <ColumnDef Type='Double' Name='publish-phase.throughput' />
    <ColumnDef Type='Double' Name='publish-phase.time' />

    <ColumnDef Type='Double' Name='enqueue-phase.active' />
    <ColumnDef Type='Double' Name='enqueue-phase.averageTime' />
    <ColumnDef Type='Integer' Name='enqueue-phase.completed' />
    <ColumnDef Type='Double' Name='enqueue-phase.totalTime' />
    <ColumnDef Type='Double' Name='enqueue-phase.throughput' />
    <ColumnDef Type='Double' Name='enqueue-phase.time' />

    <ColumnDef Type='Double' Name='invoke-phase.active' />
    <ColumnDef Type='Double' Name='invoke-phase.averageTime' />
    <ColumnDef Type='Integer' Name='invoke-phase.completed' />
    <ColumnDef Type='Double' Name='invoke-phase.totalTime' />
    <ColumnDef Type='Double' Name='invoke-phase.throughput' />
    <ColumnDef Type='Double' Name='invoke-phase.time' />

    <Select Name='soainfra_mediatorRequestBreakdown_rollup_result'>
      <TableFrom Name='oracle_soainfra:soainfra_mediatorRequestBreakdown_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />

      <Column Type='Double' Name='invokeOneway-phase.active' />
      <Column Type='Double' Name='invokeOneway-phase.totalTime' />
      <Column Type='Double' Name='invokeOneway-phase.averageTime' />
      <Column Type='Integer' Name='invokeOneway-phase.completed' />
      <Column Type='Double' Name='invokeOneway-phase.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='invokeOneway-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='invokeOneway-phase.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='invokeOneway-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

      <Column Type='Double' Name='transformation-phase.active' />
      <Column Type='Double' Name='transformation-phase.totalTime' />
      <Column Type='Double' Name='transformation-phase.averageTime' />
      <Column Type='Integer' Name='transformation-phase.completed' />
      <Column Type='Double' Name='transformation-phase.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='transformation-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='transformation-phase.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='transformation-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

      <Column Type='Double' Name='publish-phase.active' />
      <Column Type='Double' Name='publish-phase.totalTime' />
      <Column Type='Double' Name='publish-phase.averageTime' />
      <Column Type='Integer' Name='publish-phase.completed' />
      <Column Type='Double' Name='publish-phase.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='publish-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='publish-phase.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='publish-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

      <Column Type='Double' Name='enqueue-phase.active' />
      <Column Type='Double' Name='enqueue-phase.totalTime' />
      <Column Type='Double' Name='enqueue-phase.averageTime' />
      <Column Type='Integer' Name='enqueue-phase.completed' />
      <Column Type='Double' Name='enqueue-phase.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='enqueue-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='enqueue-phase.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='enqueue-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

      <Column Type='Double' Name='invoke-phase.active' />
      <Column Type='Double' Name='invoke-phase.totalTime' />
      <Column Type='Double' Name='invoke-phase.averageTime' />
      <Column Type='Integer' Name='invoke-phase.completed' />
      <Column Type='Double' Name='invoke-phase.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='invoke-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Double' Name='invoke-phase.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='invoke-phase.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>
<!-- rate table end -->


<!-- SOA Infra Home page start -->
  <Table Name='soainfra_aggregatebindings_rollup_no_rate'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='Parent' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='Errors.count' />
        <ColumnDef Type='Integer' Name='Requests.count' />
    <ColumnDef Type='Integer' Name='processRequests.completed' />
    <ColumnDef Type='Double' Name='processRequests.averageTime' />
    <ColumnDef Type='Double' Name='processRequests.totalTime' />
    <Select Name='soainfra_aggregatebindings_rollup_no_rate_result_1'>
      <TableFrom Name='soainfra_AggregateBindings' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='Parent' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Errors.count'>
        <Aggregation Operator='Sum' Name='Errors.count' />
        <Default>0</Default>
      </Column>
           <Column Type='Integer' Name='Requests.count'>
        <Aggregation Operator='Sum' Name='Requests.count' />
        <Default>0</Default>
      </Column>
      <Column Type='Integer' Name='processRequests.completed'>
        <Aggregation Operator='Sum' Name='processRequests.completed' />
        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='processRequests.time'>
        <Aggregation Operator='Sum' Name='processRequests.time' />
        <Default>0</Default>
      </Column>
      <GroupBy Name='Name' />
      <GroupBy Name='Parent' />
      <GroupBy Name='ServerName' />
    </Select>
    <Select Name='soainfra_aggregatebindings_rollup_no_rate_result'>
      <TableFrom Name='soainfra_aggregatebindings_rollup_no_rate_result_1' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='Parent' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='Errors.count' />
          <Column Type='Integer' Name='Requests.count' />
      <Column Type='Integer' Name='processRequests.completed' />

<!-- the amount of time spent processing requests since startup (seconds) -->

      <Column Type='Double' Name='processRequests.totalTime'>

          <ColumnFrom Name='processRequests.time' />

        <Default>0</Default>
      </Column>
      <Column Type='Double' Name='processRequests.averageTime'>
        <Expression Operator='Div'>

            <ColumnFrom Name='processRequests.time' />
          <ColumnFrom Name='processRequests.completed' />
        </Expression>
        <Default>0</Default>
      </Column>

<!-- Only includes rows with data.  If there is no name, don't return the row -->

      <Where>
        <Condition Operator='NE' Type='String'>
          <ColumnFrom Name='Name' />
          <Null />
        </Condition>
      </Where>
    </Select>
  </Table>

<!-- the rate table -->

  <Table Name='soainfra_aggregatebindings_rollup'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='Parent' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Double' Name='processRequests.averageTime' />
    <ColumnDef Type='Integer' Name='Errors.count' />
    <ColumnDef Type='Double' Name='activeRequests.throughput' />
    <ColumnDef Type='Integer' Name='processRequests.completed' />
    <Select Name='soainfra_aggregatebindings_rollup_result'>
      <TableFrom Name='oracle_soainfra:soainfra_aggregatebindings_rollup_no_rate' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='Parent' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Double' Name='processRequests.averageTime' />
      <Column Type='Integer' Name='Errors.count' />

<!-- the number of requests processed per second during the last 5 minutes -->

      <Column Type='Double' Name='activeRequests.throughput'>
        <Rate Interval='300000'>
          <ColumnFrom Name='processRequests.completed' />
          <Default>0</Default>
        </Rate>
      </Column>

<!-- the average amount of time spent processing a request during the last 5 minutes -->

      <Column Type='Double' Name='activeRequests.time'>
        <Rate Interval='300000'>
          <ColumnFrom Name='processRequests.totalTime' />
          <ColumnFrom Name='processRequests.completed' />
          <Default>0</Default>
        </Rate>
      </Column>
      <Column Type='Integer' Name='processRequests.completed' />
      <Where>
        <Or>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name='Name' />
            <Value Name='Name.parameter' />
          </Condition>
          <Condition Operator='EQ' Type='String'>
            <Value xsi:nil='true' Name='Name.parameter' />
            <Null />
          </Condition>
        </Or>
      </Where>
    </Select>
  </Table>

<!--
        <Table Name="total_composite_instances_delta">
                <ColumnDef Type='String' Key='true' Name='ServerName' />
                <ColumnDef Type='String' Key='true' Name='soainfra_domain' />
                <ColumnDef Type='String' Key='true' Name='soainfra_composite' />
                <ColumnDef Type='String' Key='true' Name='soainfra_composite_revision' />
                <ColumnDef Name="InstanceDelta.count" Type="Integer"/>
        <Select Name="total_composite_instances_delta_result_1">
           <TableFrom Name="weblogic_j2eeserver:soainfra_composite_label_delta_rollup"/>
                        <Column Type='String' Name='ServerName' />
                        <Column Type='String' Name='soainfra_domain' />
                        <Column Type='String' Name='soainfra_composite' />
                        <Column Type='String' Name='soainfra_composite_revision' />
                        <Column Name="InstanceDelta.count" Type="Integer">
                           <Expression Operator="Plus">
                                   <Aggregation Operator="Sum" Name="RequestEvents.deltaCount"/>
                                   <Aggregation Operator="Sum" Name="PostEvents.deltaCount"/>
                           </Expression>
                           <Default>0</Default>
           </Column>
                  </Select>
      </Table>
-->
        <Table Name="total_composite_instances">
                <ColumnDef Type='String' Key='true' Name='ServerName' />
                <ColumnDef Name="Instance.count" Type="Integer"/>
        <Select Name="total_composite_instances_result_1">
           <TableFrom Name="weblogic_j2eeserver:soainfra_composite_label_rollup_no_rate"/>
                        <Column Type='String' Name='ServerName' />
                        <Column Name="Instance.count" Type="Integer">
                           <Expression Operator="Plus">
                                   <Aggregation Operator="Sum" Name="RequestEvents.count"/>
                                   <Aggregation Operator="Sum" Name="PostEvents.count"/>
                           </Expression>
                           <Default>0</Default>
           </Column>
			      <GroupBy Name='ServerName' />
                  </Select>
      </Table>
<!--
      <Table Name="total_faults_delta">
                <ColumnDef Type='String' Key='true' Name='Name' />
                <ColumnDef Type='String' Key='true' Name='soainfra_domain' />
                <ColumnDef Type='String' Key='true' Name='soainfra_composite' />
                <ColumnDef Type='String' Key='true' Name='soainfra_composite_revision' />
                <ColumnDef Type='String' Name='soainfra_composite_label' />
                <ColumnDef Type='String' Key='true' Name='soainfra_component_type' />
                <ColumnDef Type='String' Key='true' Name='ServerName' />
                <ColumnDef Name="FaultDelta.count" Type="Integer"/>
       <Select Name="total_faults_delta_result">
           <TableFrom Name="weblogic_j2eeserver:soainfra_component_delta_rollup"/>
                        <Column Type='String' Name='Name' />
                        <Column Type='String' Name='soainfra_domain' />
                        <Column Type='String' Name='soainfra_composite' />
                        <Column Type='String' Name='soainfra_composite_revision' />
                        <Column Type='String' Name='soainfra_composite_label' />
                        <Column Type='String' Name='soainfra_component_type' />
                        <Column Type='String' Name='ServerName' />
                        <Column Name="FaultDelta.count" Type="Integer">
                        <Aggregation Operator="Sum" Name="faulted.deltaCompleted"/>
               <Default>0</Default>
            </Column>
       </Select>
   </Table>
-->
      <Table Name="total_faults">
  <ColumnDef Name="Fault.count" Key='true' Type="Integer"/>
  <Select Name="total_faults_result_1">
     <TableFrom Name="weblogic_j2eeserver:soainfra_component_rollup"/>
    <Column Name="Fault.count" Type="Integer">
     <Aggregation Operator="Sum" Name="faulted.completed"/>
       <Default>0</Default>
    </Column>
  </Select>
  <Select Name="total_faults_result_2">
     <TableFrom Name="weblogic_j2eeserver:soainfra_binding_rollup"/>
    <Column Name="Errors.count" Type="Integer">
     <Aggregation Operator="Sum" Name="Errors.count"/>
       <Default>0</Default>
    </Column>
  </Select>
  <Select Name="total_faults_result">
     <TableFrom Name="total_faults_result_1"/>
     <TableFrom Name="total_faults_result_2"/>
   <Column Type='Integer' Name='Fault.count'>
    <Expression Operator='Plus'>
     <ColumnFrom Name='Fault.count' Table="total_faults_result_1"/>
     <ColumnFrom Name='Errors.count' Table="total_faults_result_2"/>
    </Expression>
    <Default>0</Default>
   </Column>
  </Select>
   </Table>

<!-- SOA Infra Home page end -->

<!-- TABLE : Performance Summary : START -->
  <Table Name='soainfra_message_processing_rollup_bpel'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='message.count' />

    <Select Name='soainfra_message_processing_rollup_bpel_result'>
      <TableFrom Name='oracle_soainfra:soainfra_message_processing_rollup' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='message.count' />

      <Where>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name="Name"/>
            <Value>bpel</Value>
          </Condition>
      </Where>
    </Select>
  </Table>
  <Table Name='soainfra_message_processing_rollup_mediator'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='message.count' />

    <Select Name='soainfra_message_processing_rollup_mediator_result'>
      <TableFrom Name='oracle_soainfra:soainfra_message_processing_rollup' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='message.count' />

      <Where>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name="Name"/>
            <Value>mediator</Value>
          </Condition>
      </Where>
    </Select>
  </Table>
  <Table Name='soainfra_message_processing_rollup_workflow'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='message.count' />

    <Select Name='soainfra_message_processing_rollup_workflow_result'>
      <TableFrom Name='oracle_soainfra:soainfra_message_processing_rollup' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='message.count' />

      <Where>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name="Name"/>
            <Value>workflow</Value>
          </Condition>
      </Where>
    </Select>
  </Table>
  <Table Name='soainfra_message_processing_rollup_decision'>
    <ColumnDef Type='String' Key='true' Name='Name' />
    <ColumnDef Type='String' Key='true' Name='ServerName' />
    <ColumnDef Type='Integer' Name='message.count' />

    <Select Name='soainfra_message_processing_rollup_decision_result'>
      <TableFrom Name='oracle_soainfra:soainfra_message_processing_rollup' />
      <Column Type='String' Name='Name' />
      <Column Type='String' Name='ServerName' />
      <Column Type='Integer' Name='message.count' />

      <Where>
          <Condition Operator='EQ' Type='String'>
            <ColumnFrom Name="Name"/>
            <Value>decision</Value>
          </Condition>
      </Where>
    </Select>
  </Table>
</Adml>
