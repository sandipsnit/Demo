<?xml version='1.0' encoding='UTF-8' ?>

<!-- Copyright (c) 2007, 2012, Oracle and/or its affiliates. 
All rights reserved. -->

<!--
This is the Portal configuration file for MAS Metric Service metrics

   MODIFIED    (MM/DD/YY)
   mmuppago    04/23/12 - ADML warning for no key column fix
   pkapasi     02/24/09 - chart rate metric
   pkapasi     11/17/06 - Creation

-->

<Adml xmlns="http://www.oracle.com/iAS/aggregator"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      TableSpace="portal">

<Table Name="Response">
  <ColumnDef Name="appName" Type="String" Key="true"/>
  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="state" Type="Integer"/>
  <ColumnDef Name="Status" Type="Integer"/>
  <Select Name="application_result">
   <TableFrom Name="weblogic.management.runtime.ApplicationRuntimeMBean"/>
   <Column Name="appName" Type="String">
    <ColumnFrom Name="Name"/>
   </Column>
   <Column Name="serverName" Type="String">
    <ColumnFrom Name="ServerRuntime"/>
   </Column>
   <Column Name="state" Type="Integer">
    <ColumnFrom Name="ActiveVersionState"/>
   </Column>
   <Column Name="Status" Type="Integer">
    <If>
     <Condition Operator="EQ">
      <ColumnFrom Name="state"/>
      <Value>2</Value>
     </Condition>
    <Then>
      <Value>1</Value>
    </Then>
    <Else>
      <Value>0</Value>
    </Else>
    </If>
   </Column>
   <Where>
    <And>
     <Or>
      <Condition Type="String" Operator="EQ">
       <ColumnFrom Name="appName"/>
       <Value Name="appName.parameter"/>
      </Condition>
      <Condition Type="String" Operator="EQ">
       <Value Name="appName.parameter"
              xsi:nil="true"/>
       <Null/>
      </Condition>
     </Or>
     <Or>
      <Condition Type="String" Operator="EQ">
       <ColumnFrom Name="serverName"/>
       <Value Name="serverName.parameter"/>
      </Condition>
      <Condition Type="String" Operator="EQ">
       <Value Name="serverName.parameter"
              xsi:nil="true"/>
       <Null/>
      </Condition>
     </Or>
    </And>
   </Where>
  </Select>
</Table> 

<Table Name="portal_db_response_code_stats_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="processingTime.time" Type="Double"/>
  <ColumnDef Name="processingTime.maxTime" Type="Double"/>
  <ColumnDef Name="invocations.previous" Type="Double"/>
  <ColumnDef Name="processingTime.time.previous" Type="Double"/>

  <Select Name="portal_db_response_code_stats_no_rate_result">
    <TableFrom Name="RepositoryStatistics"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="invocations" Type="Double">
      <ColumnFrom Name="requestTime.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.time" Type="Double">
      <ColumnFrom Name="requestTimeTotal.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.maxTime" Type="Double">
      <ColumnFrom Name="requestTime.maxValue"/>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="requestTime.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="processingTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="requestTimeTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Where>
     <Condition Type="Integer" Operator="GT">
      <ColumnFrom Name="requestTime.count"/>
      <Value>0</Value>
     </Condition>
    </Where>
  </Select>
</Table>

<Table Name="portal_db_response_code_stats_delta">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="processingTime.time" Type="Double"/>
  <ColumnDef Name="processingTime.maxTime" Type="Double"/>
  <ColumnDef Name="invocations.delta" Type="Double"/>
  <ColumnDef Name="processingTime.time.delta" Type="Double"/>
  <ColumnDef Name="invocations.rate" Type="Double"/>

  <Select Name="portal_db_response_code_stats_delta_result">
    <TableFrom Name="portal:portal_db_response_code_stats_no_rate"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="invocations" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="invocations.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="invocations.previous"/>
          <ColumnFrom Name="invocations"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="invocations"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="invocations"/>
            <ColumnFrom Name="invocations.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="processingTime.time.previous"/>
          <ColumnFrom Name="processingTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="processingTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="processingTime.time"/>
            <ColumnFrom Name="processingTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="invocations"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_db_response_code_stats">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="processingTime.time" Type="Double"/>
  <ColumnDef Name="processingTime.avg" Type="Double"/>
  <ColumnDef Name="processingTime.maxTime" Type="Double"/>
  <ColumnDef Name="invocations.delta" Type="Double"/>
  <ColumnDef Name="processingTime.time.delta" Type="Double"/>
  <ColumnDef Name="processingTime.avg.delta" Type="Double"/>
  <ColumnDef Name="invocations.rate" Type="Double"/>

  <Select Name="portal_db_response_code_stats_result">
    <TableFrom Name="portal:portal_db_response_code_stats_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="invocations" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="processingTime.time"/>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="invocations.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="processingTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="processingTime.time.delta"/>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.rate" Type="Double">
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_connection_pool_stats_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="connFetch.count" Type="Double"/>
  <ColumnDef Name="connFetchTotal" Type="Double"/>
  <ColumnDef Name="hits.count" Type="Double"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="connFetch.count.previous" Type="Double"/>
  <ColumnDef Name="connFetchTotal.previous" Type="Double"/>
  <ColumnDef Name="hits.count.previous" Type="Double"/>
  <ColumnDef Name="newMisses.count.previous" Type="Double"/>
  <ColumnDef Name="staleMisses.count.previous" Type="Double"/>
  <ColumnDef Name="connFetch.maxValue" Type="Double"/>

  <Select Name="portal_connection_pool_stats_no_rate_result">
    <TableFrom Name="repository_DatabaseConnectionPool"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="connFetch.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetchTotal" Type="Double">
      <ColumnFrom Name="connFetchTotal.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="hits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="connFetch.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="connFetchTotal.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="connFetchTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="hits.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="hits.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="newMisses.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="newMisses.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="staleMisses.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="staleMisses.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="connFetch.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
   <Where>
    <Condition Type="String" Operator="EQ">
     <ColumnFrom Name="Name"/>
     <Value>SuperUserConnectionPool</Value>
    </Condition>
   </Where>
  </Select>
</Table>

<Table Name="portal_connection_pool_stats_delta">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="connFetch.count" Type="Double"/>
  <ColumnDef Name="connFetchTotal" Type="Double"/>
  <ColumnDef Name="hits.count" Type="Double"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="connFetch.count.delta" Type="Double"/>
  <ColumnDef Name="connFetchTotal.delta" Type="Double"/>
  <ColumnDef Name="hits.count.delta" Type="Double"/>
  <ColumnDef Name="newMisses.count.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.count.delta" Type="Double"/>
  <ColumnDef Name="connFetch.maxValue" Type="Double"/>

  <Select Name="portal_connection_pool_stats_delta_result">
    <TableFrom Name="portal:portal_connection_pool_stats_no_rate"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="connFetch.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetchTotal" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="hits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="connFetch.count.previous"/>
          <ColumnFrom Name="connFetch.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="connFetch.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="connFetch.count"/>
            <ColumnFrom Name="connFetch.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="connFetchTotal.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="connFetchTotal.previous"/>
          <ColumnFrom Name="connFetchTotal"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="connFetchTotal"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="connFetchTotal"/>
            <ColumnFrom Name="connFetchTotal.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="hits.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="hits.count.previous"/>
          <ColumnFrom Name="hits.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="hits.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="hits.count"/>
            <ColumnFrom Name="hits.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="newMisses.count.previous"/>
          <ColumnFrom Name="newMisses.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="newMisses.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="newMisses.count"/>
            <ColumnFrom Name="newMisses.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="staleMisses.count.previous"/>
          <ColumnFrom Name="staleMisses.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="staleMisses.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="staleMisses.count"/>
            <ColumnFrom Name="staleMisses.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_connection_pool_stats">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="connFetch.count" Type="Double"/>
  <ColumnDef Name="connFetchTotal" Type="Double"/>
  <ColumnDef Name="hits.count" Type="Double"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="hits.percent" Type="Double"/>
  <ColumnDef Name="newMisses.percent" Type="Double"/>
  <ColumnDef Name="staleMisses.percent" Type="Double"/>
  <ColumnDef Name="connFetch.avgTime" Type="Double"/>
  <ColumnDef Name="connFetch.count.delta" Type="Double"/>
  <ColumnDef Name="connFetchTotal.delta" Type="Double"/>
  <ColumnDef Name="hits.count.delta" Type="Double"/>
  <ColumnDef Name="newMisses.count.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.count.delta" Type="Double"/>
  <ColumnDef Name="hits.percent.delta" Type="Double"/>
  <ColumnDef Name="newMisses.percent.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.percent.delta" Type="Double"/>
  <ColumnDef Name="connFetch.avgTime.delta" Type="Double"/>
  <ColumnDef Name="connFetch.maxValue" Type="Double"/>
  <ColumnDef Name="connFetch.count.rate" Type="Double"/>

  <Select Name="portal_connection_pool_stats_result">
    <TableFrom Name="portal:portal_connection_pool_stats_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="connFetch.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetchTotal" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="hits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="hits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="hits.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="newMisses.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="staleMissess.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.avgTime" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="connFetchTotal"/>
        <ColumnFrom Name="connFetch.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetchTotal.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="hits.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="hits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="hits.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="newMisses.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="staleMissess.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="connFetch.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.avgTime.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="connFetchTotal.delta"/>
        <ColumnFrom Name="connFetch.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="connFetch.count.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="connFetch.count"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_response_codes_no_rate_base">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="http200.count" Type="Double"/>
  <ColumnDef Name="http201.count" Type="Double"/>
  <ColumnDef Name="http301.count" Type="Double"/>
  <ColumnDef Name="http302.count" Type="Double"/>
  <ColumnDef Name="http303.count" Type="Double"/>
  <ColumnDef Name="httpUnresolvedRedirect.count" Type="Double"/>
  <ColumnDef Name="http400.count" Type="Double"/>
  <ColumnDef Name="http401.count" Type="Double"/>
  <ColumnDef Name="http403.count" Type="Double"/>
  <ColumnDef Name="http404.count" Type="Double"/>
  <ColumnDef Name="http500.count" Type="Double"/>
  <ColumnDef Name="http501.count" Type="Double"/>
  <ColumnDef Name="http503.count" Type="Double"/>
  <ColumnDef Name="http504.count" Type="Double"/>
  <ColumnDef Name="httpTimeout.count" Type="Double"/>
  <ColumnDef Name="http200.count.previous" Type="Double"/>
  <ColumnDef Name="http201.count.previous" Type="Double"/>
  <ColumnDef Name="http301.count.previous" Type="Double"/>
  <ColumnDef Name="http302.count.previous" Type="Double"/>
  <ColumnDef Name="http303.count.previous" Type="Double"/>
  <ColumnDef Name="httpUnresolvedRedirect.count.previous" Type="Double"/>
  <ColumnDef Name="http400.count.previous" Type="Double"/>
  <ColumnDef Name="http401.count.previous" Type="Double"/>
  <ColumnDef Name="http403.count.previous" Type="Double"/>
  <ColumnDef Name="http404.count.previous" Type="Double"/>
  <ColumnDef Name="http500.count.previous" Type="Double"/>
  <ColumnDef Name="http501.count.previous" Type="Double"/>
  <ColumnDef Name="http503.count.previous" Type="Double"/>
  <ColumnDef Name="http504.count.previous" Type="Double"/>
  <ColumnDef Name="httpTimeout.count.previous" Type="Double"/>

  <Select Name="portal_page_engine_response_codes_no_rate_base_result">
    <TableFrom Name="PageEngine_ResponseCodes"/>

    <Column Name="serverName">
     <ColumnFrom Name="ServerName" Table="PageEngine_ResponseCodes"/>
    </Column>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String">
      <Value>Page Engine Response Codes</Value>
    </Column>
    <Column Name="http200.count" Type="Double">
      <ColumnFrom Name="http200.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http201.count" Type="Double">
      <ColumnFrom Name="http201.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http301.count" Type="Double">
      <ColumnFrom Name="http301.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http302.count" Type="Double">
      <ColumnFrom Name="http302.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http303.count" Type="Double">
      <ColumnFrom Name="http303.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="httpUnresolvedRedirect.count" Type="Double">
      <ColumnFrom Name="httpUnresolvedRedirect.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http400.count" Type="Double">
      <ColumnFrom Name="http400.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http401.count" Type="Double">
      <ColumnFrom Name="http401.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http403.count" Type="Double">
      <ColumnFrom Name="http403.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http404.count" Type="Double">
      <ColumnFrom Name="http404.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http500.count" Type="Double">
      <ColumnFrom Name="http500.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http501.count" Type="Double">
      <ColumnFrom Name="http501.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http503.count" Type="Double">
      <ColumnFrom Name="http503.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http504.count" Type="Double">
      <ColumnFrom Name="http504.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count" Type="Double">
      <ColumnFrom Name="httpTimeout.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="http200.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http201.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http201.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http301.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http301.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http302.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http302.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http303.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http303.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="httpUnresolvedRedirect.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="httpUnresolvedRedirect.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http400.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http400.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http401.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http401.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http403.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http403.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http404.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http404.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http500.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http500.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http501.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http501.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http503.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http503.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http504.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http504.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="httpTimeout.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="httpTimeout.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_response_codes_no_rate">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="http2xx.count" Type="Double"/>
  <ColumnDef Name="http3xx.count" Type="Double"/>
  <ColumnDef Name="http4xx.count" Type="Double"/>
  <ColumnDef Name="http5xx.count" Type="Double"/>
  <ColumnDef Name="httpTimeout.count" Type="Double"/>
  <ColumnDef Name="invocations.previous" Type="Double"/>
  <ColumnDef Name="http2xx.count.previous" Type="Double"/>
  <ColumnDef Name="http3xx.count.previous" Type="Double"/>
  <ColumnDef Name="http4xx.count.previous" Type="Double"/>
  <ColumnDef Name="http5xx.count.previous" Type="Double"/>
  <ColumnDef Name="httpTimeout.count.previous" Type="Double"/>

  <Select Name="portal_page_engine_response_codes_no_rate_result">
    <TableFrom Name="portal:portal_page_engine_response_codes_no_rate_base"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String">
      <Value>Page Engine Response Codes</Value>
    </Column>
    <Column Name="invocations" Type="Double">
      <Expression Operator="Plus">
          <Expression Operator="Plus">
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                <ColumnFrom Name="http200.count"/>
                <ColumnFrom Name="http201.count"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http301.count"/>
                <ColumnFrom Name="http302.count"/>
              </Expression>
            </Expression>
            <Expression Operator="Plus">
             <Expression Operator="Plus">
               <ColumnFrom Name="http303.count"/>
               <ColumnFrom Name="httpUnresolvedRedirect.count"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http400.count"/>
                <ColumnFrom Name="http401.count"/>
              </Expression>
            </Expression>
          </Expression>
          <Expression Operator="Plus">
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                <ColumnFrom Name="http403.count"/>
                <ColumnFrom Name="http404.count"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http500.count"/>
                <ColumnFrom Name="http501.count"/>
              </Expression>
            </Expression>
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                 <ColumnFrom Name="http503.count"/>
                 <ColumnFrom Name="http504.count"/>
              </Expression>
              <ColumnFrom Name="httpTimeout.count"/>
            </Expression>
          </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count" Type="Double">
      <Expression Operator="Plus">
        <ColumnFrom Name="http200.count"/>
        <ColumnFrom Name="http201.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http301.count"/>
          <ColumnFrom Name="http302.count"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http303.count"/>
          <ColumnFrom Name="httpUnresolvedRedirect.count"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http400.count"/>
          <ColumnFrom Name="http401.count"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http403.count"/>
          <ColumnFrom Name="http404.count"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http500.count"/>
          <ColumnFrom Name="http501.count"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http503.count"/>
          <ColumnFrom Name="http504.count"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="invocations.previous" Type="Double">
      <Expression Operator="Plus">
          <Expression Operator="Plus">
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                <ColumnFrom Name="http200.count.previous"/>
                <ColumnFrom Name="http201.count.previous"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http301.count.previous"/>
                <ColumnFrom Name="http302.count.previous"/>
              </Expression>
            </Expression>
            <Expression Operator="Plus">
             <Expression Operator="Plus">
               <ColumnFrom Name="http303.count.previous"/>
               <ColumnFrom Name="httpUnresolvedRedirect.count.previous"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http400.count.previous"/>
                <ColumnFrom Name="http401.count.previous"/>
              </Expression>
            </Expression>
          </Expression>
          <Expression Operator="Plus">
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                <ColumnFrom Name="http403.count.previous"/>
                <ColumnFrom Name="http404.count.previous"/>
              </Expression>
              <Expression Operator="Plus">
                <ColumnFrom Name="http500.count.previous"/>
                <ColumnFrom Name="http501.count.previous"/>
              </Expression>
            </Expression>
            <Expression Operator="Plus">
              <Expression Operator="Plus">
                 <ColumnFrom Name="http503.count.previous"/>
                 <ColumnFrom Name="http504.count.previous"/>
              </Expression>
              <ColumnFrom Name="httpTimeout.count.previous"/>
            </Expression>
          </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count.previous" Type="Double">
      <Expression Operator="Plus">
        <ColumnFrom Name="http200.count.previous"/>
        <ColumnFrom Name="http201.count.previous"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count.previous" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http301.count.previous"/>
          <ColumnFrom Name="http302.count.previous"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http303.count.previous"/>
          <ColumnFrom Name="httpUnresolvedRedirect.count.previous"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count.previous" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http400.count.previous"/>
          <ColumnFrom Name="http401.count.previous"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http403.count.previous"/>
          <ColumnFrom Name="http404.count.previous"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count.previous" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="http500.count.previous"/>
          <ColumnFrom Name="http501.count.previous"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="http503.count.previous"/>
          <ColumnFrom Name="http504.count.previous"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count.previous" Type="Double">
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_response_codes_delta">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="http2xx.count" Type="Double"/>
  <ColumnDef Name="http3xx.count" Type="Double"/>
  <ColumnDef Name="http4xx.count" Type="Double"/>
  <ColumnDef Name="http5xx.count" Type="Double"/>
  <ColumnDef Name="httpTimeout.count" Type="Double"/>
  <ColumnDef Name="invocations.delta" Type="Double"/>
  <ColumnDef Name="http2xx.count.delta" Type="Double"/>
  <ColumnDef Name="http3xx.count.delta" Type="Double"/>
  <ColumnDef Name="http4xx.count.delta" Type="Double"/>
  <ColumnDef Name="http5xx.count.delta" Type="Double"/>
  <ColumnDef Name="httpTimeout.count.delta" Type="Double"/>
  <ColumnDef Name="invocations.rate" Type="Double"/>

  <Select Name="portal_page_engine_response_codes_delta_result">
    <TableFrom Name="portal:portal_page_engine_response_codes_no_rate"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="invocations" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="invocations.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="invocations.previous"/>
          <ColumnFrom Name="invocations"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="invocations"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="invocations"/>
            <ColumnFrom Name="invocations.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http2xx.count.previous"/>
          <ColumnFrom Name="http2xx.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http2xx.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http2xx.count"/>
            <ColumnFrom Name="http2xx.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http3xx.count.previous"/>
          <ColumnFrom Name="http3xx.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http3xx.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http3xx.count"/>
            <ColumnFrom Name="http3xx.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http4xx.count.previous"/>
          <ColumnFrom Name="http4xx.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http4xx.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http4xx.count"/>
            <ColumnFrom Name="http4xx.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http5xx.count.previous"/>
          <ColumnFrom Name="http5xx.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http5xx.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http5xx.count"/>
            <ColumnFrom Name="http5xx.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="httpTimeout.count.previous"/>
          <ColumnFrom Name="httpTimeout.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="httpTimeout.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="httpTimeout.count"/>
            <ColumnFrom Name="httpTimeout.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="invocations"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_response_codes">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="invocations" Type="Double"/>
  <ColumnDef Name="http2xx.count" Type="Double"/>
  <ColumnDef Name="http3xx.count" Type="Double"/>
  <ColumnDef Name="http4xx.count" Type="Double"/>
  <ColumnDef Name="http5xx.count" Type="Double"/>
  <ColumnDef Name="httpTimeout.count" Type="Double"/>
  <ColumnDef Name="http2xx.percent" Type="Double"/>
  <ColumnDef Name="http3xx.percent" Type="Double"/>
  <ColumnDef Name="http4xx.percent" Type="Double"/>
  <ColumnDef Name="http5xx.percent" Type="Double"/>
  <ColumnDef Name="httpTimeout.percent" Type="Double"/>
  <ColumnDef Name="invocations.delta" Type="Double"/>
  <ColumnDef Name="http2xx.count.delta" Type="Double"/>
  <ColumnDef Name="http3xx.count.delta" Type="Double"/>
  <ColumnDef Name="http4xx.count.delta" Type="Double"/>
  <ColumnDef Name="http5xx.count.delta" Type="Double"/>
  <ColumnDef Name="httpTimeout.count.delta" Type="Double"/>
  <ColumnDef Name="http2xx.percent.delta" Type="Double"/>
  <ColumnDef Name="http3xx.percent.delta" Type="Double"/>
  <ColumnDef Name="http4xx.percent.delta" Type="Double"/>
  <ColumnDef Name="http5xx.percent.delta" Type="Double"/>
  <ColumnDef Name="httpTimeout.percent.delta" Type="Double"/>
  <ColumnDef Name="invocations.rate" Type="Double"/>

  <Select Name="portal_page_engine_response_codes_result">
    <TableFrom Name="portal:portal_page_engine_response_codes_delta"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="invocations" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http2xx.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http3xx.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http4xx.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http5xx.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="httpTimeout.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http2xx.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http2xx.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http3xx.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http3xx.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http4xx.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http4xx.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http5xx.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http5xx.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="httpTimeout.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="httpTimeout.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="invocations.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="invocations.rate" Type="Double">
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_no_rate_base">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="pageProcessingTime.completed" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time" Type="Double"/>
  <ColumnDef Name="pageRequests.value" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time" Type="Double"/>
  <ColumnDef Name="queueTimeout.value" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue" Type="Double"/>
  <ColumnDef Name="queueStay.time" Type="Double"/>
  <ColumnDef Name="queueStay.count" Type="Double"/>
  <ColumnDef Name="webCacheHit.count" Type="Double"/>
  <ColumnDef Name="webCacheMissNew.count" Type="Double"/>
  <ColumnDef Name="webCacheMissNonCacheable.count" Type="Double"/>
  <ColumnDef Name="webCacheGarbageUpdate.count" Type="Double"/>
  <ColumnDef Name="webCacheStaleHit.count" Type="Double"/>
  <ColumnDef Name="webCacheStaleUpdate.count" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.completed.previous" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time.previous" Type="Double"/>
  <ColumnDef Name="pageRequests.value.previous" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed.previous" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time.previous" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed.previous" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time.previous" Type="Double"/>
  <ColumnDef Name="queueTimeout.value.previous" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue.previous" Type="Double"/>
  <ColumnDef Name="queueStay.time.previous" Type="Double"/>
  <ColumnDef Name="queueStay.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheHit.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheMissNew.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheMissNonCacheable.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheGarbageUpdate.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheStaleHit.count.previous" Type="Double"/>
  <ColumnDef Name="webCacheStaleUpdate.count.previous" Type="Double"/>

  <Select Name="portal_page_engine_no_rate_base_result">
    <TableFrom Name="PageStatistics"/>

    <Column Name="serverName">
     <ColumnFrom Name="ServerName" Table="PageStatistics"/>
    </Column>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String">
      <Value>Page Engine Statistics</Value>
    </Column>
    <Column Name="pageProcessingTime.completed" Type="Double">
      <ColumnFrom Name="pageElapsedTimeAvg.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time" Type="Double">
      <ColumnFrom Name="pageElapsedTimeAvg.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed" Type="Double">
      <ColumnFrom Name="pageMetadataFetchTimeAvg.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time" Type="Double">
      <ColumnFrom Name="pageMetadataFetchTimeAvg.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed" Type="Double">
      <ColumnFrom Name="pageMetadataWaitTimeAvg.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time" Type="Double">
      <ColumnFrom Name="pageMetadataWaitTimeAvg.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time" Type="Double">
      <ColumnFrom Name="queueStayAvg.value"/>
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count" Type="Double">
      <ColumnFrom Name="queueStayAvg.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="webCacheHit.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCacheMissNew.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCacheMissNonCacheable.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCacheGarbageUpdate.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCacheStaleHit.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCacheStaleUpdate.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageElapsedTimeAvg.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="pageProcessingTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageElapsedTimeAvg.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="pageRequests.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageRequests.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="PMDFetchTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageMetadataFetchTimeAvg.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="PMDFetchTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageMetadataFetchTimeAvg.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="PMDWaitTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageMetadataWaitTimeAvg.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="PMDWaitTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pageMetadataWaitTimeAvg.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="queueTimeout.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="queueTimeout.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="queueLength.maxValue.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="queueLength.maxValue"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="queueStay.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="queueStayAvg.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="queueStay.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="queueStayAvg.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheHit.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheHit.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheMissNew.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheMissNew.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheMissNonCacheable.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheMissNonCacheable.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheGarbageUpdate.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheGarbageUpdate.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheStaleHit.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheStaleHit.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="webCacheStaleUpdate.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="webCacheStaleUpdate.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_no_rate">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="pageProcessingTime.completed" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time" Type="Double"/>
  <ColumnDef Name="pageRequests.value" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time" Type="Double"/>
  <ColumnDef Name="queueTimeout.value" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue" Type="Double"/>
  <ColumnDef Name="queueStay.time" Type="Double"/>
  <ColumnDef Name="queueStay.count" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.completed.previous" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time.previous" Type="Double"/>
  <ColumnDef Name="pageRequests.value.previous" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed.previous" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time.previous" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed.previous" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time.previous" Type="Double"/>
  <ColumnDef Name="queueTimeout.value.previous" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue.previous" Type="Double"/>
  <ColumnDef Name="queueStay.time.previous" Type="Double"/>
  <ColumnDef Name="queueStay.count.previous" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count.previous" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count.previous" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count.previous" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count.previous" Type="Double"/>

  <Select Name="portal_page_engine_no_rate_result">
    <TableFrom Name="portal:portal_page_engine_no_rate_base"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String">
      <Value>Page Engine Statistics</Value>
    </Column>
    <Column Name="pageProcessingTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count" Type="Double">
      <ColumnFrom Name="webCacheHit.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheMissNew.count"/>
          <ColumnFrom Name="webCacheStaleHit.count"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheStaleUpdate.count"/>
          <ColumnFrom Name="webCacheGarbageUpdate.count"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count" Type="Double">
      <ColumnFrom Name="webCacheMissNonCacheable.count"/>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <Expression Operator="Plus">
            <ColumnFrom Name="webCacheHit.count"/>
            <ColumnFrom Name="webCacheMissNonCacheable.count"/>
          </Expression>
          <Expression Operator="Plus">
            <ColumnFrom Name="webCacheMissNew.count"/>
            <ColumnFrom Name="webCacheStaleHit.count"/>
          </Expression>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheStaleUpdate.count"/>
          <ColumnFrom Name="webCacheGarbageUpdate.count"/>
         </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.completed.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count.previous" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count.previous" Type="Double">
      <ColumnFrom Name="webCacheHit.count.previous"/>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count.previous" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheMissNew.count.previous"/>
          <ColumnFrom Name="webCacheStaleHit.count.previous"/>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheStaleUpdate.count.previous"/>
          <ColumnFrom Name="webCacheGarbageUpdate.count.previous"/>
        </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count.previous" Type="Double">
      <ColumnFrom Name="webCacheMissNonCacheable.count.previous"/>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count.previous" Type="Double">
      <Expression Operator="Plus">
        <Expression Operator="Plus">
          <Expression Operator="Plus">
            <ColumnFrom Name="webCacheHit.count.previous"/>
            <ColumnFrom Name="webCacheMissNonCacheable.count.previous"/>
          </Expression>
          <Expression Operator="Plus">
            <ColumnFrom Name="webCacheMissNew.count.previous"/>
            <ColumnFrom Name="webCacheStaleHit.count.previous"/>
          </Expression>
        </Expression>
        <Expression Operator="Plus">
          <ColumnFrom Name="webCacheStaleUpdate.count.previous"/>
          <ColumnFrom Name="webCacheGarbageUpdate.count.previous"/>
         </Expression>
      </Expression>
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine_delta">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="pageProcessingTime.completed" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time" Type="Double"/>
  <ColumnDef Name="pageRequests.value" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time" Type="Double"/>
  <ColumnDef Name="queueTimeout.value" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue" Type="Double"/>
  <ColumnDef Name="queueStay.time" Type="Double"/>
  <ColumnDef Name="queueStay.count" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.completed.delta" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time.delta" Type="Double"/>
  <ColumnDef Name="pageRequests.value.delta" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed.delta" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time.delta" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed.delta" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time.delta" Type="Double"/>
  <ColumnDef Name="queueTimeout.value.delta" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue.delta" Type="Double"/>
  <ColumnDef Name="queueStay.time.delta" Type="Double"/>
  <ColumnDef Name="queueStay.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count.delta" Type="Double"/>

  <Select Name="portal_page_engine_delta_result">
    <TableFrom Name="portal:portal_page_engine_no_rate"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String">
      <Value>Page Engine Statistics</Value>
    </Column>
    <Column Name="pageProcessingTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.completed.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="pageProcessingTime.completed.previous"/>
          <ColumnFrom Name="pageProcessingTime.completed"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="pageProcessingTime.completed"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="pageProcessingTime.completed"/>
            <ColumnFrom Name="pageProcessingTime.completed.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="pageProcessingTime.time.previous"/>
          <ColumnFrom Name="pageProcessingTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="pageProcessingTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="pageProcessingTime.time"/>
            <ColumnFrom Name="pageProcessingTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="pageRequests.value.previous"/>
          <ColumnFrom Name="pageRequests.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="pageRequests.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="pageRequests.value"/>
            <ColumnFrom Name="pageRequests.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="PMDFetchTime.completed.previous"/>
          <ColumnFrom Name="PMDFetchTime.completed"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="PMDFetchTime.completed"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="PMDFetchTime.completed"/>
            <ColumnFrom Name="PMDFetchTime.completed.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="PMDFetchTime.time.previous"/>
          <ColumnFrom Name="PMDFetchTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="PMDFetchTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="PMDFetchTime.time"/>
            <ColumnFrom Name="PMDFetchTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="PMDWaitTime.completed.previous"/>
          <ColumnFrom Name="PMDWaitTime.completed"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="PMDWaitTime.completed"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="PMDWaitTime.completed"/>
            <ColumnFrom Name="PMDWaitTime.completed.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="PMDWaitTime.time.previous"/>
          <ColumnFrom Name="PMDWaitTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="PMDWaitTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="PMDWaitTime.time"/>
            <ColumnFrom Name="PMDWaitTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="queueTimeout.value.previous"/>
          <ColumnFrom Name="queueTimeout.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="queueTimeout.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="queueTimeout.value"/>
            <ColumnFrom Name="queueTimeout.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="queueLength.maxValue.previous"/>
          <ColumnFrom Name="queueLength.maxValue"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="queueLength.maxValue"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="queueLength.maxValue"/>
            <ColumnFrom Name="queueLength.maxValue.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="queueStay.time.previous"/>
          <ColumnFrom Name="queueStay.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="queueStay.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="queueStay.time"/>
            <ColumnFrom Name="queueStay.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="queueStay.count.previous"/>
          <ColumnFrom Name="queueStay.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="queueStay.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="queueStay.count"/>
            <ColumnFrom Name="queueStay.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="webCachePMDHits.count.previous"/>
          <ColumnFrom Name="webCachePMDHits.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="webCachePMDHits.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="webCachePMDHits.count"/>
            <ColumnFrom Name="webCachePMDHits.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="webCachePMDMisses.count.previous"/>
          <ColumnFrom Name="webCachePMDMisses.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="webCachePMDMisses.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="webCachePMDMisses.count"/>
            <ColumnFrom Name="webCachePMDMisses.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="webCachePMDNonCacheables.count.previous"/>
          <ColumnFrom Name="webCachePMDNonCacheables.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="webCachePMDNonCacheables.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="webCachePMDNonCacheables.count"/>
            <ColumnFrom Name="webCachePMDNonCacheables.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="webCachePMDTotalRequests.count.previous"/>
          <ColumnFrom Name="webCachePMDTotalRequests.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="webCachePMDTotalRequests.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="webCachePMDTotalRequests.count"/>
            <ColumnFrom Name="webCachePMDTotalRequests.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_page_engine">

  <ColumnDef Name="serverName" Type="String" Key="true"/>
  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="pageProcessingTime.completed" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.avg" Type="Double"/>
  <ColumnDef Name="pageRequests.value" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.avg" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.avg" Type="Double"/>
  <ColumnDef Name="queueTimeout.value" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue" Type="Double"/>
  <ColumnDef Name="queueStay.time" Type="Double"/>
  <ColumnDef Name="queueStay.count" Type="Double"/>
  <ColumnDef Name="avgTimeInQueue" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.percent" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.percent" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.percent" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.completed.delta" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.time.delta" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.avg.delta" Type="Double"/>
  <ColumnDef Name="pageRequests.value.delta" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed.delta" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.time.delta" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.avg.delta" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.completed.delta" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.time.delta" Type="Double"/>
  <ColumnDef Name="PMDWaitTime.avg.delta" Type="Double"/>
  <ColumnDef Name="queueTimeout.value.delta" Type="Double"/>
  <ColumnDef Name="queueLength.maxValue.delta" Type="Double"/>
  <ColumnDef Name="queueStay.time.delta" Type="Double"/>
  <ColumnDef Name="queueStay.count.delta" Type="Double"/>
  <ColumnDef Name="avgTimeInQueue.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDTotalRequests.count.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDHits.percent.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDMisses.percent.delta" Type="Double"/>
  <ColumnDef Name="webCachePMDNonCacheables.percent.delta" Type="Double"/>
  <ColumnDef Name="pageProcessingTime.completed.rate" Type="Double"/>
  <ColumnDef Name="PMDFetchTime.completed.rate" Type="Double"/>
  <ColumnDef Name="queueTimeout.value.rate" Type="Double"/>

  <Select Name="portal_page_engine_result">
    <TableFrom Name="portal:portal_page_engine_delta"/>

    <Column Name="serverName" Type="String"/>
    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="pageProcessingTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="pageProcessingTime.time"/>
        <ColumnFrom Name="pageProcessingTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="PMDFetchTime.time"/>
        <ColumnFrom Name="PMDFetchTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="PMDWaitTime.time"/>
        <ColumnFrom Name="PMDWaitTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="avgTimeInQueue" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="queueStay.time"/>
        <ColumnFrom Name="queueStay.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDHits.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDMisses.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDNonCacheables.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="pageProcessingTime.time.delta"/>
        <ColumnFrom Name="pageProcessingTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pageRequests.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDFetchTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="PMDFetchTime.time.delta"/>
        <ColumnFrom Name="PMDFetchTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="PMDWaitTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="PMDWaitTime.time.delta"/>
        <ColumnFrom Name="PMDWaitTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="queueTimeout.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueLength.maxValue.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="queueStay.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="avgTimeInQueue.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="queueStay.time.delta"/>
        <ColumnFrom Name="queueStay.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDTotalRequests.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDHits.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDMisses.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDMisses.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="webCachePMDNonCacheables.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="webCachePMDNonCacheables.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="webCachePMDTotalRequests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pageProcessingTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="pageProcessingTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
    <Column Name="PMDFetchTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="PMDFetchTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
    <Column Name="queueTimeout.value.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="queueTimeout.value"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_cache_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="pingHits.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="expireHits.count" Type="Double"/>
  <ColumnDef Name="requests.count" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value" Type="Double"/>
  <ColumnDef Name="newMisses.maxValue" Type="Double"/>
  <ColumnDef Name="pingHits.maxValue" Type="Double"/>
  <ColumnDef Name="staleMisses.maxValue" Type="Double"/>
  <ColumnDef Name="expireHits.maxValue" Type="Double"/>
  <ColumnDef Name="newMisses.count.previous" Type="Double"/>
  <ColumnDef Name="pingHits.count.previous" Type="Double"/>
  <ColumnDef Name="staleMisses.count.previous" Type="Double"/>
  <ColumnDef Name="expireHits.count.previous" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value.previous" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value.previous" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value.previous" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value.previous" Type="Double"/>
  <ColumnDef Name="requests.count.previous" Type="Double"/>

  <Select Name="portal_cache_no_rate_result">
    <TableFrom Name="CacheSummary"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="requests.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="newMisses.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="pingHits.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pingHits.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="staleMisses.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="staleMisses.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="expireHits.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="expireHits.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="newMissesTotal.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="newMissesTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="pingHitsTotal.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="pingHitsTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="staleMissesTotal.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="staleMissesTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="expireHitsTotal.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="expireHitsTotal.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="requests.count.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="requests.count"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Where>
     <Condition Type="Integer" Operator="GT">
      <ColumnFrom Name="requests.count"/>
      <Value>0</Value>
     </Condition>
    </Where>
  </Select>
</Table>

<Table Name="portal_cache_delta">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="pingHits.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="expireHits.count" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value" Type="Double"/>
  <ColumnDef Name="requests.count" Type="Double"/>
  <ColumnDef Name="newMisses.maxValue" Type="Double"/>
  <ColumnDef Name="pingHits.maxValue" Type="Double"/>
  <ColumnDef Name="staleMisses.maxValue" Type="Double"/>
  <ColumnDef Name="expireHits.maxValue" Type="Double"/>
  <ColumnDef Name="newMisses.count.delta" Type="Double"/>
  <ColumnDef Name="pingHits.count.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.count.delta" Type="Double"/>
  <ColumnDef Name="expireHits.count.delta" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value.delta" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value.delta" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value.delta" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value.delta" Type="Double"/>
  <ColumnDef Name="requests.count.delta" Type="Double"/>
  <ColumnDef Name="requests.count.rate" Type="Double"/>

  <Select Name="portal_cache_delta_result">
    <TableFrom Name="portal:portal_cache_no_rate"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="requests.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="newMisses.count.previous"/>
          <ColumnFrom Name="newMisses.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="newMisses.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="newMisses.count"/>
            <ColumnFrom Name="newMisses.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="pingHits.count.previous"/>
          <ColumnFrom Name="pingHits.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="pingHits.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="pingHits.count"/>
            <ColumnFrom Name="pingHits.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="staleMisses.count.previous"/>
          <ColumnFrom Name="staleMisses.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="staleMisses.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="staleMisses.count"/>
            <ColumnFrom Name="staleMisses.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="expireHits.count.previous"/>
          <ColumnFrom Name="expireHits.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="expireHits.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="expireHits.count"/>
            <ColumnFrom Name="expireHits.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="newMissesTotal.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="newMissesTotal.value.previous"/>
          <ColumnFrom Name="newMissesTotal.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="newMissesTotal.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="newMissesTotal.value"/>
            <ColumnFrom Name="newMissesTotal.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="pingHitsTotal.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="pingHitsTotal.value.previous"/>
          <ColumnFrom Name="pingHitsTotal.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="pingHitsTotal.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="pingHitsTotal.value"/>
            <ColumnFrom Name="pingHitsTotal.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="staleMissesTotal.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="staleMissesTotal.value.previous"/>
          <ColumnFrom Name="staleMissesTotal.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="staleMissesTotal.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="staleMissesTotal.value"/>
            <ColumnFrom Name="staleMissesTotal.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="expireHitsTotal.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="expireHitsTotal.value.previous"/>
          <ColumnFrom Name="expireHitsTotal.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="expireHitsTotal.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="expireHitsTotal.value"/>
            <ColumnFrom Name="expireHitsTotal.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="requests.count.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="requests.count.previous"/>
          <ColumnFrom Name="requests.count"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="requests.count"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="requests.count"/>
            <ColumnFrom Name="requests.count.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="requests.count.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="requests.count"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_cache">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="newMisses.count" Type="Double"/>
  <ColumnDef Name="pingHits.count" Type="Double"/>
  <ColumnDef Name="staleMisses.count" Type="Double"/>
  <ColumnDef Name="expireHits.count" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value" Type="Double"/>
  <ColumnDef Name="requests.count" Type="Double"/>
  <ColumnDef Name="newMisses.percent" Type="Double"/>
  <ColumnDef Name="pingHits.percent" Type="Double"/>
  <ColumnDef Name="staleMisses.percent" Type="Double"/>
  <ColumnDef Name="expireHits.percent" Type="Double"/>
  <ColumnDef Name="newMisses.avgTime" Type="Double"/>
  <ColumnDef Name="pingHits.avgTime" Type="Double"/>
  <ColumnDef Name="staleMisses.avgTime" Type="Double"/>
  <ColumnDef Name="expireHits.avgTime" Type="Double"/>
  <ColumnDef Name="newMisses.maxValue" Type="Double"/>
  <ColumnDef Name="pingHits.maxValue" Type="Double"/>
  <ColumnDef Name="staleMisses.maxValue" Type="Double"/>
  <ColumnDef Name="expireHits.maxValue" Type="Double"/>
  <ColumnDef Name="newMisses.count.delta" Type="Double"/>
  <ColumnDef Name="pingHits.count.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.count.delta" Type="Double"/>
  <ColumnDef Name="expireHits.count.delta" Type="Double"/>
  <ColumnDef Name="newMissesTotal.value.delta" Type="Double"/>
  <ColumnDef Name="pingHitsTotal.value.delta" Type="Double"/>
  <ColumnDef Name="staleMissesTotal.value.delta" Type="Double"/>
  <ColumnDef Name="expireHitsTotal.value.delta" Type="Double"/>
  <ColumnDef Name="requests.count.delta" Type="Double"/>
  <ColumnDef Name="newMisses.percent.delta" Type="Double"/>
  <ColumnDef Name="pingHits.percent.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.percent.delta" Type="Double"/>
  <ColumnDef Name="expireHits.percent.delta" Type="Double"/>
  <ColumnDef Name="newMisses.avgTime.delta" Type="Double"/>
  <ColumnDef Name="pingHits.avgTime.delta" Type="Double"/>
  <ColumnDef Name="staleMisses.avgTime.delta" Type="Double"/>
  <ColumnDef Name="expireHits.avgTime.delta" Type="Double"/>
  <ColumnDef Name="requests.count.rate" Type="Double"/>

  <Select Name="portal_cache_result">
    <TableFrom Name="portal:portal_cache_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="newMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMissesTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHitsTotal.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="requests.count" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="newMisses.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="pingHits.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="staleMisses.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="expireHits.count"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.avgTime" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="newMissesTotal.value"/>
        <ColumnFrom Name="newMisses.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.avgTime" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="pingHitsTotal.value"/>
        <ColumnFrom Name="pingHits.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.avgTime" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="staleMissesTotal.value"/>
        <ColumnFrom Name="staleMisses.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.avgTime" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="expireHitsTotal.value"/>
        <ColumnFrom Name="expireHits.count"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.maxValue" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMissesTotal.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="pingHitsTotal.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="staleMissesTotal.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="expireHitsTotal.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="requests.count.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="newMisses.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="pingHits.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="staleMisses.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="expireHits.count.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="requests.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="newMisses.avgTime.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="newMissesTotal.value.delta"/>
        <ColumnFrom Name="newMisses.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="pingHits.avgTime.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="pingHitsTotal.value.delta"/>
        <ColumnFrom Name="pingHits.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="staleMisses.avgTime.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="staleMissesTotal.value.delta"/>
        <ColumnFrom Name="staleMisses.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="expireHits.avgTime.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="expireHitsTotal.value.delta"/>
        <ColumnFrom Name="expireHits.count.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="requests.count.rate" Type="Double">
      <Default>0</Default>
    </Column>
  </Select>
</Table>

<Table Name="portal_db_provider_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_db_provider_no_rate_result">
    <TableFrom Name="DBProvider"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>Database</Value>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_wsrp_provider_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_wsrp_provider_no_rate_result">
    <TableFrom Name="WSRPProvider"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>WSRP</Value>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_web_provider_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_web_provider_no_rate_result">
    <TableFrom Name="WebProvider"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>JPDK</Value>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_providers_delta">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>

  <Union Name="portal_providers_delta_result">
    <TableFrom Name="portal:portal_db_provider_no_rate"/>
    <TableFrom Name="portal:portal_wsrp_provider_no_rate"/>
    <TableFrom Name="portal:portal_web_provider_no_rate"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="executeTime.completed.previous"/>
          <ColumnFrom Name="executeTime.completed"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="executeTime.completed"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="executeTime.completed"/>
            <ColumnFrom Name="executeTime.completed.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="executeTime.time.previous"/>
          <ColumnFrom Name="executeTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="executeTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="executeTime.time"/>
            <ColumnFrom Name="executeTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http200.value.previous"/>
          <ColumnFrom Name="http200.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http200.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http200.value"/>
            <ColumnFrom Name="http200.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="cacheHits.value.previous"/>
          <ColumnFrom Name="cacheHits.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="cacheHits.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="cacheHits.value"/>
            <ColumnFrom Name="cacheHits.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
  </Union>
</Table>

<Table Name="portal_agg_producers">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="executeTime.avg" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="http200.percent" Type="Double"/>
  <ColumnDef Name="cacheHits.percent" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="executeTime.avg.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>
  <ColumnDef Name="http200.percent.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.percent.delta" Type="Double"/>
  <ColumnDef Name="executeTime.completed.rate" Type="Double"/>

  <Select Name="portal_agg_producers_result">
    <TableFrom Name="portal:portal_providers_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time"/>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time.delta"/>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="executeTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_agg_producers_top5">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="executeTime.avg" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="http200.percent" Type="Double"/>
  <ColumnDef Name="cacheHits.percent" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="executeTime.avg.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>
  <ColumnDef Name="http200.percent.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.percent.delta" Type="Double"/>
  <ColumnDef Name="executeTime.completed.rate" Type="Double"/>

  <Select Name="portal_agg_producers_top5_result">
    <TableFrom Name="portal:portal_providers_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time"/>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time.delta"/>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="executeTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
    <OrderBy Name="executeTime.completed"/>
    <RowRetained Name="top_invocations">5</RowRetained>
  </Select>
</Table>

<Table Name="portal_db_portlet_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_db_portlet_no_rate_result">
    <TableFrom Name="DBPortlet"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>Database</Value>
    </Column>
    <Column Name="ProviderName" Type="String">
      <ColumnFrom Name="DBProvider"/>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Value>0</Value>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_wsrp_portlet_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_wsrp_portlet_no_rate_result">
    <TableFrom Name="WSRPPortlet"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>WSRP</Value>
    </Column>
    <Column Name="ProviderName" Type="String">
      <ColumnFrom Name="WSRPProvider"/>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Value>0</Value>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_web_portlet_no_rate">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.previous" Type="Double"/>
  <ColumnDef Name="executeTime.time.previous" Type="Double"/>
  <ColumnDef Name="http200.value.previous" Type="Double"/>
  <ColumnDef Name="cacheHits.value.previous" Type="Double"/>

  <Select Name="portal_web_portlet_no_rate_result">
    <TableFrom Name="WebPortlet"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String">
      <Value>JPDK</Value>
    </Column>
    <Column Name="ProviderName" Type="String">
      <ColumnFrom Name="WebProvider"/>
    </Column>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Value>0</Value>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String">
      <If>
       <Condition Operator="NE">
        <ColumnFrom Name="lastResponseCode.value"/>
        <Value>200</Value>
       </Condition>
      <Then>
        <Value>/images/down.gif</Value>
      </Then>
      <Else>
        <Value>/images/up.gif</Value>
      </Else>
      </If>
      <Default>/images/up.gif</Default>
    </Column>
    <Column Name="executeTime.completed.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.completed"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="executeTime.time.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="executeTime.time"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="http200.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="http200.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
    <Column Name="cacheHits.value.previous" Type="Double">
      <Previous Interval="300000" Index="2">
        <ColumnFrom Name="cacheHits.value"/>
        <Default>0</Default>
      </Previous>
    </Column>
  </Select>
</Table>

<Table Name="portal_portlets_delta">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>

  <Union Name="portal_portlets_delta_result">
    <TableFrom Name="portal:portal_db_portlet_no_rate"/>
    <TableFrom Name="portal:portal_wsrp_portlet_no_rate"/>
    <TableFrom Name="portal:portal_web_portlet_no_rate"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="ProviderName" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="executeTime.completed.previous"/>
          <ColumnFrom Name="executeTime.completed"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="executeTime.completed"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="executeTime.completed"/>
            <ColumnFrom Name="executeTime.completed.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="executeTime.time.previous"/>
          <ColumnFrom Name="executeTime.time"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="executeTime.time"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="executeTime.time"/>
            <ColumnFrom Name="executeTime.time.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="http200.value.previous"/>
          <ColumnFrom Name="http200.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="http200.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="http200.value"/>
            <ColumnFrom Name="http200.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <If>
        <Condition Operator="GT">
          <ColumnFrom Name="cacheHits.value.previous"/>
          <ColumnFrom Name="cacheHits.value"/>
        </Condition>
        <Then>
          <!-- Server was restarted, just use direct value -->
          <ColumnFrom Name="cacheHits.value"/>
        </Then>
        <Else>
          <Expression Operator="Minus">
            <ColumnFrom Name="cacheHits.value"/>
            <ColumnFrom Name="cacheHits.value.previous"/>
          </Expression>
        </Else>
      </If>
      <Default>0</Default>
    </Column>
  </Union>
</Table>

<Table Name="portal_agg_portlets">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="executeTime.avg" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="http200.percent" Type="Double"/>
  <ColumnDef Name="cacheHits.percent" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="executeTime.avg.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>
  <ColumnDef Name="http200.percent.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.percent.delta" Type="Double"/>
  <ColumnDef Name="executeTime.completed.rate" Type="Double"/>

  <Select Name="portal_agg_portlets_result">
    <TableFrom Name="portal:portal_portlets_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="ProviderName" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time"/>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time.delta"/>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="executeTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
  </Select>
</Table>

<Table Name="portal_agg_portlets_top5">

  <ColumnDef Name="MetricRuleVersion" Type="String"/>
  <ColumnDef Name="Name" Type="String" Key="true"/>
  <ColumnDef Name="ProviderType" Type="String"/>
  <ColumnDef Name="ProviderName" Type="String" Key="true"/>
  <ColumnDef Name="executeTime.completed" Type="Double"/>
  <ColumnDef Name="executeTime.time" Type="Double"/>
  <ColumnDef Name="executeTime.avg" Type="Double"/>
  <ColumnDef Name="http200.value" Type="Double"/>
  <ColumnDef Name="cacheHits.value" Type="Double"/>
  <ColumnDef Name="http200.percent" Type="Double"/>
  <ColumnDef Name="cacheHits.percent" Type="Double"/>
  <ColumnDef Name="offline.value" Type="Double"/>
  <ColumnDef Name="executeTime.maxTime" Type="Double"/>
  <ColumnDef Name="executeTime.minTime" Type="Double"/>
  <ColumnDef Name="Status" Type="String"/>
  <ColumnDef Name="executeTime.completed.delta" Type="Double"/>
  <ColumnDef Name="executeTime.time.delta" Type="Double"/>
  <ColumnDef Name="executeTime.avg.delta" Type="Double"/>
  <ColumnDef Name="http200.value.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.value.delta" Type="Double"/>
  <ColumnDef Name="http200.percent.delta" Type="Double"/>
  <ColumnDef Name="cacheHits.percent.delta" Type="Double"/>
  <ColumnDef Name="executeTime.completed.rate" Type="Double"/>

  <Select Name="portal_agg_portlets_top5_result">
    <TableFrom Name="portal:portal_portlets_delta"/>

    <Column Name="MetricRuleVersion" Type="String">
      <Value>V2</Value>
    </Column>
    <Column Name="Name" Type="String"/>
    <Column Name="ProviderType" Type="String"/>
    <Column Name="ProviderName" Type="String"/>
    <Column Name="executeTime.completed" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time"/>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="offline.value" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.maxTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.minTime" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="Status" Type="String"/>
    <Column Name="executeTime.completed.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.time.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.avg.delta" Type="Double">
      <Expression Operator="Div">
        <ColumnFrom Name="executeTime.time.delta"/>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="http200.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.value.delta" Type="Double">
      <Default>0</Default>
    </Column>
    <Column Name="http200.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="http200.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="cacheHits.percent.delta" Type="Double">
      <Expression Operator="Div">
        <Expression Operator="Mult">
          <ColumnFrom Name="cacheHits.value.delta"/>
          <Value>100</Value>
        </Expression>
        <ColumnFrom Name="executeTime.completed.delta"/>
      </Expression>
      <Default>0</Default>
    </Column>
    <Column Name="executeTime.completed.rate" Type="Double">
     <Expression Operator="Mult">
       <Rate Interval="300000">
         <ColumnFrom Name="executeTime.completed"/>
         <Default>0</Default>
       </Rate>
       <Value>60</Value>
     </Expression>
    </Column>
    <OrderBy Name="executeTime.completed"/>
    <RowRetained Name="top_invocations">5</RowRetained>
  </Select>
</Table>


</Adml>
