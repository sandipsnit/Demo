<sdp_diaglet platform="solaris" product="FM1111" set="A300FM1111_sol" title="Oracle Fusion Middleware 11g R1 (11.1.1) Preinstall (Solaris)" type="A">
<sdp_meta id="$Id: A300FM1111_sol.xml,v 2.10 2012/08/30 15:47:29 mschenke Exp $" type="version"/>
<sdp_meta author="JCR" change="Improve tmp Space check" date="20120829" type="history"/>
<sdp_content set="A300FM1111_sol" title="Oracle Fusion Middleware 11g R1 (11.1.1) Preinstall (Solaris)" type="check">

<sdp_group exec="0">
<sdp_rule id="A00001" mode="RECORD" name="Middleware Home">
<sdp_command default="$MIDDLEWARE_HOME" type="PROMPT" variable="$MIDDLEWARE_HOME"><![CDATA[Planned Middleware home location]]></sdp_command>
<sdp_description><![CDATA[This rule prompts for the planned Middleware home.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A13000" mode="RECORD" name="OS Type">
<sdp_command type="RDA"><![CDATA[call setHcveResult(getOsName())]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the operating system type.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A13001" mode="RECORD" name="OS Name">
<sdp_command type="RDA"><![CDATA[import $OS_NAM
call setHcveResult($OS_NAM)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the operating system name.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A13002" mode="RECORD" name="OS Bit">
<sdp_command type="RDA"><![CDATA[import $OS_BIT
call setHcveResult($OS_BIT)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the word size at operating system level.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A13003" mode="RECORD" name="Hardware Architecture">
<sdp_command type="RDA"><![CDATA[import $OS_ARC
call setHcveResult($OS_ARC)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the hardware architecture.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A13004" mode="RECORD" name="OS Version">
<sdp_command type="RDA"><![CDATA[import $OS_VER
call setHcveResult($OS_VER)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the operating system version.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A01002" mode="RECORD" name="Database User Id">
<sdp_command default="SYS" type="PROMPT" variable="$USERID"><![CDATA[User identifier to connect to the database]]></sdp_command>
<sdp_description><![CDATA[This rule prompts the user to enter the user identifier for connecting to the database.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A01003" mode="RECORD" name="SYSDBA">
<sdp_dependencies>
<sdp_dependency condition="!~" id="A01002" minimum="^(/|[Ss][Yy][Ss])$" result="PASSED" value="Y">Y</sdp_dependency>
</sdp_dependencies>
<sdp_command default="Y" type="PROMPT" variable="$SYSDBA"><![CDATA[Whether the user will log in as SYSDBA (Y/N)]]></sdp_command>
<sdp_description><![CDATA[This rule prompts the user to enter whether the specified user will connect to the Oracle Database with SYSDBA privileges.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A01004" mode="RECORD" name="Default Tablespace">
<sdp_command default="" type="PROMPT" variable="$DFT_TSP"><![CDATA[Default tablespace of a schema when created from RCU]]></sdp_command>
<sdp_description><![CDATA[The rule prompts the user to enter the default tablespace for a schema created by the Repository Creation Utility (RCU).]]></sdp_description>
</sdp_rule>

<sdp_rule id="A01005" mode="RECORD" name="Temporary Tablespace">
<sdp_command default="" type="PROMPT" variable="$TMP_TSP"><![CDATA[Temporary tablespace for a schema when created from RCU]]></sdp_command>
<sdp_description><![CDATA[The rule prompts the user to enter the temporary tablespace for a schema created by the Repository Creation Utility (RCU).]]></sdp_description>
</sdp_rule>
</sdp_group>

<sdp_group exec="1">
<sdp_rule id="A11000" mode="RECORD" name="Physical Memory (KB)">
<sdp_command type="RDA"><![CDATA[var $MEM = undef
call setHcveVariable('$MEM')
if !testFile('x','/usr/sbin/prtconf')
 return setHcveResult('Cannot access /usr/sbin/prtconf')
var $MEM = field('\s+',2,grepCommand('/usr/sbin/prtconf','Memory','f'))
call setHcveResult(concat(expr('*',$MEM,1024),' KB'))]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the physical memory size, measured in KB.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A11011" mode="VERIFY" name="Physical Memory Required?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A11000" result="FAILED" value="Memory size required"><![CDATA[Requires the physical memory size.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MEM
call setHcveResult(cond(\
  expr('>=',$MEM,2097152),'Available',\
                          'Need at least 2 GB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that your system has sufficient physical memory to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough memory to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 2 GB" result="FAILED" syntax="wiki"><![CDATA[Increase the memory to 2 GB or more to install Oracle Fusion Middleware 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A11022" mode="VERIFY" name="WLS Physical Memory Required?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A11000" result="FAILED" value="Memory size required"><![CDATA[Requires the physical memory size.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MEM
call setHcveResult(cond(\
  expr('>=',$MEM,1048576),'Available',\
                          'Need at least 1 GB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that your system has sufficient physical memory to install Oracle WebLogic Server (WLS) 11g Release 1 (10.3.x).]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough memory to install Oracle WebLogic Server 11g Release 1 (10.3.x). The minimum required is 1 GB, recommended is 2 GB.]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 1 GB" result="FAILED" syntax="wiki"><![CDATA[Increase the memory to 1 GB or more to install Oracle WebLogic Server 11g Release 1 (10.3.x). For more information, see ''Oracle Fusion Middleware Installation Guide for Oracle WebLogic Server 11g Release 1 (10.3.x)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A11100" mode="RECORD" name="Available Memory (KB)">
<sdp_command type="RDA"><![CDATA[var $FRE = undef
call setHcveVariable('$FRE')
if !findCommand('vmstat')
 return setHcveResult('Cannot access vmstat')
var $FRE = field('\s+',4,grepCommand('vmstat |tail -1','.','f'))
call setHcveResult($FRE)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the size of available physical memory, measured in KB.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A11111" mode="VERIFY" name="Available Memory Required?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A11100" result="FAILED" value="Available memory size required"><![CDATA[Requires the available memory size.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $FRE
call setHcveResult(cond(\
  expr('>=',$FRE,1048576),'Available',\
                          'Need at least 1 GB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that your system has sufficient available memory to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough available memory to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 1 GB" result="FAILED" syntax="wiki"><![CDATA[Increase the available memory to 1 GB or more to install Oracle Fusion Middleware 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A11121" mode="VERIFY" name="SOA Available Memory?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A11100" result="FAILED" value="Available memory size required"><![CDATA[Requires the available memory size.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $FRE
call setHcveResult(cond(\
  expr('>=',$FRE,4194304),'Available',\
                          'Need at least 4 GB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that your system has sufficient available memory to install Oracle Service Oriented Architecture (SOA).]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough available memory to install Oracle SOA.]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 4 GB" result="FAILED" syntax="wiki"><![CDATA[Increase the available memory to 4 GB or more to install Oracle SOA. For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A11122" mode="VERIFY" name="BAM Available Memory?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A11100" result="FAILED" value="Available memory size required"><![CDATA[Requires the available memory size.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $FRE
call setHcveResult(cond(\
  expr('>=',$FRE,4194304),'Available',\
                          'Need at least 4 GB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that your system has sufficient available memory to install Oracle BAM.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough available memory to install Oracle BAM.]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 4 GB" result="FAILED" syntax="wiki"><![CDATA[Increase the available memory to 4 GB or more to install Oracle BAM. For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A12000" mode="RECORD" name="tmp Space (KB)">
<sdp_command type="RDA"><![CDATA[
var $dir = nvl(getEnv('TMP'),getEnv('TMPDIR'),'/tmp')
var $TMP = undef
call setHcveVariable('$TMP')
if !testDir('d',$dir)
 return setHcveResult('Cannot access tmp directory')
var $TMP = get_df($dir)
call setHcveResult($TMP)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the space available in the temporary directory, measured in KB.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A12011" mode="VERIFY" name="Space in tmp?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A12000" result="FAILED" value="Temporary space required"><![CDATA[Requires the available temporary space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $TMP
call setHcveResult(cond(\
  expr('>=',$TMP,153600),'Available',\
                         'Need at least 150 MB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that there is sufficient space available for storing temporary files during the Oracle Fusion Middleware 11g Release 1 (11.1.1) installation.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has sufficient temporary space available to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 150 MB" result="FAILED" syntax="wiki"><![CDATA[Increase the available temporary space to 150 MB or more to install Oracle Fusion Middleware 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A12021" mode="VERIFY" name="OIM Space in tmp?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A12000" result="FAILED" value="Temporary space required"><![CDATA[Requires the available temporary space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $TMP
call setHcveResult(cond(\
  expr('>=',$TMP,81920),'Available',\
                        'Need at least 80 MB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that there is sufficient space available for storing temporary files during the Oracle Identity Management 11g Release 1 (11.1.1) installation.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has sufficient temporary space available to install Oracle Identity Management 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 80 MB" result="FAILED" syntax="wiki"><![CDATA[Increase the available temporary space to 80 MB or more to install Oracle Identity Management 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Guide for Oracle Identity Management 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A12100" mode="RECORD" name="Swap Space (KB)">
<sdp_command type="RDA"><![CDATA[var $SWP = undef
call setHcveVariable('$SWP')
if !testFile('x','/usr/sbin/swap')
 return setHcveResult('Cannot access /usr/sbin/swap')
var $SWP = field('\s+',10,grepCommand('/usr/sbin/swap -s','.','f'))
call setHcveResult($SWP)]]></sdp_command>
<sdp_description><![CDATA[This rule retrieves the available swap space, measured in KB.]]></sdp_description>
</sdp_rule>

<sdp_rule id="A12111" mode="VERIFY" name="Swap Space?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A12100" result="FAILED" value="Swap space required"><![CDATA[Requires the available swap space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $SWP
call setHcveResult(cond(\
  expr('>=',$SWP,524288),'Available',\
                         'Need at least 512 MB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that there is sufficient Swap available for the Oracle Fusion Middleware 11g Release 1 (11.1.1) installation.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough swap to install Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 512 MB" result="FAILED" syntax="wiki"><![CDATA[Increase the swap to 512 MB or more to install Oracle Fusion Middleware 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A12121" mode="VERIFY" name="OIM Swap Space?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A12100" result="FAILED" value="Swap space required"><![CDATA[Requires the available swap space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $SWP
call setHcveResult(cond(\
  expr('>=',$SWP,153600),'Available',\
                         'Need at least 150 MB'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that there is sufficient swap available for the Oracle Identity Management 11g Release 1 (11.1.1) installation.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Available" result="PASSED"><![CDATA[The system has enough swap to install Oracle Identity Management 11g Release 1 (11.1.1).]]></sdp_action>
<sdp_action condition="=~" minimum="Need at least 150 MB" result="FAILED" syntax="wiki"><![CDATA[Increase the swap to 150 MB or more to install Oracle Identity Management 11g Release 1 (11.1.1). For more information, see ''Oracle Fusion Middleware Installation Guide for Oracle Identity Management 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A12311" mode="VERIFY" name="Monitor Colors">
<sdp_command type="RDA"><![CDATA[call loadCommand('/usr/X11R6/bin/xdpyinfo 2>&1')
var @dpt = grepLastFile('depths')
call setHcveResult(cond(\
  grep(@dpt,'8','f'),              'Adequate',\
  not(defined(getEnv('DISPLAY'))), 'DISPLAY not set',\
  grepLastFile('unable','f'),      'Cannot open DISPLAY',\
                                   'Need at least 256 colors'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that the monitor has sufficient colors required for installing Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The monitor has enough colors.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|Need at least 256 colors|Use a display with 256 colors.|
|DISPLAY not set|Set the DISPLAY environment variable to a valid display.|
|Cannot open DISPLAY|Set the DISPLAY environment variable to a correct display.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13101" mode="VERIFY" name="OS Certified?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $OS_NAM,$OS_VER,$OS_BIT
call setHcveResult(check(\
  $OS_VER,'^2\.(5\.1|6|7|8)$',\
               concat('Solaris ',$OS_VER,' is not Certified with Fusion Middleware 11g Release 1'),\
          '^2\.(9|10)$',\
            cond(expr('==',$OS_BIT,32),concat(\
               'Fusion Middleware 11g Release 1 is not certified for 32bit Solaris ',$OS_VER),\
               'Certified with Fusion Middleware 11g Release 1'),\
               concat($OS_NAM,' OS version not determinable')))
]]></sdp_command>
<sdp_description><![CDATA[This rule verifies the correct version of Solaris required for installing Oracle Fusion Middleware 11g Release 1 (11.1.1).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Certified with Fusion Middleware 11g Release 1" result="PASSED"><![CDATA[The correct version of Solaris is installed on your server.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[!!SHOWSTOPPER!!
You do not have the correct version of Solaris installed on your server. For the certified versions of Solaris, see the ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)'' and My Oracle Support.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13201" mode="VERIFY" name="Patches for Solaris 9?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13004" minimum="2.9" result="SKIPPED" value="Not on Solaris 9"><![CDATA[Not a Solaris 9 system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13002" minimum="64" result="SKIPPED" value="Not a 64-bit operating system"><![CDATA[Not a 64-bit operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var @tbl = ()
macro check_patch
{var (\@tbl,@pch) = @arg
 loop $pch (@pch)
 {var ($flg,$err) = (true)
  var ($pch_num,$pch_lvl) = split('\-',$pch)
  if grepLastFile($pch_num,'f')
  {var %srt = ()
   if grepLastFile(concat('Patch: ',$pch_num,'\-'))
   {loop $key (last)
     var $srt{$key} = true
    var $pch_rev = field('\s+',1,keys(%srt,'KD'))
    next compare('ge',replace($pch_rev,'\-'),replace($pch,'\-'))
    var $err = concat('Patch [',$pch_rev,'] must be at level [',$pch,']')
   }
   loop $lin (grepLastFile(concat('Obsoletes:.*',$pch_num,'.*Requires:')))
   {var ($lvl) = match($lin,concat('.*Obsoletes:.*?',$pch_num,'\-(\d+)'))
    if compare('ge',$lvl,$pch_lvl)
    {var $flg = false
     break
    }
   }
   if $flg
    call push(@tbl,nvl($err,concat('Patch [',$pch_num,'] is not installed')))
  }
  else
   call push(@tbl,concat('Patch [',$pch_num,'] is not installed'))
 }
}
call loadCommand('/usr/bin/showrev -p')
call check_patch(\@tbl,'118558-22','112874-39','112760-05','114370-05')
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks for the OS patches required for the Oracle Fusion Middleware 11g for a 64-bit Solaris 9 system.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[All required OS patches are adequate. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Some of the required OS patches for the installation of Oracle Fusion Middleware 11g for a 64-bit Solaris 9 system were not met or found. Review the recommended OS patches from the ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)'' before installing the software.
|*Return Value*|*Action*|
|Patch ... is not installed|Verify that the required OS patches are installed.%BR%For Sun 2.9/5.9, 118558-22 112874-39 112760-05 114370-05|
|Patch ... must be at level ...|Verify that level of the required OS patches is equal to or higher than the specified level.%BR%For Sun 2.9/5.9, 118558-22 112874-39 112760-05 114370-05|
]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13202" mode="VERIFY" name="Patches for Solaris 10?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13004" minimum="2.10" result="SKIPPED" value="Not on Solaris 10"><![CDATA[Not a Solaris 10 system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13002" minimum="64" result="SKIPPED" value="Not a 64-bit operating system"><![CDATA[Not a 64-bit operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var @tbl = ()
macro check_patch
{var (\@tbl,@pch) = @arg
 loop $pch (@pch)
 {var ($flg,$err) = (true)
  var ($pch_num,$pch_lvl) = split('\-',$pch)
  if grepLastFile($pch_num,'f')
  {var %srt = ()
   if grepLastFile(concat('Patch: ',$pch_num,'\-'))
   {loop $key (last)
     var $srt{$key} = true
    var $pch_rev = field('\s+',1,keys(%srt,'KD'))
    next compare('ge',replace($pch_rev,'\-'),replace($pch,'\-'))
    var $err = concat('Patch [',$pch_rev,'] must be at level [',$pch,']')
   }
   loop $lin (grepLastFile(concat('Obsoletes:.*',$pch_num,'.*Requires:')))
   {var ($lvl) = match($lin,concat('.*Obsoletes:.*?',$pch_num,'\-(\d+)'))
    if compare('ge',$lvl,$pch_lvl)
    {var $flg = false
     break
    }
   }
   if $flg
    call push(@tbl,nvl($err,concat('Patch [',$pch_num,'] is not installed')))
  }
  else
   call push(@tbl,concat('Patch [',$pch_num,'] is not installed'))
 }
}
call loadCommand('/usr/bin/showrev -p')
call check_patch(\@tbl,'127111-02','137111-04')
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks for the OS patches required for the Oracle Fusion Middleware 11g for a 64-bit Solaris 10 system.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[All required OS patches are adequate. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Some of the required OS patches for the installation of Oracle Fusion Middleware 11g for a 64-bit Solaris 10 system were not met or found. Review the recommended OS patches from the ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)'' before installing the software.
|*Return Value*|*Action*|
|Patch ... is not installed|Verify that the required OS patches are installed.%BR%For Sun 2.10/5.10, 127111-02 137111-04|
|Patch ... must be at level ...|Verify that the level of the required OS patches is equal to or higher than the specified level.%BR%For Sun 2.10/5.10, 127111-02 137111-04|
]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13301" mode="VERIFY" name="Packages for Solaris 9?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13004" minimum="2.9" result="SKIPPED" value="Not on Solaris 9"><![CDATA[Not a Solaris 9 system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13002" minimum="64" result="SKIPPED" value="Not a 64-bit operating system"><![CDATA[Not a 64-bit operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var @tbl = ()
macro check_package
{var (\@tbl) = @arg
 call loadCommand('/usr/bin/pkginfo')
 var @pkg = ('arc','btool','hea','libC','libm','libms','sprot','too','i1of',\
             'i1cs','i15cs','xwfnt','sprox')
 loop $pkg (split('\s',concat('SUNW',join(' SUNW',@pkg))))
 {if not(grepLastFile($pkg,'f'))
   call push(@tbl,$pkg)
 }
}
call check_package(\@tbl)
call setHcveResult(cond(\
  scalar(@tbl),join("\012",@tbl),'All required OS packages are installed'))
]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that all required OS packages are installed for 64-bit Solaris 9 system.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="All required OS packages are installed" result="PASSED"><![CDATA[All required OS packages are installed. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Some of the required OS packages were not found. Check your installation.
|*Return Value*|*Action*|
|SUNWarc|``SUNWarc`` package must be installed.|
|SUNWbtool|``SUNWbtool`` package must be installed.|
|SUNWhea|``SUNWhea`` package must be installed.|
|SUNWi1of|``SUNWi1of`` package must be installed.|
|SUNWi1cs|``SUNWi1cs`` package must be installed.|
|SUNWi15cs|``SUNWi15cs`` package must be installed.|
|SUNWlibC|``SUNWlibC`` package must be installed.|
|SUNWlibm|``SUNWlibm`` package must be installed.|
|SUNWlibms|``SUNWlibms`` package must be installed.|
|SUNWsprot|``SUNWsprot`` package must be installed.|
|SUNWsprox|``SUNWsprox`` package must be installed.|
|SUNWtoo|``SUNWtoo`` package must be installed.|
|SUNWxwfnt|``SUNWxwfnt`` package must be installed.|]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13302" mode="VERIFY" name="Packages for Solaris 10?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13004" minimum="2.10" result="SKIPPED" value="Not on Solaris 10"><![CDATA[Not a Solaris 10 system]]></sdp_dependency>
<sdp_dependency condition="==" id="A13002" minimum="64" result="SKIPPED" value="Not a 64-bit operating system"><![CDATA[Not a 64-bit operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var @tbl = ()
macro check_package
{var (\@tbl) = @arg
 call loadCommand('/usr/bin/pkginfo')
 var @pkg = ('arc','btool','hea','libC','libm','libms','sprot','too','i1of',\
             'i1cs','i15cs','xwfnt')
 loop $pkg (split('\s',concat('SUNW',join(' SUNW',@pkg))))
 {if not(grepLastFile($pkg,'f'))
   call push(@tbl,$pkg)
 }
}
call check_package(\@tbl)
call setHcveResult(cond(\
  scalar(@tbl),join("\012",@tbl),'All required OS packages are installed'))
]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that all required OS packages are installed for a 64-bit Solaris 10 system.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="All required OS packages are installed" result="PASSED"><![CDATA[All required OS packages are installed. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Some of the required OS packages were not found. Check your installation.
|*Return Value*|*Action*|
|SUNWarc|``SUNWarc`` package must be installed.|
|SUNWbtool|``SUNWbtool`` package must be installed.|
|SUNWhea|``SUNWhea`` package must be installed.|
|SUNWi1of|``SUNWi1of`` package must be installed.|
|SUNWi1cs|``SUNWi1cs`` package must be installed.|
|SUNWi15cs|``SUNWi15cs`` package must be installed.|
|SUNWlibC|``SUNWlibC`` package must be installed.|
|SUNWlibm|``SUNWlibm`` package must be installed.|
|SUNWlibms|``SUNWlibms`` package must be installed.|
|SUNWsprot|``SUNWsprot`` package must be installed.|
|SUNWtoo|``SUNWtoo`` package must be installed.|
|SUNWxwfnt|``SUNWxwfnt`` package must be installed.|]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13401" mode="VERIFY" name="Motif Package?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[var ($lin) = grepCommand('/usr/bin/pkginfo -l SUNWmfrun','VERSION:','if')
var $ver = field('\s+',1,field('\,',0,$lin))
if compare('older',$ver,'2.1.0')
 call setHcveResult('Motif package older')
else
 call setHcveResult('Adequate')
]]></sdp_command>
<sdp_description><![CDATA[This rule checks that the correct Motif package is installed. This is required for Oracle Reports Server only. For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The correct version of the Motif package is installed.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[This is required for Oracle Oracle Reports Server only. Install the correct version of the Motif package. For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A13501" mode="VERIFY" name="Open File Limit?">
<sdp_dependencies>
<sdp_dependency condition="=~" id="A13000" minimum="solaris" result="SKIPPED" value="Not on Solaris"><![CDATA[Not a Solaris operating system]]></sdp_dependency>
<sdp_dependency condition="V&lt;" id="A13004" minimum="2.10" result="SKIPPED" value="Not required"><![CDATA[Not applicable on a Solaris 10 system]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $OS_VER
var ($lmt) = command('ulimit "-Hn"')
if !defined($lmt)
 return setHcveResult('Not found')
call setHcveResult(\
 cond(or(compare('eq',$lmt,'unlimited'),expr('>=',$lmt,4096)),\
      'Adequate',\
      'File descriptors hard limit is lesser than 4096'))]]></sdp_command>
<sdp_description><![CDATA[This rule checks that the limit of file descriptors is set to 4096 or higher. For more information about configuring this parameter, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''. This setting does not apply to Solaris 10.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[No action required]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[Set ``rlim_fd_max=4096`` or higher. ``ulimit -Hn`` must return value of ``4096`` or higher.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A14001" mode="VERIFY" name="Supported JVM?">
<sdp_command type="RDA"><![CDATA[call setHcveVariable('$MAX_VER')
if !findCommand('java')
 return setHcveResult('No JVM')
call loadCommand(concat(last,' -version 2>&1'))
var ($str) = grepLastFile('java version "(.*)"','f1')
var $ver = version(replace($str,'[\-\_]','.',true))
if !$ver
 call setHcveResult('No version')

if grepLastFile('JRockit','f')
 var @tbl = (['11.1.1.1','1.6.0.05'],\
             ['11.1.1.2','1.6.0.14'],\
             ['11.1.1.3','1.6.0.17'],\
             ['11.1.1.4','1.6.0.22'],\
             ['11.1.1.5','1.6.0.24'])
else
 var @tbl = (['11.1.1.1','1.6.0.11'],\
             ['11.1.1.2','1.6.0.14'],\
             ['11.1.1.3','1.6.0.18'],\
             ['11.1.1.4','1.6.0.21'],\
             ['11.1.1.5','1.6.0.24'])

var $txt = concat('[',$str,'] too old')
loop $rec (@tbl)
{if !compare('valid',$ver,$rec->[1])
  return setHcveResult($txt)
 var $txt = concat('[',$str,'] valid for ',$MAX_VER = $rec->[0],' and earlier')
}
return setHcveResult('Adequate')
]]></sdp_command>
<sdp_description><![CDATA[This rule checks whether the Java Virtual Machine (JVM) in the execution path is supported.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="No JVM" result="SKIPPED"><![CDATA[No Java Virtual Machine detected in the execution path]]></sdp_action>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[No action required]]></sdp_action>
<sdp_action condition="=~" minimum=" valid for " result="WARNING"><![CDATA[The JVM installed is only supported for Fusion Middleware version ${MAX_VER} and earlier.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too old|Make sure that the minimum required version or later for the Fusion Middleware version you wish to install is used.|
|No version|Cannot verify the version of the Java Virtual Machine. Make sure that the minimum required version or later for the Fusion Middleware version you wish to install is used.|]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A15001" mode="VERIFY" name="Processor Speed">
<sdp_command type="RDA"><![CDATA[
if !testFile('x','/usr/sbin/psrinfo')
 return setHcveResult('Cannot access /usr/sbin/psrinfo')
var ($lin) = grepCommand('/usr/sbin/psrinfo -v','processor operates at','f')
var $MHZ = field('\s+',5,$lin)
call setHcveVariable('$MHZ')
]]></sdp_command>
<sdp_description><![CDATA[This rule gets the processor speed.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="^Cannot access" result="FAILED" syntax="wiki"><![CDATA[Grant execute permissions on ``/usr/sbin/psrinfo`` to the user who is logged in.]]></sdp_action>
<sdp_action result="PASSED"><![CDATA[No action is required.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A15501" mode="VERIFY" name="SOA Processor Speed?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A15001" minimum="PASSED" result="FAILED" value="Processor type required"><![CDATA[Requires the processor type.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MHZ
call setHcveResult($MHZ)]]></sdp_command>
<sdp_description><![CDATA[This rule checks for the processor speed for Service Oriented Architecture (SOA) installation type. The minimum requirement for the processor speed is 1.5 GHz.]]></sdp_description>
<sdp_actions>
<sdp_action condition=">=" minimum="1500" result="PASSED"><![CDATA[The minimum requirement for the processor speed is met.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[The processor speed must be 1.5 GHz or faster.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A15502" mode="VERIFY" name="BAM Processor Speed?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A15001" minimum="PASSED" result="FAILED" value="Processor type required"><![CDATA[Requires the processor type.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MHZ
call setHcveResult($MHZ)]]></sdp_command>
<sdp_description><![CDATA[This rule checks for the processor speed for the BAM installation type. The minimum requirement for the processor speed is 1.5 GHz.]]></sdp_description>
<sdp_actions>
<sdp_action condition=">=" minimum="1500" result="PASSED"><![CDATA[The minimum requirement for the processor speed is met.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[The processor speed must be 1.5 GHz or faster.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A15503" mode="VERIFY" name="WLS Processor Speed?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A15001" minimum="PASSED" result="FAILED" value="Processor type required"><![CDATA[Requires the processor type.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MHZ
call setHcveResult($MHZ)]]></sdp_command>
<sdp_description><![CDATA[This rule checks for the processor speed for the Oracle WebLogic Server (WLS) installation type. The minimum requirement for the processor speed is 1 GHz.]]></sdp_description>
<sdp_actions>
<sdp_action condition=">=" minimum="1000" result="PASSED"><![CDATA[The minimum requirement for the processor speed is met.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[The processor speed must be 1 GHz or faster.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A18000" mode="VERIFY" name="Disk Space (KB)">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A00001" minimum="RECORD" result="FAILED"><![CDATA[Requires Middleware home.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $MIDDLEWARE_HOME
if !length($MIDDLEWARE_HOME)
 return setHcveResult('NotSpecified')
if !testDir('d',$MIDDLEWARE_HOME)
 return setHcveResult('NoAccess')
var $DSK = get_df($MIDDLEWARE_HOME)
call setHcveResult($DSK)
var $DSK = expr('/',$DSK,1024)
call setHcveVariable('$DSK')
]]></sdp_command>
<sdp_description><![CDATA[This rule determines the amount of disk space available in the Middleware home directory.]]></sdp_description>
<sdp_actions>
<sdp_action condition="N" result="PASSED"><![CDATA[HCVE can determine the available space in the Middleware home. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="NotSpecified" result="PASSED"><![CDATA[No Middleware home specified]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[HCVE cannot determine the free space because ``${MIDDLEWARE_HOME}`` is not a valid directory.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A18001" mode="VERIFY" name="SOA Disk Space?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A18000" result="SKIPPED" value="Disk space required"><![CDATA[Requires disk space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $DSK
call setHcveResult(cond(expr('>=',$DSK,15360),'Adequate',\
                                              'NoSpace'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that the amount of disk space in the Middleware home directory is sufficient for installing Oracle SOA install type.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The Middleware home has sufficient disk space to install an Oracle SOA install type. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Installing an Oracle SOA install type requires 15 MB.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A18002" mode="VERIFY" name="BAM Disk Space?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A18000" result="SKIPPED" value="Disk space required"><![CDATA[Requires disk space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $DSK
call setHcveResult(cond(expr('>=',$DSK,15360),'Adequate',\
                                              'NoSpace'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that the amount of disk space in the Middleware home directory is sufficient for installing an Oracle BAM install type.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The Middleware home has sufficient disk space to install an Oracle BAM install type. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Installing an Oracle SOA install type requires 15 MB.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A18004" mode="VERIFY" name="PFRD Disk Space?">
<sdp_dependencies>
<sdp_dependency condition="N" id="A18000" result="SKIPPED" value="Disk space required"><![CDATA[Requires disk space.]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[import $DSK
call setHcveResult(cond(expr('>=',$DSK,15728640),'Adequate',\
                                                 'NoSpace'))]]></sdp_command>
<sdp_description><![CDATA[This rule verifies that the amount of disk space in the Middleware home directory is sufficient for installing a Portal, Forms, Reports, and Discoverer install type.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The Middleware home has sufficient disk space to install a Portal, Forms, Reports, and Discoverer install type. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[Installing a Portal, Forms, Reports, and Discoverer install type requires 15 GB.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A20000" mode="RECORD" name="RCU Connect String">
<sdp_command default="-" type="PROMPT" variable="$ORACLE_SID"><![CDATA[Enter "-" to skip database checks or enter [hostname]:[DB port number]::[DB service name] to connect to the database where the Repository Creation Utility (RCU) will create the schemas.]]></sdp_command>
<sdp_command type="RDA"><![CDATA[import $ORACLE_SID
if !match($ORACLE_SID,'^\s*\-?\s*$')
 call setHcveParameter('CHECK.DB',true)
call setHcveResult($ORACLE_SID)
]]></sdp_command>
<sdp_command type="GROUP" exec="CHECK.DB">DBChecks</sdp_command>
<sdp_description><![CDATA[This rule prompts the user to enter the connect string for the database where the Repository Creation Utility (RCU) will create the schemas.]]></sdp_description>
</sdp_rule>
</sdp_group>

<sdp_group exec="0" id="DBChecks" name="Database Checks">
<sdp_rule id="A21000" mode="VERIFY" name="Database Access">
<sdp_dependencies>
<sdp_dependency id="A01002"/>
<sdp_dependency id="A01003"/>
<sdp_dependency id="A01004"/>
<sdp_dependency id="A01005"/>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
import $ORACLE_SID,$USERID,$SYSDBA,$DFT_TSP,$TMP_TSP

var $sid = $ORACLE_SID
var $usr = $USERID
if compare('eq',$usr,'/')
 var ($usr,$pwd,$dba) = ('','',1)
else
{if compare('eq',$SYSDBA,'N')
  var $dba = false
 else
  var $dba = true
 if hasSqlPassword($usr,$sid)
  var $pwd = undef
 else
  var $pwd = askPassword(concat('Enter ',$usr,'@',$sid,' user password:'))
}
call setSqlLogin($usr,$pwd,$sid,$dba)
if testSql()
 call setHcveResult(concat('Connection error: [',getSqlMessage(),']'))
else
{set $sql
 {SELECT 'Banner=' || banner
 " FROM v$version
 " WHERE banner like '%Oracle%';
 "SELECT 'Version=' || version
 " FROM v$instance;
 "SELECT lower(name) || '=' || value
 " FROM v$parameter
 " WHERE lower(name) IN ('aq_tm_processes',
 "                       'db_block_size',
 "                       'db_recovery_file_dest_size',
 "                       'dml_locks',
 "                       'job_queue_processes',
 "                       'max_commit_propagation_delay',
 "                       'open_cursors',
 "                       'processes',
 "                       'remote_login_passwordfile',
 "                       'sga_max_size',
 "                       'sga_target',
 "                       'shared_pool_size',
 "                       'sessions',
 "                       'session_cached_cursors',
 "                       'session_max_open_files',
 "                       'undo_management');
 "SELECT 'CharacterSet=' || value
 " FROM nls_database_parameters
 " WHERE upper(parameter) = 'NLS_CHARACTERSET';
 }
 if match($DFT_TSP,'^[A-Za-z0-9][\w\$\#]{0,29}$')
 {append $sql
  {SELECT 'DefaultSpace=' || SUM(bytes)
  " FROM dba_free_space
  " WHERE tablespace_name = UPPER(':1')
  " GROUP BY tablespace_name;
  }
 }
 if match($TMP_TSP,'^[A-Za-z0-9][\w\$\#]{0,29}$')
 {append $sql
  {SELECT 'TempSpace=' || SUM(x)
  " FROM (SELECT bytes_cached x
  "        FROM v$temp_extent_pool
  "        WHERE tablespace_name = UPPER(':2')
  "       UNION
  "       SELECT bytes_free x
  "        FROM v$temp_space_header
  "        WHERE tablespace_name = UPPER(':2')
  "      );
  }
 }
 call setHcveResult(cond(loadSql(bindSql($sql,$DFT_TSP,$TMP_TSP)),'OK',\
                         concat('Load error: [',getSqlMessage(),']')))
}
]]></sdp_command>
<sdp_description><![CDATA[This rule gets the database information.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="OK" result="PASSED"><![CDATA[HCVE has loaded the required information from the database. No action required.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[Take appropriate actions to fix the reported error.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21001" mode="VERIFY" name="Database Edition?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $str = value(grepLastSql('Banner=','f'))
if match($str,'enterprise',true)
 call setHcveResult('Enterprise')
elsif match($str,'standard',true)
 call setHcveResult('Standard')
else
 call setHcveResult(concat('[',$str,'] not a certified edition'))]]></sdp_command>
<sdp_description><![CDATA[This rule checks the database edition.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="^(Enterprise|Standard)$" result="PASSED"><![CDATA[The database edition is certified. No action required.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The database edition is not certified. The Repository Creation Utility requires that the database is an Enterprise or a Standard edition.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21002" mode="VERIFY" name="Database Version?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $ver = value(grepLastSql('Version=','f'))
if compare('OLDER',$ver,'11')
{if compare('older',$ver,'10.2.0.4')
  call setHcveResult(concat('[',$ver,'] too old'))
 else
  call setHcveResult('Adequate')
}
else
{if compare('older',$ver,'11.1.0.7')
  call setHcveResult(concat('[',$ver,'] too old'))
 else
  call setHcveResult('Adequate')
}
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the database version.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The database version is certified. No action required.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The database version is not certified. The Repository Creation Utility requires the database version to be 10.2.0.4 or 11.1.0.7 or later.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21003" mode="VERIFY" name="Database Character Set?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
call setHcveResult(value(grepLastSql('CharacterSet=','f')))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the database character set.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="AL32UTF8" result="PASSED"><![CDATA[The database character set is certified. No action required.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The Repository Creation Utility requires ``AL32UTF8`` as database character set.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21004" mode="VERIFY" name="Shared Pool Size?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $tgt = value(grepLastSql('sga_target=','f'))
if expr('>',$tgt,0)
{var $siz = value(grepLastSql('shared_pool_size=','f'))
 if expr('>',$siz,0)
 {if expr('>',$siz,150994944)
   call setHcveResult('Adequate')
  else
   call setHcveResult(concat('[',$siz,'] too small'))
 }
 else
  call setHcveResult('InternallyDetermined')
}
else
 call setHcveResult('NoSGATarget')
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the Shared Pool size.]]></sdp_description>
<sdp_actions>
<sdp_action condition="=~" minimum="Adequate|InternallyDetermined" result="PASSED"><![CDATA[The shared pool size is set to correct value or is determined internally. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="NoSGATarget" result="FAILED"><![CDATA[The target size of the shared global area (SGA) is not set. In this case, the default value for SGA size is 32 MB for 32-bit platforms and 84 MB for 64-bit platforms. This is less than the required value. See the respective Oracle Database reference guide for taking an appropriate action.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[Increase the ``shared_pool_size`` to 147456 KB or more.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21005" mode="VERIFY" name="SGA Maximum Size?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
call setHcveResult(value(grepLastSql('sga_max_size=','f')))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the maximum size of the shared global area (SGA).]]></sdp_description>
<sdp_actions>
<sdp_action condition=">=" minimum="150994944" result="PASSED"><![CDATA[The minimum requirement for the maximum size of the shared global area is met.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[The minimum requirement for the maximum size of the shared global area is 147456 KB.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A21006" mode="VERIFY" name="Block Size?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
call setHcveResult(value(grepLastSql('db_block_size=','f')))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the database blocks size.]]></sdp_description>
<sdp_actions>
<sdp_action condition=">=" minimum="8192" result="PASSED"><![CDATA[The minimum requirement for the database block size is met.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[The minimum requirement for the database block size is 8 KB.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22101" mode="VERIFY" name="MDS Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Metadata Services (MDS).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Metadata Services. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Metadata Services.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22105" mode="VERIFY" name="Metadata Services Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for Metadata Services.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for Metadata Services. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 50 MB for Metadata Services.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22121" mode="VERIFY" name="BAM Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for BAM.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for BAM. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for BAM.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22125" mode="VERIFY" name="BAM Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,20971520)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for BAM.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for BAM. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 20 MB for BAM.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22141" mode="VERIFY" name="SOA Infrastructure Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for SOA Infrastructure.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for SOA Infrastructure. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for SOA Infrastructure.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22145" mode="VERIFY" name="SOA Infrastructure Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,20971520)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for SOA Infrastructure.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for SOA Infrastructure. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 20 MB for SOA Infrastructure.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22151" mode="VERIFY" name="SOA Infrastructure Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}

call check_min(\@tbl,'processes',200)
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for SOA Infrastructure.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for processes|Set the value of ``processes`` to 200 or higher.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22161" mode="VERIFY" name="Audit Services Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Audit Services.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Audit Services. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Audit Services.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22165" mode="VERIFY" name="Audit Services Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for Audit Services.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for Audit Services. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 50 MB for Audit Services.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22191" mode="VERIFY" name="OID Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}

var @tbl = ()
call check_min(\@tbl,'processes',500)
call check_min(\@tbl,'open_cursors',500)
call check_min(\@tbl,'session_cached_cursors',100)
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for Oracle Internet Directory (OID).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for processes|Set the value of ``processes`` to 500 or higher.|
|... too low for open_cursors|Set the value of ``open_cursors`` to 500 or higher.|
|... too low for session_cached_cursors|Set the value of ``session_cached_cursors`` to 100 or higher.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22211" mode="VERIFY" name="OIF Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}

var @tbl = ()
call check_min(\@tbl,'processes',500)
call check_min(\@tbl,'open_cursors',500)
call check_min(\@tbl,'session_cached_cursors',100)
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for Oracle Identity Federation (OIF).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for processes|Set the value of ``processes`` to 500 or higher.|
|... too low for open_cursors|Set the value of ``open_cursors`` to 500 or higher.|
|... too low for session_cached_cursors|Set the value of ``session_cached_cursors`` to 100 or higher.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22221" mode="VERIFY" name="WebCenter Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for WebCenter.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for WebCenter. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for WebCenter.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22225" mode="VERIFY" name="WebCenter Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,20971520)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for WebCenter.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for WebCenter. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 20 MB for WebCenter.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22231" mode="VERIFY" name="WebCenter Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}

call check_min(\@tbl,'processes',300)
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for WebCenter.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for processes|Set the value of ``processes`` to 300 or higher.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22241" mode="VERIFY" name="Discussions Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Discussions.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Discussions. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Discussions.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22245" mode="VERIFY" name="Discussions Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,20971520)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for Discussions.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for Discussions. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 20 MB for Discussions.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22261" mode="VERIFY" name="Wiki/Blog Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Wiki/Blog.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Wiki/Blog. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Wiki/Blog.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22265" mode="VERIFY" name="Wiki/Blog Temp Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('TempSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,20971520)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the temporary tablespace space available for Wiki/Blog.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The temporary tablespace has sufficient free space for Wiki/Blog. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the temporary tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the temporary tablespace is 20 MB for Wiki/Blog.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22301" mode="VERIFY" name="Discoverer (Relational) Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Discoverer (Relational).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Discoverer (Relational). No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Discoverer (Relational).]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22321" mode="VERIFY" name="Discoverer (OLAP) Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Discoverer (OLAP).]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Discoverer (OLAP). No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Discoverer (OLAP).]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22341" mode="VERIFY" name="Content Server Default Tablespace?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
var $val = value(grepLastSql('DefaultSpace=\s*\d','f'))
if !?$val
 call setHcveResult('Not found')
elsif expr('>=',$val,52428800)
 call setHcveResult('Adequate')
else
 call setHcveResult(concat('[',$val,'] too small'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the default tablespace space available for Content Server.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The default tablespace has sufficient free space for Content Server. No action required.]]></sdp_action>
<sdp_action condition="==" minimum="Not found" result="FAILED"><![CDATA[Check the validity of the default tablespace name provided.]]></sdp_action>
<sdp_action result="FAILED"><![CDATA[The minimum free space required for the default tablespace is 50 MB for Content Server.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22355" mode="VERIFY" name="Content Server Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}
macro check_val
{var (\@tbl,$nam,$ref) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !compare('eq',$val,$ref)
  call push(@tbl,concat('[',$val,'] invalid for ',$nam))
}

var @tbl = ()
call check_min(\@tbl,'aq_tm_processes',1)
call check_min(\@tbl,'db_recovery_file_dest_size',2147483648)
call check_min(\@tbl,'dml_locks',200)
call check_min(\@tbl,'job_queue_processes',10)
call check_val(\@tbl,'max_commit_propagation_delay',0)
call check_min(\@tbl,'open_cursors',400)
call check_min(\@tbl,'processes',250)
call check_val(\@tbl,'remote_login_passwordfile','EXCLUSIVE')
call check_min(\@tbl,'session_max_open_files',50)
call check_min(\@tbl,'sessions',40)
call check_val(\@tbl,'undo_management','AUTO')
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for Content Server.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for aq_tm_processes|Set the value of ``aq_tm_processes`` to 1 or higher.|
|... too low for db_recovery_file_dest_size|Set the value of ``db_recovery_file_dest_size`` to 2147483648 or higher.|
|... too low for dml_locks|Set the value of ``dml_locks`` to 200 or higher.|
|... too low for job_queue_processes|Set the value of ``job_queue_processes`` to 10 or higher.|
|... invalid for max_commit_propogation_delay|Set the value of ``max_commit_propogation_delay`` to ``0``.|
|... too low for open_cursors|Set the value of ``open_cursors`` to 400 or higher.|
|... too low for processes|Set the value of ``processes`` to 250 or higher.|
|... invalid for remote_login_passwordfile|Set the value of ``remote_login_passwordfile`` to ``EXCLUSIVE``.|
|... too low for session_max_open_files|Set the value of ``session_max_open_files`` to 50 or higher.|
|... too low for sessions|Set the value of ``sessions`` to 40 or higher.|
|... invalid for undo_managements|Set the value to ``AUTO``.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>

<sdp_rule id="A22371" mode="VERIFY" name="OIM Init Parameters?">
<sdp_dependencies>
<sdp_dependency condition="IS" id="A21000" minimum="PASSED" result="SKIPPED" value="No database access"><![CDATA[No database access]]></sdp_dependency>
</sdp_dependencies>
<sdp_command type="RDA"><![CDATA[
macro check_min
{var (\@tbl,$nam,$min) = @arg
 var $val = value(grepLastSql(concat($nam,'='),'f'))
 if !expr('>=',$val,$min)
  call push(@tbl,concat('[',$val,'] too low for ',$nam))
}

call check_min(\@tbl,'processes',500)
call setHcveResult(cond(scalar(@tbl),join("\012",@tbl),'Adequate'))
]]></sdp_command>
<sdp_description><![CDATA[This rule checks the init parameters for Oracle Identity Management.]]></sdp_description>
<sdp_actions>
<sdp_action condition="==" minimum="Adequate" result="PASSED"><![CDATA[The init parameters are set correctly. No action required.]]></sdp_action>
<sdp_action result="FAILED" syntax="wiki"><![CDATA[|*Return Value*|*Action*|
|... too low for processes|Set the value of ``processes`` to 500 or higher.|
For more information, see ''Oracle Fusion Middleware Installation Planning Guide 11g Release 1 (11.1.1)''.]]></sdp_action>
</sdp_actions>
</sdp_rule>
</sdp_group>
</sdp_content>
</sdp_diaglet>
