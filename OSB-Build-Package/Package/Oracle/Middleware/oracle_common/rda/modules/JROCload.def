# JROCload.def: Collects Oracle JRockit Reports
# $Id: JROCload.def,v 1.5 2012/01/03 13:34:42 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/JROCload.def,v 1.5 2012/01/03 13:34:42 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

JROCload - Collects Oracle JRockit Reports

=head1 DESCRIPTION

=head2 jrockit - Oracle JRockit

This module gathers reports generated by the Oracle JRockit tool during the
last 15 days.

=cut

debug ' Inside LOAD module, gathering JRockit tool reports'
report jrockit

# Set the abbreviation and purge old reports
call setAbbr('JROCKIT')
call purge('E','.',15,0)

# Collect tools reports
prefix
{write '---+ Oracle JRockit Reports'
 write '| *Process Identifier*| *Size*|*Last Modification*|'
}
var $pat = concat('^',${CUR.PREFIX},'(\d+)_result\.txt$')
loop $rpt (grepDir(${OUT.E},$pat,'it'))
{var $fil = catFile(${OUT.E},$rpt)
 var ($pid) = match($rpt,$pat,true)
 write '| [[extern/',replace($rpt,'\.txt$','.htm'),'][_blank][',$pid,']]| ',\
       getSize($fil),'|',getLastModify($fil,'%d-%b-%Y&nbsp;%H:%M:%S'),' |'
}
if isCreated(true)
 toc '2:[[',getFile(),'][rda_report][Oracle JRockit]]'

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
