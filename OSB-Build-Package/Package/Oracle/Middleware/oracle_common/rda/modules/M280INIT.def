# M280INIT.def: Collects init.d Scripts
# $Id: M280INIT.def,v 1.4 2012/04/02 07:29:18 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/M280INIT.def,v 1.4 2012/04/02 07:29:18 mschenke Exp $
#
# Change History
# 20120330  MSC  Extend the do_collect_dir macro.

=head1 NAME

M280INIT - Collects init.d Scripts

=head1 DESCRIPTION

Collects scripts from F<init.d> directories.

=cut

use Mrc

# Initialization
var $VALIDATE = true
keep $VALIDATE

section begin

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'

run XPLRlib('init')

# -----------------------------------------------------------------------------
# XPLR_init section
# -----------------------------------------------------------------------------

section XPLR_init

# Validate the execution context
if !${XPLR_GLOBAL:true}
 return
call log_run('Processing INIT sections ...')

=head2 init - init.d Scripts

Collects the init.d scripts from the following directories:

=over 2

=item o F</etc/rc0.d>

=item o F</etc/rc1.d>

=item o F</etc/rc2.d>

=item o F</etc/rc3.d>

=item o F</etc/rcS.d>

=back

=cut

report init
title '---+!! init.d Scripts'
title $TOC
title '   * Links point to files that have been collected in their original \
            format. Opening them directly in your browser can present risks. \
            To prevent them, access the file outside the browser or use the \
            link to save them and use an adequate viewer.'
loop $sub ('rc0.d','rc1.d','rc2.d','rc3.d','rcS.d')
{var $dir = catDir('/etc',$sub)
 debug ' Inside INIT collection, collecting ',$dir,' files'
 prefix
 {write '---+ ',encode($dir)
  write '|*File Path*| *Size*|*Last Modified Date*|'
 }
 call do_collect_dir(concat('init/',$sub),$dir)
 if hasOutput(true)
  write $TOP
}
if isCreated(true)
 toc '2:[[',getFile(),'][rda_report][init.d Scripts]]'

=head1 SEE ALSO

L<S150XPLR.def|modules::S150XPLR>,
L<XPLRlib.def|modules::XPLRlib>

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
