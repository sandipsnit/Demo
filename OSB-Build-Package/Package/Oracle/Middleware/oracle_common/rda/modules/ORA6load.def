# ORA6load.def: Collects ORA-600 Reports
# $Id: ORA6load.def,v 2.5 2012/01/03 13:34:43 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/ORA6load.def,v 2.5 2012/01/03 13:34:43 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

ORA600load - Collects ORA-600 Reports

=head1 DESCRIPTION

=head2 ora600 - ORA-600 Tool

This module gathers reports generated by the ORA-600 tool.

=cut

debug ' Inside LOAD module, gathering ORA600 reports'
report ora600

# Get available reports
var ($pat,%ana,%trc) = ('Information Taken from ')
loop $ana (grepDir(${OUT.C},\
           concat('^',${CUR.GROUP},'_ORA600_\d+_summary.htm$'),'i'))
{# Get the trace name file
 var ($pid) = match($ana,'(\d+)_summary\.htm$',true)
 var $trc = concat(${CUR.GROUP},'_ORA600_',$pid,'_header.txt')
 var ($lin) = grepFile(catFile(${OUT.C},$trc),$pat,'f')
 var $src = field($pat,1,$lin)

 # Store the link when the trace file is found
 if $src
 {var $ana{$src} = $ana
  var $trc{$src} = replace($trc,'\.txt$','.htm')
 }
}

# Generate the report
prefix
{write '---+ ORA-600 Execution Results'
 write '|*Analysis Report*|*Trace File*|'
}
loop $trc (keys(%trc))
 write '|[[',$ana{$trc},'][_blank][ORA-600 Analysis]]|[[',$trc{$trc},\
       '][_blank][',$trc,']]|'
if isCreated(true)
 toc '2:[[',getFile(),'][rda_report][ORA-600 Tool]]'

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
