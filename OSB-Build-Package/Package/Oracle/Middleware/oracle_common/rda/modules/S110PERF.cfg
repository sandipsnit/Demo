# S110PERF.cfg: Collects Performance Information
# $Id: S110PERF.cfg,v 2.10 2012/06/08 15:08:35 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S110PERF.cfg,v 2.10 2012/06/08 15:08:35 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120608  KRA  Do not execute in parallel systematically.

###############################################################################
# Collect the performance data setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${GET_PERF}
dsc="Collects Performance Information"
frk=${PERF_PARALLEL:1}
req=S000INI
var=force_perf_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_perf_tests]
typ=B
alt=GET_PERF
dft=0
dsc="Are the performance tests required by the profile?"
nam=-
var=get_perf

[get_perf]
typ=B
dft=1
dsc="Gather performance data?"
nam=GET_PERF
var=PERF_FACTOR,PERF_LSOF,PERF_PSTREE,PERF_SAR_DATA,do_sysrq,PERF_TOP_PS,\
    PERF_TOP_ROOT,perf_stat

[GET_PERF]
typ=B
dft=${RDA_DEFAULT:1}
dsc="Gather performance data?"
inp="Do you want RDA to collect performance data (Y/N)?"
var=PERF_FACTOR,PERF_LSOF,PERF_PSTREE,PERF_SAR_DATA,do_sysrq,PERF_TOP_PS,\
    PERF_TOP_ROOT,perf_stat
lvl=1

[PERF_FACTOR]
typ=N
dft=1
dsc="Factor to apply to the SQL timeout in the PERF module"
err="The timeout factor must be a positive number"
inp="Enter the factor to apply to the SQL timeout in the PERF module"
lvl=1
ref="R[0,["
val=F

[PERF_LSOF]
typ=B
dft=0
dsc="List open files?"
fam=Unix
inp="Are open files to be listed (Y/N)?"
lvl=1

[PERF_PSTREE]
typ=B
dft=0
dsc="Gather process tree?"
fam=Unix
inp="Is the process tree to be gathered (Y/N)?"
lvl=1

[PERF_SAR_DATA]
typ=N
dft=0
dsc="Number of sar files to be gathered"
err="The number of files must be a positive integer"
fam=Unix
inp="Enter the number of sar files to gather"
lvl=1
ref="I[0,["
val=F

[do_sysrq]
typ=I
dft='eq:RDA.OS:linux'
dsc='Does this platorm support SysRq commands?'
nam=-
var=PERF_SYSRQ,check_sysrq

[PERF_SYSRQ]
typ=M
aft="\nSome SysRq commands can add a significant system load, that is, \
     enough to disrupt normal operations. Run the SysRQ commands only after \
     Oracle has advised you to do so.\n"
bef="Which SysRq commands can be executed when the data collection is done as \
     root:"
dft="0"
dsc="Collection selection"
err="Enter a number from 1 to 3"
inp="Enter the menu item number"
itm="1|sysrq-trigger -m and sysrq-trigger -w only|\
     2|sysrq-trigger -t, sysrq-trigger -m, and sysrq-trigger -w|\
     3|No SysRq commands"
lvl=1
mnu="<<N"
rsp="1|MW|2|TMW|3|0"
val=F

[check_sysrq]
typ=I
dft="match:PERF_SYSRQ:T"
dsc="Is a sleep setting required?"
nam=-
var=PERF_SYSRQ_SLEEP

[PERF_SYSRQ_SLEEP]
typ=N
dft=30
dsc="Sleep time after a 'sysrq-trigger -t' command"
err="The number of seconds must to be an integer greater than zero"
inp="Enter the time (in seconds) to sleep after executing 'sysrq-trigger -t'"
lvl=1
ref="I]0,["
val=E

[PERF_TOP_PS]
typ=N
dft=15
dsc="Number of top processes to report"
err="The number of processes must be an integer greater than zero"
inp="Enter the number of top processes to report"
lvl=1
ref="I]0,["
val=F

[PERF_TOP_ROOT]
typ=N
dft=5
dsc="Number of top root processes to report"
err="The number of processes must be an integer greater than zero"
inp="Enter the number of top root processes to report"
lvl=1
ref="I]0,["
val=F

[perf_stat]
typ=B
dft=1
dsc="Are the ADDM, AWR, ASH, or STATSPACK required by the profile?"
nam=-
var=addm_check

[addm_check]
typ=F
alt=awr_check
dft=${ORACLE_HOME}/rdbms/admin/addmrpti.sql
nam=-
var=PERF_AWR_USE

[awr_check]
typ=F
alt=ash_check
dft=${ORACLE_HOME}/rdbms/admin/awrrpti.sql
nam=-
var=PERF_AWR_USE

[ash_check]
typ=F
alt=statspack_check
dft=${ORACLE_HOME}/rdbms/admin/ashrpti.sql
nam=-
var=PERF_AWR_USE

[PERF_AWR_USE]
typ=B
alt=statspack_check
dft=1
dsc="Can ADDM, AWR, and ASH be used?"
inp="Can ADDM, AWR, and ASH be used (Y/N)?"
var=PERF_START_TIME,check_start

[statspack_check]
typ=F
dft=${ORACLE_HOME}/rdbms/admin/spreport.sql
nam=-
var=PERF_STATSPACK_USER,check_statuser

[PERF_STATSPACK_USER]
typ=T
clr='-'
dft=''
dsc="User in which Statspack package has been installed"
inp="Enter an Oracle User ID (userid only) which has Statspack installed"
ref="^([A-Za-z0-9][\w\$\#]{0,127})?$"
err="The user name should begin with an alphanumeric character and can have \
     only alphanumeric characters, '_', '$', or '#' thereafter. It can be \
     only 128 characters long."
val=E

[check_statuser]
typ=I
alt=perf_start_time,perf_end_time
dft="match:PERF_STATSPACK_USER:^[A-Za-z0-9][\w\$\#]{0,127}$"
dsc="Check if the start time must be specified"
nam=-
var=PERF_PARALLEL,PERF_START_TIME,check_start

[PERF_PARALLEL]
typ=B
dft=0
dsc="Parallel execution disabled"

[perf_start_time]
typ=T
dft=''
dsc="Start time for generation of the performance reports"
nam=PERF_START_TIME

[PERF_START_TIME]
typ=T
clr='-'
dft=''
dsc="Start time for generation of the performance reports"
err="Start time format should be DD-Mon-YYYY_HH24:MI"
hlp="If you want to generate the performance reports for a specific time \
     interval, enter the start and end times. Otherwise, RDA uses a default \
     time interval around the current time."
inp="Enter the time, when you want to start the collection of the performance \
     reports. When a dash '${clr}' is specified as input, current time is \
     considered. Start time should be in DD-Mon-YYYY_HH24:MI format."
lvl=1
ref="^([0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d)?$"
val=E

[check_start]
typ=I
alt=perf_end_time
dft="match:PERF_START_TIME:^[0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d$"
dsc="Check if the end time must be specified"
nam=-
var=PERF_END_TIME

[perf_end_time]
typ=T
dft=''
dsc="End time for generation of the performance reports"
nam=PERF_END_TIME

[PERF_END_TIME]
typ=T
clr='-'
dft=''
dsc="End time for generation of the performance reports"
err="End time format should be DD-Mon-YYYY_HH24:MI"
inp="Enter the time, when you want to end the collection of the performance \
     reports. When a dash '${clr}' is specified as input, current time is \
     taken as end time. End time should be in DD-Mon-YYYY_HH24:MI format."
lvl=1
ref="^([0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d)?$"
val=E

