# S204LOG.cfg: Collects Oracle Database Trace and Log Files
# $Id: S204LOG.cfg,v 2.10 2012/03/20 15:42:36 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S204LOG.cfg,v 2.10 2012/03/20 15:42:36 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120320  KRA  Change ALERT_TEXT default value to 1.

###############################################################################
# Collect the database trace/log setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${GET_DB_TRACE}
dsc="Collects Oracle Database Trace and Log Files"
req=S200DB
var=force_log_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_log_tests]
typ=B
alt=GET_DB_TRACE
dft=0
dsc="Are the Oracle database log/trace tests required by the profile?"
nam=-
var=get_db_trace

[get_db_trace]
typ=B
dft=1
dsc="Gather Oracle database log/trace files?"
nam=GET_DB_TRACE
var=oracle_bin,find_adrci,ALERT_TAIL,ALERT_SUMMARY,ALERT_PATTERN_COUNT,\
    alert_check_count,DB_TRACE_AGE,DB_TRACE_ERRORS,DB_TRACE_RATIO,\
    DB_TRACE_TRESHOLD,DB_TRACE_VOLUME,DB_TRACE_BDUMP,DB_TRACE_BVOLUME,\
    DB_TRACE_UDUMP,DB_TRACE_UVOLUME,DB_TRACE_DG,LOG_RUN_MERGE

[GET_DB_TRACE]
typ=B
dft=${RDA_DEFAULT:${DATABASE_LOCAL}}
dsc="Gather Oracle database log/trace files?"
inp="Do you want RDA to collect the Oracle database log/trace files (Y/N)?"
var=oracle_bin,find_adrci,ALERT_TAIL,ALERT_SUMMARY,ALERT_PATTERN_COUNT,\
    alert_check_count,DB_TRACE_AGE,DB_TRACE_ERRORS,DB_TRACE_RATIO,\
    DB_TRACE_TRESHOLD,DB_TRACE_VOLUME,DB_TRACE_BDUMP,DB_TRACE_BVOLUME,\
    DB_TRACE_UDUMP,DB_TRACE_UVOLUME,DB_TRACE_DG,LOG_RUN_MERGE
lvl=1

[oracle_bin]
typ=D
dft=${ORACLE_HOME}/bin
dsc=""
nam=-TMP_ORACLE_BIN

[find_adrci]
typ=F
alt=alert_text,log_incidents
dft="<<Search:TMP_ORACLE_BIN:r:^adrci(\.exe)?$"
dsc="Look for adrci in the $ORACLE_HOME/bin directory"
nam=-
var=ALERT_TEXT,LOG_INCIDENTS

[alert_text]
typ=B
dft=1
dsc="Do you want RDA to collect the alert.log in text format?"
nam=ALERT_TEXT

[ALERT_TEXT]
typ=B
dft=1
dsc="Do you want RDA to collect the alert.log in text format?"
inp="Do you want RDA to collect the alert.log in text format (Y/N)?"
lvl=1

[ALERT_TAIL]
typ=N
dft=30000
dsc="Maximum number of lines to extract from alert.log"
err="The number of lines must be an integer greater than zero"
inp="How many lines do you want RDA to extract from the end of the alert.log?"
lvl=1
ref="I]0,["
val=F

[ALERT_SUMMARY]
typ=B
dft=1
dsc="Do you want RDA to analyze the alert.log report?"
inp="Do you want RDA to analyze the alert.log report (Y/N)?"
lvl=1

[ALERT_PATTERN_COUNT]
typ=N
dft=0
dsc="Maximum number of latest rotated alert log files to be collected"
err="The number of files must be a positive integer"
inp="How many latest rotated alert log files matching a pattern are to be \
     collected? Zero disables any file search."
lvl=1
ref="I[0,["
val=F

[alert_check_count]
typ=I
alt=ALERT_FILE_PATTERN
dft="eq:ALERT_PATTERN_COUNT:0"
nam=-

[ALERT_FILE_PATTERN]
typ=F
dsc="List of additional alert log files"
end="."
err="The path is not absolute"
inp="Enter the absolute path of rotated alert.log files to collect or ${end} \
     to terminate the list.\nRDA searches in that directory, for files that \
     contain the basename in their name, and selects the \
     ${ALERT_PATTERN_COUNT} latest file(s)."
man="RDA repeats the question until you enters a period (.) to terminate the \
     list."
sep="|"
ref="A"
val=E

[DB_TRACE_AGE]
typ=N
dft=15
dsc="Age limit (in days) of the error trace files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the error trace files to be collected"
lvl=1
ref="R[0,["
val=F

[DB_TRACE_BDUMP]
typ=N
dft=0
dsc="Number of background trace files of each type to collect"
err="The number of trace files must be a positive integer"
inp="How many background process trace files of each type do you want RDA \
     to collect?"
lvl=1
ref="I[0,["
val=F

[DB_TRACE_BVOLUME]
typ=N
dft=100
dsc="Size limit (in MiB) for background trace files to be collected"
err="The number of MiB must be a positive number"
inp="Enter the size limit (in MiB) for background trace files to be \
     collected"
lvl=1
ref="R[0,["
val=F

[DB_TRACE_DG]
typ=N
dft=0
dsc="Age limit (in days) of the Data Guard user dump files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the Data Guard user dump files to be \
     collected"
lvl=1
ref="R[0,["
val=F

[DB_TRACE_ERRORS]
typ=N
dft=250
dsc="Number of error references extracted from the alert_log"
err="The number of references must be a positive integer"
inp="How many error references do you want RDA to consider?"
lvl=1
ref="I[0,["
val=F

[DB_TRACE_UDUMP]
typ=N
dft=0
dsc="Age limit (in days) of the user dump files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the user dump files to be collected"
lvl=1
ref="R[0,["
val=F

[DB_TRACE_UVOLUME]
typ=N
dft=25
dsc="Total size limit (in MiB) for collected user dumps"
err="The number of MiB must be a positive number"
inp="Enter the total size limit (in MiB) for collected user dumps"
lvl=1
ref="R[0,["
val=F

[DB_TRACE_RATIO]
typ=N
dft=10
dsc="Ratio to estimate contribution to collection volume"

[DB_TRACE_TRESHOLD]
typ=N
dft=20480
dsc="Minimum file size (in bytes) to apply the DB_TRACE_RATIO"

[DB_TRACE_VOLUME]
typ=N
dft=10
dsc="Total size limit (in MiB) for collected error trace files"
err="The number of MiB must be a positive number"
inp="Enter the total size limit (in MiB) for collected error trace files"
lvl=1
ref="R[0,["
val=F

[log_incidents]
typ=N
dft=0
dsc="Number of incidents to capture"
nam=LOG_INCIDENTS

[LOG_INCIDENTS]
typ=N
dft=10
dsc="Number of incidents to capture"
err="The number of incidents must be a positive integer"
inp="Enter the maximum number of incidents to capture"
lvl=1
ref="I[0,["
val=F

[LOG_RUN_MERGE]
typ=B
dft=0
dsc="Merge log events occurred between two time stamps?"
inp="Do you want RDA to merge log events that occurred between two time stamps \
     (Y/N)?"
lvl=1
var=LOG_MERGE_SET,LOG_MERGE_BEGIN,LOG_MERGE_END,LOG_MERGE_LINES,LOG_MERGE_FILES

[LOG_MERGE_SET]
typ=T
dsc="Result set name"
err="The result set name should start with a letter followed by alphanumeric \
     characters"
inp="Enter the result set name"
lvl=1
ref="^[A-Za-z]\w*$"
val=E

[LOG_MERGE_BEGIN]
typ=T
dsc="Start time"
err="Start time format should be DD-Mon-YYYY_HH24:MI:SS"
inp="Enter the start time from when you want to merge alert log and trace \
     files. The start time should be in DD-Mon-YYYY_HH24:MI:SS format."
lvl=1
ref="^[0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d:[0-5]\d$"
val=E

[LOG_MERGE_END]
typ=T
dsc="End time"
err="End time format should be DD-Mon-YYYY_HH24:MI:SS"
inp="Enter the end time from when you want to merge alert Log and trace \
     files. The end time should be in DD-Mon-YYYY_HH24:MI:SS format."
lvl=1
ref="^[0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d:[0-5]\d$"
val=E

[LOG_MERGE_LINES]
typ=N
dft=10
dsc="Maximum number of trace lines per record"
inp="Enter the maximum number of trace lines to insert per record"
lvl=1
ref="I[0,["
val=E

[LOG_MERGE_FILES]
typ=F
dsc="List of addition alert.log files matching a pattern"
end="."
err="The path is not absolute"
inp="Enter the absolute path of an alert.log file to collect or ${end} to \
     terminate the list.\nIn that directory, RDA searches for files that \
     contain the basename in their name."
lvl=1
man="RDA repeats the question until you enter a period (.) to terminate the \
     list."
sep="|"
ref="A"
val=E

