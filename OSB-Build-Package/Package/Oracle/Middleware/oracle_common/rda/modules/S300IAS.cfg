# S300IAS.cfg: Collects Web Server Information
# $Id: S300IAS.cfg,v 2.10 2012/08/29 13:46:08 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S300IAS.cfg,v 2.10 2012/08/29 13:46:08 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120828  KRA  Extend installation type detection.

###############################################################################
# Collect the Web Server setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${WEB_APPS_IN_USE}
dsc="Collects Web Server Information"
env=ORAWEB_HOME,ORAWEB_ADMIN
inv=get_install
req=S000INI,*+S310J2EE,*+S330SSO,*+S350WEBC
rpt=WEB_APPS_IN_USE,APACHE_TOP,WEB_BASE,WEB_DCD
ttl="Oracle Product Settings"
var=check_asit

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[get_install]
typ=P
alt=check_rcu
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_rcu
dft="match:TMP_INSTALL:^(Classic Application Server 11g|\
                         Oracle Forms and Reports 11g|\
                         Oracle Identity Management 11g|\
                         Oracle Portal, Forms, Reports and Discoverer 11g|\
                         Oracle SOA Suite 11g|\
                         Oracle WebCenter Portal Suite 11g|\
                         Oracle WebCenter Suite 11g|\
                         Oracle WebTier|\
                         SOA Application Server 11g|\
                         Webcenter Application Server 11g)"
dsc="Check for AS 11g install"
nam=-
var=no_ias

[check_rcu]
typ=D
alt=opmn_version
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=no_ias

[opmn_version]
typ=P
alt=ons_version
dft="find:version:oracle.opmn"
dsc="opmn version"
nam=-TMP_VERSION
var=check_version

[ons_version]
typ=P
alt=apache_top
dft="find:version:oracle.ons"
dsc="ons version"
nam=-TMP_VERSION
var=check_version

[check_version]
typ=I
alt=apache_top
dft="match:TMP_VERSION:^11\."
dsc="Check if it is AS 11g"
nam=-
var=no_ias

[no_ias]
typ=B
dft=0
dsc="Is Oracle Web Applications (OAS, WAS, iAS, AS) information requested?"
nam=WEB_APPS_IN_USE

[apache_top]
typ=D
alt=apache_top1
dft=${APACHE_TOP}
dsc="Apache top directory"
nam=-TMP_APACHE_TOP
var=check_asit

[apache_top1]
typ=P
alt=apache_top2
dft="find:location:oracle.apache2"
dsc="Apache top directory"
nam=-TMP_APACHE_TOP
var=check_asit

[apache_top2]
typ=P
alt=WEB_APPS_IN_USE
dft="find:location:oracle.apache"
dsc="Apache top directory"
nam=-TMP_APACHE_TOP
var=check_asit

[check_asit]
typ=I
alt=force_ias_tests
dsc="Check if IAS setup is needed?"
dft="exists:ASIT_INSTANCE_ROOT"
nam=-
var=no_ias

[force_ias_tests]
typ=B
alt=WEB_APPS_IN_USE
dft=0
dsc="Are the application server tests required by the profile?"
nam=-
var=web_apps_in_use

[web_apps_in_use]
typ=B
dft=1
dsc="Is Oracle Web Applications (OAS, WAS, iAS, AS) information requested?"
nam=WEB_APPS_IN_USE
var=APACHE_TOP1,HTTPD_CONF_LOCATION,ias_properties,ohs_version,\
    hcve_version_check,odl_version_check,ODL_TAIL

[WEB_APPS_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Oracle Web Applications (OAS, WAS, iAS, AS) information requested?"
inp="Do you want RDA to analyze Oracle Web Application Server, Oracle iAS, \
     Oracle 9iAS, or Oracle AS 10g (Y/N)?"
var=APACHE_TOP1,HTTPD_CONF_LOCATION,ias_properties,ohs_version,\
    hcve_version_check,odl_version_check,ODL_TAIL

[APACHE_TOP1]
typ=D
alt=APACHE_TOP2
dft=${APACHE_TOP}
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path for the Apache configuration and log files"
man="RDA considers the directory provided in a previous setup as the default \
     if that directory exists."
nam=APACHE_TOP
val=W

[APACHE_TOP2]
typ=D
alt=APACHE_TOP3
dft=${TMP_APACHE_TOP:${APACHE_TOP}}
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path for the Apache configuration and log files"
man="RDA considers the directory provided in a previous setup as the default \
     if that directory exists."
nam=APACHE_TOP
val=W

[APACHE_TOP3]
typ=D
alt=APACHE_TOP4
dft=${ORACLE_HOME}/ohs
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path for the Apache configuration and log files"
man="Next, RDA considers the default installation location in the Oracle home."
nam=APACHE_TOP
val=W

[APACHE_TOP4]
typ=D
alt=APACHE_TOP5
dft=${ORACLE_HOME}/Apache/Apache
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path for the Apache configuration and log files"
man="Next, RDA considers the default installation location in the Oracle home."
nam=APACHE_TOP
val=W

[APACHE_TOP5]
typ=D
dft=/home/oracle/iasprod/Apache/Apache
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path for the Apache configuration and log files"
man="Otherwise, RDA provides an example as default."
nam=APACHE_TOP
val=W

[HTTPD_CONF_LOCATION]
typ=F
dft=${APACHE_TOP}/conf/httpd.conf
dsc="Apache HTTP server configuration file location"
err="Warning: The specified file does not exist"
inp="Enter the absolute path for the Apache HTTP server configuration file"
lvl=1
val=W

#------------------------------------------------------------------------------
# DCM setting definitions
#------------------------------------------------------------------------------
[ias_properties]
typ=F
dft=${ORACLE_HOME}/config/ias.properties
dsc="Is ias.properties present ?"
nam=-TMP_IAS_PROPERTIES
var=dcm,ias_version

[dcm]
typ=D
dft=${ORACLE_HOME}/dcm
dsc='Is DCM present in the ORACLE_HOME ?'
nam=-
var=DCM_TAIL,RUN_DCMCTL

[DCM_TAIL]
typ=N
dft=20000
dsc="Default number of lines for tail operations"
err="The number of lines must be an integer greater than zero"
inp="Enter the default number of lines for tail operations"
lvl=9
man="RDA prompts for this information only if the DCM directory exists."
ref="I]0,["
val=F

[RUN_DCMCTL]
typ=B
dft=0
dsc="Is the complete DCM repository information requested?"
inp="Do you want RDA to analyze the complete DCM repository (Y/N)?"
hlp="When DCM commands are executed in AS 10.1.2 or 10.1.4, each Oracle HTTP \
     Server process is restarted gracefully (that is, restarts as the process \
     becomes idle). If restarting the Oracle HTTP Server is not acceptable, \
     then answer N to the prompt for the DCM repository analysis. \
     An alternative for AS 10.1.2 \
     is to install 10.1.2.2 or higher patch set and restart RDA."
man="RDA requests this question only when the DCM directory exists.\n\n\
     When DCM commands are executed in AS 10.1.2 or 10.1.4, each Oracle HTTP \
     Server process is restarted gracefully (that is, restarts as the process \
     becomes idle). If restarting the Oracle HTTP Server is not acceptable, \
     enter N to the prompt for the DCM repository analysis. An alternative \
     for AS 10.1.2 is to install the 10.1.2.2 or higher patch set \
     and restart RDA."
var=FORCE_DCMCTL

[FORCE_DCMCTL]
typ=B
dft=0
dsc="Can the DCM daemon be started?"
inp="Can the DCM daemon be started (Y/N)?"
lvl=1

[ias_version]
typ=T
dft="<<CONFIG:TMP_IAS_PROPERTIES:1:^Version=(.*)"
dsc="Application Server version"
nam=-TMP_IAS_VERSION

#------------------------------------------------------------------------------
# Application Server setting definitions
#------------------------------------------------------------------------------
[ohs_version]
typ=P
alt=ohs_version1
dft="find:version:oracle.apache2"
dsc="Application Server version"
nam=-TMP_OHS_VERSION

[ohs_version1]
typ=P
alt=ohs_version2
dft="find:version:oracle.apache"
dsc="Application Server version"
nam=-TMP_OHS_VERSION

[ohs_version2]
typ=P
alt=ohs_version3
dft="find:version:oracle.opmn"
dsc="Application Server version"
nam=-TMP_OHS_VERSION

[ohs_version3]
typ=P
alt=ohs_version4
dft="find:version:oracle.ons"
dsc="Application Server version"
nam=-TMP_OHS_VERSION

[ohs_version4]
typ=T
dft=${TMP_IAS_VERSION}
dsc="Application Server version contained in ias.properties"
nam=-TMP_OHS_VERSION

[hcve_version_check]
typ=I
alt=ORAWEB_ADMIN,ORAWEB_HOME,WEB_BASE,WEB_DCD
dft="match:TMP_OHS_VERSION:^(10\.1\.|9\.0\.[234])"
dsc="Check the Application Server version"
nam=-
var=IAS_HCVE_CHECKS

[IAS_HCVE_CHECKS]
typ=B
dft=${force_ias_tests}
dsc="Are Oracle Application Server preinstallation checks requested?"
fam=Unix
inp="Do you want RDA to execute Oracle Application Server preinstallation \
     checks (Y/N)?"
lvl=1

[odl_version_check]
typ=I
dft="match:TMP_OHS_VERSION:^10\.1\.3"
dsc="Check the Application Server for 10.1.3"
nam=-
var=ODL_QUERIES

[ODL_QUERIES]
typ=B
dft=1
dsc="Are ODL queries requested?"
hlp="ODL commands can take time. To disable ODL query collection, answer N \
     for this question."
inp="Do you want RDA to execute ODL queries (Y/N)?"
lvl=1
man="RDA asks this question for Oracle Application Server 10.1.3 only. \
     If ODL queries are taking too long to complete, enter N to the prompt \
     for the ODL query collection."

[ODL_TAIL]
typ=N
dft=65536
dsc="Number of bytes to be analyzed in ODL log file"
err="The number of bytes must be an integer greater than zero"
inp="How many bytes at the end of the ODL log file do you want RDA to analyze?"
lvl=9
ref=I]0,[
val=E

#------------------------------------------------------------------------------
# IASr1 setting definitions
#------------------------------------------------------------------------------
[ORAWEB_ADMIN]
typ=D
dft=${ORACLE_HOME}/admin
dsc="Admin directory"

[ORAWEB_HOME]
typ=D
dft=${ORACLE_HOME}
dsc="Oraweb directory"

[WEB_BASE]
typ=T
dft="http://${RDA.NODE}:7777"
dsc="Web server base URL"
inp="Enter the base URL for the web server"
man="RDA does not require this question for Application Server version 9.0.2 \
     or later"

[WEB_DCD]
typ=T
dft="${WEB_BASE}/pls/DAD"
dsc="Base URL for connecting to database"
inp="Enter the base URL or DAD for connecting to the database"
man="RDA does not prompt for this information for Application Server \
     version 9.0.2 or later"
