# S300IAS.def: Collects Web Server Information
# $Id: S300IAS.def,v 2.5 2012/01/03 13:34:45 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S300IAS.def,v 2.5 2012/01/03 13:34:45 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S300IAS - Collects Web Server Information

=head1 DESCRIPTION

This module collects Web Server-related information through a release-specific
submodule. It automatically detects OAS 11g, OAS 10g R4 (10.1.4),
OAS 10g R3 (10.1.3), OAS 10g R2 (10.1.2), OAS 10g (9.0.4),
9iAS R2 (9.0.2/9.0.3), and 9iAS (1.0.2).

=cut

echo tput('bold'),'Processing Web Server module ...',tput('off')

# Initialization
var $APACHE_TOP  = getSetting('APACHE_TOP','')
var $ORACLE_HOME = getSetting('ORACLE_HOME','')

# Execute the collection based on web server release
if nvl(getVersion('oracle.apache2'),getVersion('oracle.apache'),\
       getVersion('oracle.opmn'),getVersion('oracle.ons'))
{var $ver = last
 if match($ver,'^11\.')
  echo 'Current version is 11g'
 elsif match($ver,'^10\.1\.4')
  run IASr1014('10.1.4')
 elsif match($ver,'^10\.1\.3')
  run IASr1013('10.1.3')
 elsif match($ver,'^10\.1\.2')
 {if match(getVersion('oracle.iappserver.iappcore'),'^10\.1\.4')
   run IASr1014('10.1.4')
  else
   run IASr1012('10.1.2',match($ver,'^(10\.1\.2\.\d+)'))
 }
 elsif match($ver,'^9\.0\.4')
  run IASr10g('9.0.4')
 elsif match($ver,'^9\.0\.3')
  run IASr2('9.0.3')
 elsif match($ver,'^9\.0\.2')
  run IASr2('9.0.2')
 else
  run IASr1()
}
else
{var $fil = catFile($ORACLE_HOME,'config','ias.properties')
 if testFile('f',$fil)
 {if grepFile($fil,'10\.1\.4')
   run IASr1014('10.1.4')
  elsif grepFile($fil,'10\.1\.3')
   run IASr1013('10.1.3')
  elsif grepFile($fil,'10\.1\.2')
   run IASr1012('10.1.2',match(last,'(10\.1\.2\.\d+)'))
  elsif grepFile($fil,'9\.0\.4')
   run IASr10g('9.0.4')
  elsif grepFile($fil,'9\.0\.3')
   run IASr2('9.0.3')
  elsif grepFile($fil,'9\.0\.2')
   run IASr2('9.0.2')
  else
   run IASr1()
 }
 else
  run IASr1()
}

=head1 SEE ALSO

L<IASr1012|modules::IASr1012>, L<IASr1013|modules::IASr1013>,
L<IASr1014|modules::IASr1014>, L<IASr10g|modules::IASr10g>,
L<IASm11g|modules::IASm11g>, L<IASs11g|modules::IASs11g>,
L<IASr2|modules::IASr2>, L<IASr1|modules::IASr1>

=begin credits

=over 10

=item RDA 4.4:  Wes Root.

=item RDA 4.5:  Greg Cook, Wes Root.

=item RDA 4.7:  Bill Loi, Pedro Nunes, Wes Root.

=item RDA 4.9:  Greg Cook, Albert Girona.

=item RDA 4.13: Greg Cook, Andrew Salt.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
