# S301WLS.cfg: Collects Oracle WebLogic Server Information
# $Id: S301WLS.cfg,v 2.16 2012/01/02 17:25:16 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S301WLS.cfg,v 2.16 2012/01/02 17:25:16 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect the Oracle WebLogic Server setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${WLS_IN_USE}
dsc="Collects Oracle WebLogic Server Information"
env=DOMAIN_HOME
exe=WLSsetup
req=S000INI,*?WLS_REQ_WREQ:S301WREQ
rpt=WLS_IN_USE
trg=?WLS_REQ_WREQ:S301WREQ
ttl="Oracle Product Settings"
var=force_wls_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_wls_tests]
typ=B
alt=WLS_IN_USE
dft=0
dsc="Are the Oracle WebLogic Server tests required by the profile?"
nam=-
var=wls_in_use

[no_wls]
typ=B
dft=0
dsc="Is Oracle WebLogic Server information requested?"
nam=WLS_IN_USE

[wls_in_use]
typ=B
dft=1
dsc="Is Oracle WebLogic Server information requested?"
nam=WLS_IN_USE
var=exist_domain,wls_domain_root

[WLS_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle WebLogic Server information requested?"
inp="Do you want RDA to analyze Oracle WebLogic Server (Y/N)?"
var=exist_domain,wls_domain_root

[exist_domain]
typ=I
dft="exists:DOMAIN_HOME"
dsc="Check if DOMAIN_HOME environment variable set"
nam=-
var=dft_domain_root

[dft_domain_root]
typ=D
dft="${DOMAIN_HOME}/.."
dsc="Default domain root directory"
nam=-TMP_DOM_ROOT

[wls_domain_root]
typ=D
dft=${WLS_DOMAIN_ROOT:${TMP_DOM_ROOT}}
dsc="Domain root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory where the domains to analyze are \
     located (For example in UNIX, <BEA Home>/user_projects/domains or \
     <Middleware Home>/user_projects/domains)"
nam=WLS_DOMAIN_ROOT
val=W
var=chk_domains

[chk_domains]
typ=B
alt=edit_domain_root
dft=0
dsc="Check which domain homes are present in the domain root directory"
exe=chk_domains
nam=-
var=WLS_TYPE,wls_req_wreq

[edit_domain_root]
typ=B
alt=no_wls
dft=0
dsc="Do you want to modify the domain root location?"
inp="The specified domain root directory is either invalid or does not \
     contain some Oracle WebLogic Server related-files. The collection will \
     be disabled.\n\n\
     Do you want to modify the domain root path (Y/N)?"
nam=-
var=wls_domain_root

[WLS_TYPE]
typ=M
bef="Data Collection Type:"
dft=OFF
dsc="Collection type"
err="Please enter a number from 1 to 3"
hlp="For a successful WLS connection, ensure that the domain Admin Server is \
     up and running."
inp="\nEnter the item number"
itm="1|Collect for a single server (offline mode)|\
     2|Collect for a single server (using WLS connection)|\
     3|Collect for multiple servers (using WLS connection)"
mnu="<<N"
rsp="1|OFF|2|ONE|3|MANY"
val=F
var=check_type

[check_type]
typ=I
alt=ask_one_domain,set_loop
dft="eq:WLS_TYPE:MANY"
dsc="Apply the type-related setup"
nam=-
var=ask_domains,set_loop

#------------------------------------------------------------------------------
# Select the domain(s)
#------------------------------------------------------------------------------
[ask_one_domain]
typ=M
ask=0
bef="Domain list:"
dft="${TMP_DFT_DOMAINS}"
dsc="Domain list"
err="Enter a menu item number only"
inp="Enter the number corresponding to the selected domain name"
itm="${TMP_ITM_DOMAINS}"
mnu="<<I"
nam=WLS_DOMAINS
rsp="${TMP_RSP_DOMAINS}"
val=E

[ask_domains]
typ=M
add="*|All domains|*|all_domains"
bef="Domain list:"
dft="${TMP_DFT_DOMAINS}"
dsc="Domain list"
dup="Domain already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the domain directory name, or * to \
     select all domains, or ${end} to terminate the list"
itm="${TMP_ITM_DOMAINS}"
mnu="<<I"
nam=WLS_DOMAINS
one="*"
rsp="${TMP_RSP_DOMAINS}"
sep="|"
val=E

[all_domains]
typ=T
dft=${TMP_ALL_DOMAINS}
dsc="List all domains"
nam=-WLS_DOMAINS

[set_loop]
typ=L
dft="${WLS_DOMAINS}"
dsc="Examine all directories"
nam=-TMP_CNT
sep="|"
var=get_dom_basename,set_req_domain

[get_dom_basename]
typ=T
dft="${WLS_DOM${TMP_CNT}}"
dsc="Domain name"
nam=-dom

[set_req_domain]
typ=D
dft="${WLS_DOM${TMP_CNT}_REQ_DOMAIN}"
dsc="Domain ${TMP_CNT}"
nam=WLS_DOM${TMP_CNT}_REQ_DOMAIN
var=chk_servers

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=wls_type

[missing]
typ=B
dsc="Used to reject settings"
nam=-

[wls_type]
typ=I
dft="decode:WLS_TYPE:\
     OFF:ask_one_server:\
     ONE:ask_one_server,get_user,check_user:\
     MANY:ask_servers,get_user,check_user"
dsc="Apply the type-related setup"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[ask_one_server]
typ=M
ask=0
bef="Oracle WebLogic Server list for '${dom}' Domain:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list for Domain ${TMP_CNT}"
err="Enter a menu item number only"
inp="Enter the number corresponding to the selected server name"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=WLS_DOM${TMP_CNT}_WLS_SERVERS
rsp="^"
val=E

[ask_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list for '${dom}' Domain:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list for Domain ${TMP_CNT}"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=WLS_DOM${TMP_CNT}_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=WLS_DOM${TMP_CNT}_WLS_SERVERS

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_WLS_USER

[check_user]
typ=I
alt=set_user2,set_last_user
dft="match:TMP_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=set_user1,set_last_user

[set_user1]
typ=T
clr=-
dft=${WLS_DOM${TMP_CNT}_WLS_USER:${TMP_LAST_USER:${TMP_WLS_USER}}}
dsc="Oracle WebLogic Server user name for domain ${TMP_CNT}"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If a dash \
     ('${clr}') is specified as input, default user name retrieved from \
     '${dom}' domain configuration file is considered."
lvl=1
nam=WLS_DOM${TMP_CNT}_WLS_USER
ref="^\S*$"
val=E

[set_user2]
typ=T
dft=${WLS_DOM${TMP_CNT}_WLS_USER:${TMP_LAST_USER}}
dsc="Oracle WebLogic Server user name for domain ${TMP_CNT}"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection for \
     '${dom}' domain"
nam=WLS_DOM${TMP_CNT}_WLS_USER
ref="^\S+$"
val=E

[set_last_user]
typ=T
dft="${WLS_DOM${TMP_CNT}_WLS_USER}"
dsc="Last Oracle WebLogic Server user name entered"
nam=-TMP_LAST_USER

[wls_req_wreq]
typ=B
dft=1
dsc="Does WLS require Oracle WebLogic Request Handler collection?"
nam=WLS_REQ_WREQ

