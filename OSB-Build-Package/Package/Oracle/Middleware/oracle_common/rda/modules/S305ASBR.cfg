# S305ASBR.cfg: Collects Application Server Backup and Recovery Information
# $Id: S305ASBR.cfg,v 2.9 2012/08/29 13:47:05 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S305ASBR.cfg,v 2.9 2012/08/29 13:47:05 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120828  KRA  Extend installation type detection.

###############################################################################
# Collect Oracle AS Backup Recovery setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${ASBR_IN_USE}
dsc="Collects Oracle Application Server Backup and Recovery Information"
req=S000INI
rpt=ASBR_IN_USE
ttl="Oracle Product Settings"
var=asbr_check

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[asbr_check]
typ=D
alt=no_asbr
dft=${ORACLE_HOME}/backup_restore
dsc='Is backup_restore present in the ORACLE_HOME ?'
nam=-
var=get_install

[get_install]
typ=P
alt=check_rcu
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_rcu
dft="match:TMP_INSTALL:^(Classic Application Server 11g|\
                         Oracle Forms and Reports 11g|\
                         Oracle Identity Management 11g|\
                         Oracle Portal, Forms, Reports and Discoverer 11g|\
                         Oracle SOA Suite 11g|\
                         Oracle WebCenter Portal Suite 11g|\
                         Oracle WebCenter Suite 11g|\
                         Oracle WebTier|\
                         SOA Application Server 11g|\
                         Webcenter Application Server 11g)"
dsc="Check for AS 11g install"
nam=-
var=no_asbr

[check_rcu]
typ=D
alt=force_asbr_tests
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=no_asbr

[force_asbr_tests]
typ=B
alt=ASBR_IN_USE
dft=0
dsc="Are the ASBR tests required by the profile?"
nam=-
var=asbr_in_use

[no_asbr]
typ=B
dft=0
dsc="Is Application Server backup and recovery information requested?"
nam=ASBR_IN_USE

[asbr_in_use]
typ=B
dft=1
dsc="Is Application Server backup and recovery information requested?"
nam=ASBR_IN_USE
var=ASBR_DB_INFO

[ASBR_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Application Server backup and recovery information requested?"
inp="Do you want RDA to collect Application Server backup and recovery \
     information (Y/N)?"
var=ASBR_DB_INFO

[ASBR_DB_INFO]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is database information requested ?"
inp="Do you want RDA to collect information about the database containing the \
     Metadata Repository (Y/N)?"
var=ias_properties,ASBR_SID,ASBR_LOGIN,ASBR_SYSDBA

[ias_properties]
typ=F
dft=${ORACLE_HOME}/config/ias.properties
dsc="Is ias.properties present?"
nam=-TMP_IAS_PROPERTIES

[ASBR_SID]
typ=T
dft="<<CONFIG:TMP_IAS_PROPERTIES:1:^InfrastructureDBCommonName=(.*?)\."
dsc="SID of the Database containing the Metadata Repository"
inp="Enter the Oracle SID of the database containing the Metadata Repository"

[ASBR_LOGIN]
typ=T
dft='${SQL_LOGIN:system}'
dsc="User to connect to SQL*Plus"
inp="Enter an Oracle User ID (user ID, only) to view DBA_ and V$ tables. If \
     RDA will be run under the user ID of the Oracle software owner, enter \
     a forward slash (/) here, and enter Y at the SYSDBA prompt. This \
     prevents that a prompt for the database password at collection time."

[ASBR_SYSDBA]
typ=B
dft=0
dsc="Specify that ASBR_LOGIN will connect as SYSDBA"
inp="Is '${ASBR_LOGIN}' a SYSDBA user (will connect as SYSDBA) (Y/N)?"
