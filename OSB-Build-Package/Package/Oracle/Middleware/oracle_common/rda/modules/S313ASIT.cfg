# S313ASIT.cfg: Collects Information for Fusion Middleware Installation Types
# $Id: S313ASIT.cfg,v 2.18 2012/08/21 10:42:45 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S313ASIT.cfg,v 2.18 2012/08/21 10:42:45 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120821  KRA  Extend installation type detection.

###############################################################################
# Collect the setup information for multiple AS installation types
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${ASIT_IN_USE}
dsc="Collects Information for Multiple Fusion Middleware Installation Types"
env=ORACLE_INSTANCE
exe=ASITcfg
inv=get_install
man="Applies to the following installation types of Oracle Fusion Middleware \
     11g and later:\n \
     * Oracle Business Intelligence Enterprise Editon\n \
     * Oracle Forms and Reports\n \
     * Oracle Identity Management\n \
     * Oracle Portal, Forms, Reports and Discoverer\n \
     * Web Tier"
req=S000INI,*?ASIT_REQ_IREQ:S313IREQ
rpt=ASIT_IN_USE,ASIT_INSTANCE_ROOT
trg=?ASIT_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=force_asit_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[get_install]
typ=P
alt=force_asit_tests
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=no_asit
dft="match:TMP_INSTALL:^(Classic Application Server 11g|\
                         Oracle Forms and Reports 11g|\
                         Oracle Identity Management 11g|\
                         Oracle Portal, Forms, Reports and Discoverer 11g|\
                         Oracle WebTier)"
dsc="Check the installation type"
nam=-
var=force_asit_tests

[force_asit_tests]
typ=B
alt=check_ias
dft=0
dsc="Are the tests required by the profile?"
nam=-
var=asit_in_use

[asit_in_use]
typ=B
dft=1
dsc="Is Oracle Fusion Middleware information requested?"
nam=ASIT_IN_USE
var=asit_oracle_home

[check_ias]
typ=B
alt=ASIT_IN_USE
dft="${WEB_APPS_IN_USE}"
dsc="Exclude if IAS collection is active"
nam=-
var=no_asit

[ASIT_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Fusion Middleware information requested?"
inp="This module supports the following installation types:\n \
     * Oracle Business Intelligence Enterprise Edition\n \
     * Oracle Forms and Reports\n \
     * Oracle Identity Management\n \
     * Oracle Portal, Forms, Reports and Discoverer\n \
     * Web Tier\n\
     Do you want RDA to analyze any of those installation types (Y/N)?"
var=asit_oracle_home

[asit_oracle_home]
typ=D
alt=asit_comment,no_asit
dft=${ORACLE_HOME}
dsc="Check the existence of the Oracle home"
nam=-
var=asit_opmn_home

[asit_opmn_home]
typ=D
alt=asit_comment,no_asit
dft=${ORACLE_HOME}/opmn
dsc="Check the presence of the opmn sub directory"
nam=-
var=check_profile

[asit_comment]
typ=C
dsc="Report bad Oracle home for such a collection"
inp="The specified Oracle home directory does not exist or does not contain \
     some Oracle Fusion Middleware installation related-files. The \
     collection is disabled.\n\nHit 'Return' to continue"

[no_asit]
typ=B
dft=0
dsc="Is Oracle Fusion Middleware information requested?"
nam=ASIT_IN_USE

[check_profile]
typ=B
alt=force_primary
dft=${ofm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is ASIT the primary module?"
nam=ASIT_PRIMARY
var=ASIT_OH_REQ_HOME,ASIT_CH_REQ_COMMON,asit_instance_root

[set_primary]
typ=B
dft=${asit_primary}
dsc="Is ASIT the primary module?"
nam=ASIT_PRIMARY
var=ASIT_CH_REQ_COMMON,asit_instance_root

#------------------------------------------------------------------------------
# Request the collection of the common home
#------------------------------------------------------------------------------
[ASIT_OH_REQ_HOME]
typ=D
alt=missing
dft=${ORACLE_HOME}
dsc="Oracle Fusion Middleware Oracle home"
var=asit_req_ireq

[ASIT_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ASIT_OH_REQ_HOME}/../oracle_common"
dsc="Common Product home"
var=asit_req_ireq

[asit_req_ireq]
typ=B
dft=1
dsc="Does ASIT require Oracle Instance Request Handler collection?"
nam=ASIT_REQ_IREQ

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Retrieve available instances
#------------------------------------------------------------------------------
[asit_instance_root]
typ=D
alt=chk_oracle_instance,ASIT_INSTANCE_ROOT
dft=${INSTANCE_ROOT}
dsc="Instance root directory"
nam=ASIT_INSTANCE_ROOT
var=chk_instances

[chk_oracle_instance]
typ=I
dft="exists:ORACLE_INSTANCE"
dsc="Check the ORACLE_INSTANCE environment variable existence"
nam=-
var=dft_instance_home

[dft_instance_home]
typ=D
dft="${ORACLE_INSTANCE}/.."
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT

[ASIT_INSTANCE_ROOT]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance homes to \
     analyze (For example the parent directory of the path specified by an \
     ORACLE_INSTANCE environment variable)"
val=W
var=chk_instances

[chk_instances]
typ=B
alt=asit_comment2
dft=0
dsc="Check which instance homes are present in the instance root directory"
exe=chk_instances
nam=-
var=asit_instances,set_loop,asit_tnsadmin_list

[asit_comment2]
typ=C
dsc="Report bad Oracle instance root directory"
inp="The specified Oracle instance root directory is either invalid or does \
     not contain some Oracle Fusion Middleware instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Select instances
#------------------------------------------------------------------------------
[asit_instances]
typ=M
add="*|All instances|*|all_instances"
bef="Instance list:"
col=1
dft="${TMP_DFT_INSTANCES}"
dsc="Instance list"
dup="Instance already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the instance directory name, or * to \
     select all instances, or ${end} to terminate the list"
itm="${TMP_ITM_INSTANCES}"
mnu="<<I"
nam=ASIT_INSTANCES
one="*"
rsp="${TMP_RSP_INSTANCES}"
sep="|"
val=E

[all_instances]
typ=T
dft=${TMP_ALL_INSTANCES}
dsc="List all instances"
nam=-ASIT_INSTANCES

[set_loop]
typ=L
dft="${ASIT_INSTANCES}"
dsc="Examine all directories"
nam=-cnt
sep="|"
var=set_req_instance

[set_req_instance]
typ=D
dft="${ASIT_OI${cnt}_REQ_INSTANCE}"
dsc="Instance ${cnt}"
nam=ASIT_OI${cnt}_REQ_INSTANCE
var=chk_tnsadmin_list

[chk_tnsadmin_list]
typ=I
dft="join:TMP_TNSADMIN_LIST:${ASIT_OI${cnt}_REQ_INSTANCE}/config"
dsc="List of extra TNS_ADMIN directories"
nam=-TMP_TNSADMIN_LIST

[asit_tnsadmin_list]
typ=D
dft=${TMP_TNSADMIN_LIST}
dsc="List of extra TNS_ADMIN directories"
nam=ASIT_TNSADMIN_LIST
sep="|"

