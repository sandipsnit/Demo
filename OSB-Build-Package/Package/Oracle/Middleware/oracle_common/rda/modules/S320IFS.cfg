# S320IFS.cfg: Collects iFS (iFS, CMSDK, Files) Information
# $Id: S320IFS.cfg,v 2.6 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S320IFS.cfg,v 2.6 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect iFS (iFS, CMSDK, Files) setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${INTERNET_FILE_SYSTEM_IN_USE}
dsc="Collects iFS (iFS, CMSDK, Files) Information"
req=S000INI
rpt=INTERNET_FILE_SYSTEM_IN_USE
ttl="Oracle Product Settings"
var=check_ifs

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_ifs]
typ=D
alt=no_ifs
dft="<<Search:ORACLE_HOME:p:^(ifs(1\.1)?|9ifs)$"
nam=-
var=INTERNET_FILE_SYSTEM_IN_USE

[no_ifs]
typ=B
dft=0
dsc="Is Internet File System (iFS, CMSDK, Files) information requested?"
nam=INTERNET_FILE_SYSTEM_IN_USE

[INTERNET_FILE_SYSTEM_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Internet File System (iFS, CMSDK, Files) information requested?"
inp="Is Internet File System (iFS, CMSDK, Files) installed and should it \
     be analyzed (Y/N)?"
man="RDA requires this question only when an Internet File System directory is \
     present in the Oracle home."
var=IFS_ROOT_HOME1

#--- Alternative1 -------------------------------------------------------------
[IFS_ROOT_HOME1]
typ=D
alt=IFS_ROOT_HOME2
dft=${ORACLE_HOME}/ifs
nam=IFS_ROOT_HOME
var=IFS_HOME1a,IFS_REGISTRY1,\
    IFS_REPOS_DB,IFS_REPOS_PORT,IFS_REPOS_SID,IFS_REPOS_USER1,IFS_Connect1

[IFS_HOME1a]
typ=D
alt=IFS_HOME1b
dft=${IFS_ROOT_HOME}/cmsdk
dsc="IFS_HOME"
nam=IFS_HOME

[IFS_HOME1b]
typ=D
dft=${IFS_ROOT_HOME}/files
dsc="IFS_HOME"
nam=IFS_HOME

[IFS_REGISTRY1]
typ=F
dft=${IFS_ROOT_HOME}/common/registry.xml
dsc="IFS_REGISTRY"
nam=IFS_REGISTRY

# IFS_REPOS_DB=`grep -i "<Domain>" ${IFS_REGISTRY}| cut -d: -f2|tr -d '/'`
# Still have to understand where '/' is/are in the string
[IFS_REPOS_DB]
typ=T
dft=<<Config:IFS_REGISTRY:2:<Domain>([^:]*:){1}([^:]*):

[IFS_REPOS_PORT]
typ=T
dft=<<Config:IFS_REGISTRY:2:<Domain>([^:]*:){2}([^:]*):

[IFS_REPOS_SID]
typ=T
dft=<<Config:IFS_REGISTRY:2:<Domain>([^:]*:){3}([^:]*):

[IFS_REPOS_USER1]
typ=T
dft=<<Config:IFS_REGISTRY:2:<Domain>([^:]*:){4}([^<]*)<
dsc="IFS_REPOS_USER"
nam=IFS_REPOS_USER

[IFS_Connect1]
typ=C
inp="iFS repository connect information:\n\
       IFS_REPOS_DB=${IFS_REPOS_DB}\n\
       IFS_REPOS_PORT=${IFS_REPOS_PORT}\n\
       IFS_REPOS_SID=${IFS_REPOS_SID}\n\
       IFS_REPOS_USER=${IFS_REPOS_USER}\n\n\
     Hit 'Return' to continue"

#--- Alternative2 -------------------------------------------------------------
[IFS_ROOT_HOME2]
typ=D
alt=IFS_ROOT_HOME3
dft=${ORACLE_HOME}/9ifs
nam=IFS_ROOT_HOME
var=IFS_HOME2,IFS_REGISTRY2,IFS_TNS_ALIAS2,IFS_REPOS_USER2,IFS_Connect2

[IFS_HOME2]
typ=D
dft=${IFS_ROOT_HOME}
dsc="IFS_HOME"
nam=IFS_HOME

[IFS_REGISTRY2]
typ=F
dft=${IFS_ROOT_HOME}/settings/oracle/ifs/server/properties/IfsDefault.properties
dsc="IFS_REGISTRY"
nam=IFS_REGISTRY

[IFS_REPOS_USER2]
typ=T
dft=<<Config:IFS_REGISTRY:1:IFS.SERVICE.JDBC.Schema[^\=]*\=(.*)$
dsc="IFS_REPOS_USER"
nam=IFS_REPOS_USER

[IFS_TNS_ALIAS2]
typ=T
dft=<<Config:IFS_REGISTRY:1:IFS.SERVICE.JDBC.DatabaseUrl[^\@]*\@(.*)$
dsc="IFS_TNS_ALIAS"
nam=IFS_TNS_ALIAS

[IFS_Connect2]
typ=C
inp="iFS repository connect information:\n\
       IFS_TNS_ALIAS=${IFS_TNS_ALIAS}\n\
       IFS_REPOS_USER=${IFS_REPOS_USER}\n\n\
     Hit 'Return' to continue"

#--- Alternative3 -------------------------------------------------------------
[IFS_ROOT_HOME3]
typ=D
alt=no_ifs
dft=${ORACLE_HOME}/ifs1.1
nam=IFS_ROOT_HOME
var=IFS_HOME2,IFS_REGISTRY2,IFS_TNS_ALIAS3,IFS_REPOS_USER3,IFS_Connect2

[IFS_REPOS_USER3]
typ=T
dft=<<Config:IFS_REGISTRY:1:User[^\=]*\=(.*)$
dsc="IFS_REPOS_USER"
nam=IFS_REPOS_USER

[IFS_TNS_ALIAS3]
typ=T
dft=<<Config:IFS_REGISTRY:1:DatabaseUrl[^\@]*\@(.*)$
dsc="IFS_TNS_ALIAS"
nam=IFS_TNS_ALIAS

