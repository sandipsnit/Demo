# S325PDA.cfg: Collects Portal Diagnostics Information
# $Id: S325PDA.cfg,v 2.14 2012/08/21 10:38:18 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S325PDA.cfg,v 2.14 2012/08/21 10:38:18 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120821  KRA  Extend installation type detection.

###############################################################################
# Collect Portal diagnostics setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${PDA_IN_USE}
dsc="Collects Portal Diagnostics Information"
env=ORACLE_INSTANCE
exe=ASITcfg
req=S300IAS,*?PDA_REQ_IREQ:S313IREQ
rpt=PDA_IN_USE
trg=+S300IAS,?PDA_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=pda_check

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[pda_check]
typ=D
alt=no_pda
dft="<<Search:ORACLE_HOME:p:^portal"
dsc="Check if portal is installed"
nam=-
var=force_pda_tests

[force_pda_tests]
typ=B
alt=PDA_IN_USE
dft=0
nam=-
var=pda_in_use

[no_pda]
typ=B
dft=0
dsc="Is Oracle Portal diagnostics information requested?"
nam=PDA_IN_USE

[pda_in_use]
typ=B
dft=1
dsc="Is Oracle Portal diagnostics information requested?"
nam=PDA_IN_USE
var=get_install,check_sid

[PDA_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Portal diagnostics information requested?"
inp="Do you want RDA to perform Oracle Portal diagnostics tests (Y/N)?"
var=get_install,check_sid

[get_install]
typ=P
alt=check_rcu
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_rcu
dft="match:TMP_INSTALL:^(Classic Application Server 11g|\
                         Oracle Forms and Reports 11g|\
                         Oracle Portal, Forms, Reports and Discoverer 11g)"
dsc="Check for AS 11g install"
nam=-
var=check_profile

[check_rcu]
typ=D
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=check_profile

[check_profile]
typ=B
alt=force_primary
dft=${ofm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is PDA the primary module?"
nam=PDA_PRIMARY
var=PDA_CH_REQ_COMMON,pda_instance_root

[set_primary]
typ=B
dft=${pda_primary}
dsc="Is PDA the primary module?"
nam=PDA_PRIMARY
var=PDA_CH_REQ_COMMON,pda_instance_root

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[PDA_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=pda_ch_focus,pda_req_ireq

[pda_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for WebLogic common home collection"
nam=PDA_CH_FOCUS

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Setting definitions for Oracle Instance
#------------------------------------------------------------------------------
[pda_instance_root]
typ=D
alt=chk_oracle_instance,PDA_INSTANCE_ROOT
dft=${INSTANCE_ROOT}
dsc="Instance root directory"
nam=PDA_INSTANCE_ROOT
var=chk_instances

[chk_oracle_instance]
typ=I
dft="exists:ORACLE_INSTANCE"
dsc="Check the ORACLE_INSTANCE environment variable existence"
nam=-
var=dft_instance_root

[dft_instance_root]
typ=D
dft="${ENV.ORACLE_INSTANCE}/.."
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT

[PDA_INSTANCE_ROOT]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance homes to \
     analyze (For example the parent directory of the path specified by an \
     ORACLE_INSTANCE environment variable)"
var=chk_instances

[chk_instances]
typ=B
alt=pda_comment
dft=0
dsc="Get the directories present in the instance root directory"
exe=chk_instances
nam=-
var=pda_instances,set_loop,pda_dom_focus,pda_req_ireq

[pda_comment]
typ=C
dsc="Report bad Oracle instance root directory"
inp="The specified Oracle instance root directory is either invalid or does \
     not contain some Oracle PDA instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Select instances
#------------------------------------------------------------------------------
[pda_instances]
typ=M
add="*|All instances|*|all_instances"
bef="Instance list:"
col=1
dft="${TMP_DFT_INSTANCES}"
dsc="Instance list"
dup="Instance already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the instance directory name, or * to \
     select all instances, or ${end} to terminate the list"
itm="${TMP_ITM_INSTANCES}"
mnu="<<I"
nam=PDA_INSTANCES
one="*"
rsp="${TMP_RSP_INSTANCES}"
sep="|"
val=E

[all_instances]
typ=T
dft=${TMP_ALL_INSTANCES}
dsc="List all instances"
nam=-PDA_INSTANCES

[set_loop]
typ=L
dft="${PDA_INSTANCES}"
dsc="Examine all directories"
nam=-cnt
sep="|"
var=set_req_instance

[set_req_instance]
typ=D
dft="${PDA_OI${cnt}_REQ_INSTANCE}"
dsc="Instance ${cnt}"
nam=PDA_OI${cnt}_REQ_INSTANCE
var=set_oh_focus,set_oi_focus

[set_oh_focus]
typ=T
dft="HTTP,Manifest,OPMN,PDA,WEBCACHE_IN_USE?WEBC"
dsc="Focus areas for Oracle home associated to the instance home"
nam=PDA_OH${cnt}_FOCUS

[set_oi_focus]
typ=T
dft="HTTP,OPMN,PDA,WEBCACHE_IN_USE?WEBC"
dsc="Focus areas for instance home"
nam=PDA_OI${cnt}_FOCUS

[pda_dom_focus]
typ=T
dft="PDA"
dsc="Focus areas for weblogic domain collection"
nam=PDA_DOM_FOCUS

[pda_req_ireq]
typ=B
dft=1
dsc="Does PDA require Oracle Instance Request Handler collection?"
nam=PDA_REQ_IREQ

#------------------------------------------------------------------------------
# Common settings
#------------------------------------------------------------------------------
[check_sid]
typ=I
alt=pda_local
dft="exists:ORACLE_SID"
dsc="Check if ORACLE_SID is defined"
nam=-
var=PDA_LOCAL

[pda_local]
typ=B
alt=PDA_SID,PDA_LOGIN,PDA_SYSDBA,PDA_SWITCH,PDA_ADVANCED,PDA_ERROR_TAIL,\
    PDA_FULL_URL,PDA_EXPENSIVE_LIMIT,PDA_MISSING_LIMIT,PDA_SIZE_LIMIT
dft=0
dsc="Are the Portal schemas stored in the database to be analyzed?"
nam=PDA_LOCAL

[PDA_LOCAL]
typ=B
alt=PDA_SID,PDA_LOGIN,PDA_SYSDBA,PDA_SWITCH,PDA_ADVANCED,PDA_ERROR_TAIL,\
    PDA_FULL_URL,PDA_EXPENSIVE_LIMIT,PDA_MISSING_LIMIT,PDA_SIZE_LIMIT
dft=1
dsc="Are the Portal schemas stored in the database to be analyzed?"
inp="Are the Portal schemas stored in the '${ORACLE_SID}' database (Y/N)?"

[PDA_SID]
typ=T
dsc="Database containing the Portal schemas"
inp="Enter the Oracle SID of the database containing the Portal schemas"

[PDA_LOGIN]
typ=T
dft='${SQL_LOGIN:portal}'
dsc="User to connect to SQL*Plus"
inp="Enter an Oracle User ID (userid only) to view Portal related information."

[PDA_SYSDBA]
typ=B
dft=0
dsc="Indicate that PDA_LOGIN will connect as SYSDBA"
inp="Is '${PDA_LOGIN}' a SYSDBA user (will connect as SYSDBA) (Y/N)?"
lvl=1

[PDA_ADVANCED]
typ=B
dft=0
dsc="Advanced collection mode"
hlp="You must set the advanced mode for detailed report collection."
inp="Is the advanced mode to be enabled (Y/N)?"

[PDA_SWITCH]
typ=B
dft=0
dsc="Indicate whether RDA must switch the Oracle system identifier"

#------------------------------------------------------------------------------
# Error log analysis setting definitions
#------------------------------------------------------------------------------
[PDA_ERROR_TAIL]
typ=N
dft=6291456
dsc="Number of bytes to be analyzed in Apache error log file"
err="The number of bytes must be an integer greater than zero"
inp="How many bytes at the end of the Apache error log file do you want \
     RDA to analyze?"
lvl=9
ref=I]0,[
val=E

[PDA_EXPENSIVE_LIMIT]
typ=N
dft=15000
dsc="After how many milliseconds of request time is the call expensive?"
err="The number of the milliseconds must be an integer greater than zero"
inp="After how many milliseconds of request time is the call expensive?"
lvl=9
ref=I]0,[
val=E

[PDA_FULL_URL]
typ=B
dft=0
dsc="Is the full URL used in the analysis?"
inp="Is the full URL used in the analysis (Y/N)?"
lvl=9

[PDA_MISSING_LIMIT]
typ=N
dft=10000
dsc="After how many milliseconds of missing time should RDA list a request?"
err="The number of the milliseconds must be an integer greater than zero"
inp="Specify after how many milliseconds of missing time do you want RDA to \
     list a request?"
lvl=9
ref=I]0,[
val=E

[PDA_SIZE_LIMIT]
typ=N
dft=35000
dsc="Up to how many bytes of missing time is not related to the size?"
err="The number of the bytes must be an integer greater than zero"
inp="Up to how many bytes of missing time is not related to the size?"
lvl=9
ref=I]0,[
val=E
