# S325PDA.def: Collects Oracle Portal Information
# $Id: S325PDA.def,v 2.11 2012/01/03 13:34:45 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S325PDA.def,v 2.11 2012/01/03 13:34:45 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S325PDA - Collects Oracle Portal Diagnostics Information

=head1 DESCRIPTION

This module collects the Oracle Portal diagnostics-related information.

The reports are regrouped under C<Oracle Portal>.

=cut

echo tput('bold'),'Processing PDA module ...',tput('off')

# Initialization
var $ORACLE_HOME = getSetting('ORACLE_HOME','')

=head1 PORTAL INFORMATION

Includes the reports generated by the IREQ module about the Oracle instances
and their associated Oracle homes.

=cut

if !?getSetting('PDA_PRIMARY')
{# Initialization
 var $TOC = '%TOC%'
 var $TOP = '[[#Top][Back to top]]'
 pretoc '1:Oracle Portal'

 var %HTTPDCONF
 var %HTTPDERRLOG
 var $OC4J_USED
 var $VERSION

 # Collect the portal repository information
 run PDAinfo(\$OC4J_USED,\$VERSION)

 # Analyze the log files
 run PDAlog($OC4J_USED,$VERSION)
 unpretoc
}
elsif getSetting('PDA_REQ_IREQ')
{# Collect the PDA 11g information
 toc '%PUSH("0:   * Oracle Portal")%'
 toc '%PUSH("1+:Common Product Home")%'
 toc '%INCLUDE("',${CUR.GROUP},'_IREQ_PDA_CH.toc")%'
 toc '%POP%'
 loop $key (grepSetting('^PDA_OI\d+_REQ_INSTANCE$'))
 {var $tid = substr($key,0,-13)
  var $ins = basename(getSetting($key,''))
  toc '%PUSH("0:      * ',"'",$ins,"'",' Instance")%'
  toc '%PUSH("%SPLIT%")%'
  toc '%PUSH("1++:Associated Oracle Home")%'
  toc '%INCLUDE("',${CUR.GROUP},'_IREQ_',replace($tid,'_OI','_OH'),'.toc",1)%'
  toc '%POP2%'
  toc '%PUSH("%SPLIT%")%'
  toc '%PUSH("1++:Instance Home")%'
  toc '%INCLUDE("',${CUR.GROUP},'_IREQ_',$tid,'.toc")%'
  toc '%POP3%'
 }
 toc '%POP%'
}

=head1 SEE ALSO

L<S313IREQ.def|modules::S313IREQ>,
L<IAS.def|modules::IAS>,
L<PDAinfo.def|modules::PDAinfo>,
L<PDAlog.def|modules::PDAlog>,
L<PDAr11.def|modules::PDAr11>

=begin credits

=over 10

=item RDA 4.5:  Ersan Eser, Krishna Kumar, Rishi Mehrotra, Meraj Mohammed.

=item RDA 4.6:  Ersan Eser.

=item RDA 4.12: Meraj Mohammed.

=item RDA 4.22: Daniel Mortimer.

=item RDA 4.24: Greg Cook, Andrew Salt.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
