# S342OVD.cfg: Collects Oracle Virtual Directory Information
# $Id: S342OVD.cfg,v 2.11 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S342OVD.cfg,v 2.11 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect Oracle Virtual Directory setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${OVD_IN_USE}
dsc="Collects Oracle Virtual Directory Information"
env=ORACLE_INSTANCE
exe=ASITcfg
req=S000INI,*?OVD_REQ_IREQ:S313IREQ
rpt=OVD_IN_USE
trg=?OVD_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=OVD_IN_USE

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[OVD_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Virtual Directory in use?"
inp="Is Oracle Virtual Directory used (Y/N)?"
var=ovd_default1,OVD_HOME,get_install

[ovd_default1]
typ=D
alt=ovd_default2
dft="${ORACLE_HOME}/ovd"
dsc="Default Oracle Virtual Directory home directory (AS11g)"
nam=-TMP_HOME

[ovd_default2]
typ=D
dft="${ORACLE_HOME}/OViD"
dsc="Default Oracle Virtual Directory home directory (pre AS11g)"
nam=-TMP_HOME

[OVD_HOME]
typ=D
dft="${TMP_HOME}"
dsc="Oracle Virtual Directory home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle Virtual Directory home directory"
val=W

[get_install]
typ=P
alt=check_rcu
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_rcu
dft="match:TMP_INSTALL:^Oracle Identity Management 11g"
dsc="Check for AS 11g install"
nam=-
var=check_profile

[check_rcu]
typ=D
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=check_profile

[check_profile]
typ=B
alt=force_primary
dft=${ofm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is OVD the primary module?"
nam=OVD_PRIMARY
var=OVD_CH_REQ_COMMON,ovd_instance_root

[set_primary]
typ=B
dft=${ovd_primary}
dsc="Is OVD the primary module?"
nam=OVD_PRIMARY
var=OVD_CH_REQ_COMMON,ovd_instance_root

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[OVD_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=ovd_ch_focus,ovd_req_ireq

[ovd_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=OVD_CH_FOCUS

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Setting definitions for Oracle Instance
#------------------------------------------------------------------------------
[ovd_instance_root]
typ=D
alt=chk_oracle_instance,OVD_INSTANCE_ROOT
dft=${INSTANCE_ROOT}
dsc="Instance root directory"
nam=OVD_INSTANCE_ROOT
var=chk_instances

[chk_oracle_instance]
typ=I
dft="exists:ORACLE_INSTANCE"
dsc="Check the ORACLE_INSTANCE environment variable existence"
nam=-
var=dft_instance_root

[dft_instance_root]
typ=D
dft="${ENV.ORACLE_INSTANCE}/.."
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT

[OVD_INSTANCE_ROOT]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance homes to \
     analyze (For example the parent directory of the path specified by an \
     ORACLE_INSTANCE environment variable)"
var=chk_instances

[chk_instances]
typ=B
alt=ovd_comment
dft=0
dsc="Get the directories present in the instance root directory"
exe=chk_instances
nam=-
var=ovd_instances,set_loop,ovd_req_ireq

[ovd_comment]
typ=C
dsc="Report bad Oracle instance root directory"
inp="The specified Oracle instance root directory is either invalid or does \
     not contain some Oracle OVD instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Select instances
#------------------------------------------------------------------------------
[ovd_instances]
typ=M
add="*|All instances|*|all_instances"
bef="Instance list:"
col=1
dft="${TMP_DFT_INSTANCES}"
dsc="Instance list"
dup="Instance already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the instance directory name, or * to \
     select all instances, or ${end} to terminate the list"
itm="${TMP_ITM_INSTANCES}"
mnu="<<I"
nam=OVD_INSTANCES
one="*"
rsp="${TMP_RSP_INSTANCES}"
sep="|"
val=E

[all_instances]
typ=T
dft=${TMP_ALL_INSTANCES}
dsc="List all instances"
nam=-OVD_INSTANCES

[set_loop]
typ=L
dft="${OVD_INSTANCES}"
dsc="Examine all directories"
nam=-cnt
sep="|"
var=set_req_instance

[set_req_instance]
typ=D
dft="${OVD_OI${cnt}_REQ_INSTANCE}"
dsc="Instance ${cnt}"
nam=OVD_OI${cnt}_REQ_INSTANCE
var=set_oh_focus,set_oi_focus

[set_oh_focus]
typ=T
dft="HTTP,Manifest,OPMN,OVD"
dsc="Focus areas for Oracle home associated to the instance home"
nam=OVD_OH${cnt}_FOCUS

[set_oi_focus]
typ=T
dft="HTTP,OPMN,OVD"
dsc="Focus areas for instance home"
nam=OVD_OI${cnt}_FOCUS

[ovd_req_ireq]
typ=B
dft=1
dsc="Does OVD require Oracle Instance Request Handler collection?"
nam=OVD_REQ_IREQ
