# S343OUD.cfg: Collects Oracle Unified Directory Information
# $Id: S343OUD.cfg,v 1.3 2012/08/22 13:19:42 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S343OUD.cfg,v 1.3 2012/08/22 13:19:42 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120821  KRA  Remove platform restriction in OUD_MENU setting.

###############################################################################
# Collect Oracle Unified Directory setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${OUD_IN_USE}
dsc="Collects Oracle Unified Directory Information"
fam=Cygwin,Unix,Windows
req=S000INI
rpt=OUD_IN_USE,OUD_ADVANCED
ttl="Oracle Product Settings"
var=force_oud_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_oud_tests]
typ=B
alt=OUD_IN_USE
dft=0
dsc="Is the Oracle Unified Directory collection required by the profile?"
nam=-
var=oud_in_use

[oud_in_use]
typ=B
dft=1
dsc="Is Oracle Unified Directory in use?"
nam=OUD_IN_USE
var=get_install

[no_oud]
typ=B
dft=0
dsc="Is Oracle Unified Directory in use?"
nam=OUD_IN_USE

[OUD_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Unified Directory in use?"
inp="Do you want RDA to collect Oracle Unified Directory information (Y/N)?"
var=get_install

[get_install]
typ=P
alt=check_oud
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_oud
dft="match:TMP_INSTALL:^Oracle Unified Directory"
dsc="Check for OUD install"
nam=-
var=OUD_REPLICATION,OUD_INSTANCE,OUD_ADMIN_USER,OUD_HOST,OUD_ADMIN_PORT,\
    OUD_LDAP_PORT,OUD_LDAPS_PORT,OUD_DIR_MANAGER,OUD_JDK,OUD_ADVANCED

[check_oud]
typ=F
alt=oud_comment1,no_oud
dft="<<Search:ORACLE_HOME:p:^oud(-proxy|-replication-gateway)-setup(\.bat)?$"
dsc="Check for OUD-related files under Oracle home directory"
nam=-
var=OUD_REPLICATION,OUD_INSTANCE,OUD_ADMIN_USER,OUD_HOST,OUD_ADMIN_PORT,\
    OUD_LDAP_PORT,OUD_LDAPS_PORT,OUD_DIR_MANAGER,OUD_JDK,OUD_ADVANCED

[oud_comment1]
typ=C
dsc="Report bad Oracle Unified Directory Oracle home for such a collection"
inp="The specified Oracle Unified Directory Oracle home directory does not \
     exist or does not contain some Oracle Unified Directory installation \
     related-files. The collection is disabled.\n\n\
     Hit 'Return' to continue"

[OUD_REPLICATION]
typ=B
dft=0
dsc="Is replication in use?"
inp="Do you want RDA to collect replication information (Y/N)?"

#------------------------------------------------------------------------------
# Setting definitions for Oracle Instance
#------------------------------------------------------------------------------
[OUD_INSTANCE]
typ=D
dft=${ENV.ORACLE_INSTANCE}
dsc="Instance home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance home to \
     analyze (For example the path specified by an ORACLE_INSTANCE environment \
     variable)"
val=W
var=chk_instance

[chk_instance]
typ=D
alt=oud_comment2
dft=${OUD_INSTANCE}/OUD
dsc="Check for valid instance home directory"
nam=-

[oud_comment2]
typ=C
dsc="Report bad Oracle instance directory"
inp="The specified Oracle instance home directory is either invalid or does \
     not contain some OUD instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Common setting definitions
#------------------------------------------------------------------------------
[OUD_ADMIN_USER]
typ=T
dft="admin"
dsc="Admin user"
inp="Enter the Admin user"

[OUD_HOST]
typ=T
dft="${RDA.HOST}"
dsc="Fully qualified OUD host name"
err="Invalid character found in the host name"
inp="Enter the fully qualified OUD host name"
ref="^[\w\-\.]+$"
val=E

[OUD_ADMIN_PORT]
typ=N
dsc="Admin port"
err="The port number must be an integer number between 1 and 65535"
inp="Enter the Admin port"
ref="I[1,65535]"
val=F

[OUD_LDAP_PORT]
typ=N
dsc="LDAP listen port (non-SSL)"
err="The port number must be an integer number between 1 and 65535"
inp="Enter the bind LDAP listen port (non-SSL)"
ref="I[1,65535]"
val=F

[OUD_LDAPS_PORT]
typ=N
dsc="LDAP listen port (SSL)"
err="The port number must be an integer number between 1 and 65535"
inp="Enter the bind LDAP listen port (SSL)"
ref="I[1,65535]"
val=F

[OUD_DIR_MANAGER]
typ=T
dft="cn=Directory Manager"
dsc="Directory manager"
inp="Enter the Directory Manager"

[OUD_JDK]
typ=D
dft=${ENV.JAVA_HOME}
dsc="Location of the JDK used for Oracle Unified Directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the JDK used for Oracle Unified Directory" 	
val=W

[OUD_ADVANCED]
typ=B
dft=0
dsc="Advanced collection mode"
hlp="You can set the advanced mode for detailed report collection. Advanced \
     collections can take significantly more time."
inp="Is the advanced mode to be enabled (Y/N)?"
lvl=1
var=OUD_MENU,check_menu

[OUD_MENU]
typ=M
bef="Diagnostic information:"
dft="^"
dsc="Diagnostic information to collect"
err="The item list is invalid. Entering the number for the first item, \
     separated from the number for the next item by a comma (,), and so on \
     down the list of items. When there are several consecutive items you wish \
     to select, you can select them by entering the first number, dash (-), \
     the last number."
inp="Enter the diagnostic information to collect, as a comma-separated list \
     of item numbers or ranges"
itm="1|DB Information|\
     2|Monitoring Statistics|\
     3|Java Statistics|\
     4|Instance Hang Capture"
lvl=1
mnu="<<N"
pck=1
rsp="1|DB_INFO|2|MONITOR_STAT|3|JAVA_STAT|4|INSTANCE_HANG"
sep="|"
val=E

[check_menu]
typ=I
dft="match:OUD_MENU:MONITOR_STAT|JAVA_STAT|INSTANCE_HANG"
dsc="Apply the menu-related setup"
nam=-
var=OUD_LOOP,OUD_SLEEP

[OUD_LOOP]
typ=N
dft=4
dsc="Number of iterations to perform on the items selected in the menu"
err="The number of iterations must be a positive integer"
hlp="Item 'DB Information' will not be included in the iteration"
inp="Enter the number of iterations to perform on the items selected in the \
     menu"
lvl=1
ref="I[0,["
val=F

[OUD_SLEEP]
typ=N
dft=30
dsc="Number of seconds to sleep between each iterations"
err="The number of seconds must be a positive integer"
inp="Enter the wait time (in seconds) between each iterations"
lvl=1
ref="I[0,["
val=F
