# S353UOA.cfg: Collects Oracle Universal Online Archive Information
# $Id: S353UOA.cfg,v 2.13 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S353UOA.cfg,v 2.13 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect the Oracle Universal Online Archive setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${UOA_IN_USE}
dsc="Collects Oracle Universal Online Archive Information"
exe=ASITcfg
man="Applies to Oracle Universal Online Archive 10.2.2.x and later"
req=S352ECM,*?UOA_REQ_WREQ:S301WREQ,*?UOA_REQ_IREQ:S313IREQ
rpt=UOA_IN_USE
trg=?UOA_REQ_WREQ:S301WREQ,?UOA_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=check_depth

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_depth]
typ=B
alt=check_uoa1
dft=${CUR.DEPTH}
dsc="Does the setup flow is through profile?"
nam=-
var=DOMAIN_HOME,check_domain_u,check_domain_w

#------------------------------------------------------------------------------
# Setting definitions for INI-based module
#------------------------------------------------------------------------------
[DOMAIN_HOME]
typ=D
dft=${ENV.DOMAIN_HOME}
dsc="Oracle WebLogic Server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W

[check_domain_u]
typ=F
alt=uoa_comment
dft=${DOMAIN_HOME}/bin/setDomainEnv.sh
dsc="Validate the domain entered"
fam=Unix
nam=-
var=set_home_pattern,oracle_home

[check_domain_w]
typ=F
alt=uoa_comment
dft=${DOMAIN_HOME}/bin/setDomainEnv.cmd
dsc="Validate the domain entered"
fam=Cygwin,Windows
nam=-
var=set_home_pattern,oracle_home

[set_home_pattern]
typ=T
dft='UCM_ORACLE_HOME|MW_ORA_HOME|ORACLE_HOME'
dsc="Oracle home pattern for associated logic"
nam=-TMP_HOME_PATTERN

[oracle_home]
typ=D
dsc="Oracle home directory"
exe=get_ora_home
nam=ORACLE_HOME

[uoa_comment]
typ=C
dsc="Report bad Oracle WebLogic domain home directory"
inp="The specified domain home directory is either invalid or does not \
     contain some Oracle WebLogic related-files. The collection is \
     disabled. Rerun the setup with the correct domain home directory.\n\n\
     Hit 'Return' to continue"
val=F

#------------------------------------------------------------------------------
# Setting definitions for UOA-based setup
#------------------------------------------------------------------------------
[check_uoa1]
typ=D
alt=check_uoa2
dft="${ORACLE_HOME}/uoa"
dsc="Check for UOA 11g"
nam=-
var=force_uoa_tests

[check_uoa2]
typ=D
alt=no_uoa
dft="${ORACLE_HOME}/content"
dsc="Check for UOA 10g"
nam=-
var=force_uoa_tests

[no_uoa]
typ=B
dft=0
dsc="Is Oracle Universal Online Archive information requested?"
nam=UOA_IN_USE

[force_uoa_tests]
typ=B
alt=UOA_IN_USE
dft=0
dsc="Are the Oracle Universal Online Archive tests required by the profile?"
nam=-
var=uoa_in_use

[uoa_in_use]
typ=B
dft=1
dsc="Is Oracle Universal Online Archive information requested?"
nam=UOA_IN_USE
var=check_uoa3

[UOA_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Universal Online Archive information requested?"
inp="Do you want RDA to collect Oracle Universal Online Archive \
     information (Y/N)?"
var=check_uoa3

[check_uoa3]
typ=D
alt=check_uoa4
dft="${ORACLE_HOME}/uoa"
dsc="Check for UOA 11g"
nam=-
var=check_profile

[check_uoa4]
typ=D
dft="${ORACLE_HOME}/content"
dsc="Check for UOA 10g"
nam=-
var=UOA_TAIL1,UOA_TAIL2

[check_profile]
typ=B
alt=force_primary
dft=${ecm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is UOA the primary module?"
nam=UOA_PRIMARY
var=UOA_CH_REQ_COMMON,UOA_DOM_REQ_DOMAIN

[set_primary]
typ=B
dft=${uoa_primary}
dsc="Is UOA the primary module?"
nam=UOA_PRIMARY
var=UOA_CH_REQ_COMMON,UOA_DOM_REQ_DOMAIN

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[UOA_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=uoa_ch_focus,uoa_req_ireq

[uoa_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=UOA_CH_FOCUS

[uoa_req_ireq]
typ=B
dft=1
dsc="Does UOA require Oracle Instance Request Handler collection?"
nam=UOA_REQ_IREQ

#------------------------------------------------------------------------------
# Setting definitions for Oracle UOA 11g
#------------------------------------------------------------------------------
[UOA_DOM_REQ_DOMAIN]
typ=D
dft=${DOMAIN_HOME:${ENV.DOMAIN_HOME}}
dsc="Oracle WebLogic server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,get_user,check_user,uoa_top_focus,uoa_dom_focus,uoa_req_wreq

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=uoa_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[uoa_wls_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=UOA_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=UOA_DOM_WLS_SERVERS

[uoa_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for WebLogic middleware collection"
nam=UOA_TOP_FOCUS

[uoa_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg,UOA,WLST"
dsc="Focus areas for WebLogic domain collection"
nam=UOA_DOM_FOCUS

[uoa_req_wreq]
typ=B
dft=1
dsc="Does UOA require Oracle WebLogic Request Handler collection?"
nam=UOA_REQ_WREQ

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_UOA_WLS_USER

[check_user]
typ=I
alt=UOA_DOM_WLS_USER
dft="match:TMP_UOA_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=uoa_dom_wls_user

[uoa_dom_wls_user]
typ=T
clr=-
dft=${UOA_DOM_WLS_USER}
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If you \
     want RDA to collect information from the default Oracle WebLogic Server \
     user retrieved from domain configuration file, then enter a dash \
     ('${clr}')."
lvl=1
nam=UOA_DOM_WLS_USER
ref="^\S*$"
val=E

[UOA_DOM_WLS_USER]
typ=T
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection"
ref="^\S+$"
val=E

#------------------------------------------------------------------------------
# Setting definitions for Oracle UOA 10g
#------------------------------------------------------------------------------
[UOA_TAIL1]
typ=N
dft=5000
dsc="Maximum number of lines to extract from log files"
err="The number of lines must be a positive integer"
inp="How many lines do you want RDA to extract at most from log files?"
lvl=9
ref=I[0,[
val=F

[UOA_TAIL2]
typ=N
dft=500
dsc="Maximum number of lines for other tail operations"
err="The number of lines must be a positive integer"
inp="Enter the maximum number of lines for other tail operations"
lvl=9
ref="I[0,["
val=F
