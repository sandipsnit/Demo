# S354UCM.cfg: Collects Oracle Universal Content Management Information
# $Id: S354UCM.cfg,v 2.13 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S354UCM.cfg,v 2.13 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect the Oracle Universal Content Management setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${UCM_IN_USE}
dsc="Collects Oracle Universal Content Management Information"
exe=ASITcfg
req=S352ECM,*?UCM_REQ_WREQ:S301WREQ,*?UCM_REQ_IREQ:S313IREQ
rpt=UCM_IN_USE
trg=?UCM_REQ_WREQ:S301WREQ,?UCM_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=check_depth

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_depth]
typ=B
alt=force_ucm_tests
dft=${CUR.DEPTH}
dsc="Does the setup flow is through profile?"
nam=-
var=DOMAIN_HOME,chk_ucm_dom

#------------------------------------------------------------------------------
# Setting definitions for INI-based module
#------------------------------------------------------------------------------
[DOMAIN_HOME]
typ=D
dft=${ENV.DOMAIN_HOME}
dsc="Oracle WebLogic Server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W

[chk_ucm_dom]
typ=D
alt=ucm_comment
dft=${DOMAIN_HOME}/ucm
dsc="Oracle WebLogic UCM subdirectory"
nam=-
var=set_home_pattern,oracle_home

[set_home_pattern]
typ=T
dft='UCM_ORACLE_HOME|MW_ORA_HOME|ORACLE_HOME'
dsc="Oracle home pattern for associated logic"
nam=-TMP_HOME_PATTERN

[oracle_home]
typ=D
dsc="Oracle home directory"
exe=get_ora_home
nam=ORACLE_HOME

[ucm_comment]
typ=C
dsc="Report bad Oracle WebLogic domain home directory"
inp="The specified domain home directory is either invalid or does not \
     contain some Oracle WebLogic related-files. The collection is \
     disabled. Rerun the setup with the correct domain home directory.\n\n\
     Hit 'Return' to continue"
val=F

#------------------------------------------------------------------------------
# Setting definitions for UCM-based setup
#------------------------------------------------------------------------------
[force_ucm_tests]
typ=B
alt=UCM_IN_USE
dft=0
dsc="Are the Oracle Universal Content Management tests required by the profile?"
nam=-
var=ucm_in_use

[ucm_in_use]
typ=B
dft=1
dsc="Is Oracle Universal Content Management information requested?"
nam=UCM_IN_USE
var=check_ucm,UCM_LOG_AGE

[UCM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Universal Content Management information requested?"
inp="Do you want RDA to collect Oracle Universal Content Management \
     information (Y/N)?"
var=check_ucm,UCM_LOG_AGE

[check_ucm]
typ=D
alt=UCM_CS_HOME,UCM_IBR_HOME,UCM_SSPU_HOME
dft="${ORACLE_HOME}/ucm"
dsc="Check for UCM 11g"
nam=-
var=check_profile

[check_profile]
typ=B
alt=force_primary
dft=${ecm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is UCM the primary module?"
nam=UCM_PRIMARY
var=UCM_CH_REQ_COMMON,UCM_DOM_REQ_DOMAIN

[set_primary]
typ=B
dft=${ucm_primary}
dsc="Is UCM the primary module?"
nam=UCM_PRIMARY
var=UCM_CH_REQ_COMMON,UCM_DOM_REQ_DOMAIN

#------------------------------------------------------------------------------
# Setting definitions for prior UCM 11g
#------------------------------------------------------------------------------
[UCM_CS_HOME]
typ=D
dsc="Content Server home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the full path of the Content Server home directory"
val=W

[UCM_IBR_HOME]
typ=D
dsc="Inbound Refinery home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the full path of the Inbound Refinery home directory"
val=W

[UCM_SSPU_HOME]
typ=D
dsc="Site Studio Publishing Utility home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the full path of the Site Studio Publishing Utility home directory"
val=W

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[UCM_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=ucm_ch_focus,ucm_req_ireq

[ucm_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=UCM_CH_FOCUS

[ucm_req_ireq]
typ=B
dft=1
dsc="Does UCM require Oracle Instance Request Handler collection?"
nam=UCM_REQ_IREQ

#------------------------------------------------------------------------------
# Setting definitions for UCM 11g
#------------------------------------------------------------------------------
[UCM_DOM_REQ_DOMAIN]
typ=D
dft=${DOMAIN_HOME:${ENV.DOMAIN_HOME}}
dsc="Oracle WebLogic server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,get_user,check_user,ucm_top_focus,ucm_dom_focus,ucm_req_wreq

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=ucm_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[ucm_wls_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=UCM_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=UCM_DOM_WLS_SERVERS

[ucm_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for WebLogic middleware collection"
nam=UCM_TOP_FOCUS

[ucm_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg,UCM,WLST"
dsc="Focus areas for WebLogic domain collection"
nam=UCM_DOM_FOCUS

[ucm_req_wreq]
typ=B
dft=1
dsc="Does UCM require Oracle WebLogic Request Handler collection?"
nam=UCM_REQ_WREQ

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_UCM_WLS_USER

[check_user]
typ=I
alt=UCM_DOM_WLS_USER
dft="match:TMP_UCM_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=ucm_dom_wls_user

[ucm_dom_wls_user]
typ=T
clr=-
dft=${UCM_DOM_WLS_USER}
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If you \
     want RDA to collect information from the default Oracle WebLogic Server \
     user retrieved from domain configuration file, then enter a dash \
     ('${clr}')."
lvl=1
nam=UCM_DOM_WLS_USER
ref="^\S*$"
val=E

[UCM_DOM_WLS_USER]
typ=T
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection"
ref="^\S+$"
val=E

#------------------------------------------------------------------------------
# Common setting definitions
#------------------------------------------------------------------------------
[UCM_LOG_AGE]
typ=N
dft=5
dsc="Age limit (in days) for the log files to collect"
err="The number of days must be a positive number"
inp="Specify the age limit (in days) for the log files you want RDA to collect"
lvl=1
ref="R[0,["
val=F
