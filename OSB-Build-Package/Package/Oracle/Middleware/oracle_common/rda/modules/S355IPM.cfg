# S355IPM.cfg: Collects Oracle Imaging and Process Management Information
# $Id: S355IPM.cfg,v 1.12 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S355IPM.cfg,v 1.12 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect Oracle Imaging and Process Management setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${IPM_IN_USE}
dsc="Collects Oracle Imaging and Process Management Information"
exe=ASITcfg
req=S352ECM,*?IPM_REQ_WREQ:S301WREQ,*?IPM_REQ_IREQ:S313IREQ
rpt=IPM_IN_USE
trg=?IPM_REQ_WREQ:S301WREQ,?IPM_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=check_depth

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_depth]
typ=B
alt=force_ipm_tests
dft=${CUR.DEPTH}
dsc="Does the setup flow is through profile?"
nam=-
var=DOMAIN_HOME,check_domain_u,check_domain_w

#------------------------------------------------------------------------------
# Setting definitions for INI-based module
#------------------------------------------------------------------------------
[DOMAIN_HOME]
typ=D
dft=${ENV.DOMAIN_HOME}
dsc="Oracle WebLogic Server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W

[check_domain_u]
typ=F
alt=ipm_comment
dft=${DOMAIN_HOME}/bin/setDomainEnv.sh
dsc="Validate the domain entered"
fam=Unix
nam=-
var=set_home_pattern,oracle_home

[check_domain_w]
typ=F
alt=ipm_comment
dft=${DOMAIN_HOME}/bin/setDomainEnv.cmd
dsc="Validate the domain entered"
fam=Cygwin,Windows
nam=-
var=set_home_pattern,oracle_home

[set_home_pattern]
typ=T
dft='UCM_ORACLE_HOME|MW_ORA_HOME|ORACLE_HOME'
dsc="Oracle home pattern for associated logic"
nam=-TMP_HOME_PATTERN

[oracle_home]
typ=D
dsc="Oracle home directory"
exe=get_ora_home
nam=ORACLE_HOME

[ipm_comment]
typ=C
dsc="Report bad Oracle WebLogic domain home directory"
inp="The specified domain home directory is either invalid or does not \
     contain some Oracle WebLogic related-files. The collection is \
     disabled. Rerun the setup with the correct domain home directory.\n\n\
     Hit 'Return' to continue"
val=F

#------------------------------------------------------------------------------
# Setting definitions for IPM-based setup
#------------------------------------------------------------------------------
[force_ipm_tests]
typ=B
alt=IPM_IN_USE
dft=0
dsc="Is the Oracle Imaging and Process Management required by the profile?"
nam=-
var=ipm_in_use

[ipm_in_use]
typ=B
dft=1
dsc="Is Oracle Imaging and Process Management information requested?"
nam=IPM_IN_USE
var=check_ipm

[IPM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Imaging and Process Management information requested?"
inp="Do you want RDA to analyze Oracle Imaging and Process Management (Y/N)?"
var=check_ipm

[check_ipm]
typ=D
dft="${ORACLE_HOME}/ipm"
dsc="Check for IPM 11g"
nam=-
var=check_profile

[check_profile]
typ=B
alt=force_primary
dft=${ecm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is IPM the primary module?"
nam=IPM_PRIMARY
var=IPM_CH_REQ_COMMON,IPM_DOM_REQ_DOMAIN

[set_primary]
typ=B
dft=${ipm_primary}
dsc="Is IPM the primary module?"
nam=IPM_PRIMARY
var=IPM_CH_REQ_COMMON,IPM_DOM_REQ_DOMAIN

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[IPM_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=ipm_ch_focus,ipm_req_ireq

[ipm_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=IPM_CH_FOCUS

[ipm_req_ireq]
typ=B
dft=1
dsc="Does IPM require Oracle Instance Request Handler collection?"
nam=IPM_REQ_IREQ

#------------------------------------------------------------------------------
# Setting definitions for Oracle IPM 11g
#------------------------------------------------------------------------------
[IPM_DOM_REQ_DOMAIN]
typ=D
dft=${DOMAIN_HOME:${ENV.DOMAIN_HOME}}
dsc="Oracle WebLogic server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,get_user,check_user,ipm_top_focus,ipm_dom_focus,ipm_req_wreq

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=ipm_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[ipm_wls_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=IPM_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=IPM_DOM_WLS_SERVERS

[ipm_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for WebLogic middleware collection"
nam=IPM_TOP_FOCUS

[ipm_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,IPM,MinDomCfg,MinSrvCfg,WLST"
dsc="Focus areas for WebLogic domain collection"
nam=IPM_DOM_FOCUS

[ipm_req_wreq]
typ=B
dft=1
dsc="Does IPM require Oracle WebLogic Request Handler collection?"
nam=IPM_REQ_WREQ

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_IPM_WLS_USER

[check_user]
typ=I
alt=IPM_DOM_WLS_USER
dft="match:TMP_IPM_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=ipm_dom_wls_user

[ipm_dom_wls_user]
typ=T
clr=-
dft=${IPM_DOM_WLS_USER}
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If you \
     want RDA to collect information from the default Oracle WebLogic Server \
     user retrieved from domain configuration file, then enter a dash \
     ('${clr}')."
lvl=1
nam=IPM_DOM_WLS_USER
ref="^\S*$"
val=E

[IPM_DOM_WLS_USER]
typ=T
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection"
ref="^\S+$"
val=E

