# S357ODC.def: Collects Oracle Document Capture Information
# $Id: S357ODC.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S357ODC.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S357ODC - Collects Oracle Document Capture Information

=head1 DESCRIPTION

This module collects Oracle Document Capture-related information.

The following reports can be generated and are regrouped under C<Oracle
Document Capture>:

=head1 REPORTS

=cut

# Validate the platform
if !or(${RDA.WINDOWS},${RDA.CYGWIN})
 return

echo tput('bold'),'Processing ODC module ...',tput('off')

# Initialization
var $AGE      = getSetting('ODC_LOG_AGE',5)
var $CS_LOG   = getSetting('ODC_CS_LOG','')
var $IS_LOG   = getSetting('ODC_IS_LOG','')
var $ODC_HOME = getSetting('ODC_HOME','')
var $PPS_LOG  = getSetting('ODC_PPS_LOG','')
var $RS_LOG   = getSetting('ODC_RS_LOG','')
var $TAIL     = getSetting('RDA_TAIL',1000)

var $MNU = 'Enterprise Content Management'
var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'

pretoc '^1:',$MNU
pretoc '1+:Oracle Document Capture'

# Load the common macros
run library()

=head1 ORACLE DOCUMENT CAPTURE COLLECTIONS

=head2 Commit Server

Collects Commit Server log files.

=cut

debug ' Inside ODC module, collecting commit server log files'
pretoc '2:Commit Server'
pretoc '3:Log Files'
call sort_files(4,$TAIL,\
 grepDir($CS_LOG,'^CS\d{2}-\d{2}-\d{4}\.LOG$',concat('ipm',$AGE)))
unpretoc 2

=head2 Import Server

Collects Import Server log files.

=cut

debug ' Inside ODC module, collecting import server log files'
pretoc '2:Import Server'
pretoc '3:Log Files'
call sort_files(4,$TAIL,\
 grepDir($IS_LOG,'^IS\d{2}-\d{2}-\d{4}\.LOG$',concat('ipm',$AGE)))
unpretoc 2

=head2 Recognition Server

Collects Recognition Server log files.

=cut

debug ' Inside ODC module, collecting recognition server log files'
pretoc '2:Recognition Server'
pretoc '3:Log Files'
call sort_files(4,$TAIL,\
 grepDir($RS_LOG,'^RS\d{2}-\d{2}-\d{4}\.LOG$',concat('ipm',$AGE)))
unpretoc 2

=head1 ORACLE DISTRIBUTED DOCUMENT CAPTURE COLLECTIONS

Collects Oracle Distributed Document Capture log files.

=cut

debug ' Inside ODC module, collecting ODDC log files'
pretoc '2:Oracle Distributed Document Capture'
pretoc '3:Log Files'
call sort_files(4,$TAIL,\
 grepDir($PPS_LOG,'^PPS\d{2}\d{2}\d{4}\.LOG$',concat('ipm',$AGE)))
unpretoc 3

=head2 not_found - Not found

Used as a warning when none of the Oracle Document Capture files are found.

=cut

if !isTocCreated()
{debug ' Inside ODC module, no file found'
 report not_found
 write 'No Oracle Document Capture configuration files were found and all \
        files were optional. This does not mean there was necessarily a \
        problem with RDA, but it should be investigated.'
 toc '2:[[',getFile(),'][rda_report][Not found]]'
}

# Disable the group title in next index
toc '-:',$MNU

=head1 SEE ALSO

L<S352ECM.def|modules::S352ECM>,
L<library.def|modules::library>

=begin credits

=over 10

=item RDA 4.21: Vince Cook.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
