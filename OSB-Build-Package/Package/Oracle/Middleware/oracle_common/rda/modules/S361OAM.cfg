# S361OAM.cfg: Collects Oracle Access Manager Information
# $Id: S361OAM.cfg,v 1.6 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S361OAM.cfg,v 1.6 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect Oracle Access Manager setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${OAM_IN_USE}
dsc="Collects Oracle Access Manager Information"
exe=ASITcfg
man="Applies to Oracle Access Manager 11g and later"
req=S000INI,*+S301WREQ,*?OAM_REQ_IREQ:S313IREQ
rpt=OAM_IN_USE
trg=+S301WREQ,?OAM_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=get_install

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[get_install]
typ=P
alt=check_oam
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_oam
dft="match:TMP_INSTALL:^Oracle Access Manager"
dsc="Check the installation type"
nam=-
var=force_oam_tests

[check_oam]
typ=D
alt=no_oam
dft=${ORACLE_HOME}/oam
dsc="Oracle Access Manager home directory"
nam=-
var=force_oam_tests

[no_oam]
typ=B
dft=0
dsc="Is Oracle Access Manager in use?"
nam=OAM_IN_USE

[force_oam_tests]
typ=B
alt=OAM_IN_USE
dft=0
nam=-
var=oam_in_use

[oam_in_use]
typ=B
dft=1
dsc="Is Oracle Access Manager in use?"
nam=OAM_IN_USE
var=OAM_CH_REQ_COMMON,OAM_DOM_REQ_DOMAIN

[OAM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Access Manager in use?"
inp="Do you want RDA to collect Oracle Access Manager information (Y/N)?"
var=OAM_CH_REQ_COMMON,OAM_DOM_REQ_DOMAIN

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[OAM_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=oam_ch_focus,oam_req_ireq

[oam_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=OAM_CH_FOCUS

[oam_req_ireq]
typ=B
dft=1
dsc="Does OAM require Oracle Instance Request Handler collection?"
nam=OAM_REQ_IREQ

#------------------------------------------------------------------------------
# Setting definitions for Oracle WebLogic Server
#------------------------------------------------------------------------------
[OAM_DOM_REQ_DOMAIN]
typ=D
dft=${ENV.DOMAIN_HOME}
dsc="Oracle WebLogic Server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,get_user,check_user,oam_top_focus,oam_dom_focus

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=oam_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[oam_wls_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=OAM_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=OAM_DOM_WLS_SERVERS

[oam_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for Oracle WebLogic Server Middleware collection"
nam=OAM_TOP_FOCUS

[oam_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg,OAM,WLST"
dsc="Focus areas for Oracle WebLogic Server domain collection"
nam=OAM_DOM_FOCUS

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_OAM_WLS_USER

[check_user]
typ=I
alt=OAM_DOM_WLS_USER
dft="match:TMP_OAM_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=oam_dom_wls_user

[oam_dom_wls_user]
typ=T
clr=-
dft=${OAM_DOM_WLS_USER}
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If you \
     want RDA to collect information from the default Oracle WebLogic Server \
     user retrieved from domain configuration file, then enter a dash \
     ('${clr}')."
lvl=1
nam=OAM_DOM_WLS_USER
ref="^\S*$"
val=E

[OAM_DOM_WLS_USER]
typ=T
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection"
ref="^\S+$"
val=E
