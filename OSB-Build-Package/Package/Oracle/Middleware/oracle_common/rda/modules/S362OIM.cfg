# S362OIM.cfg: Collects Oracle Identity Manager Information
# $Id: S362OIM.cfg,v 2.15 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S362OIM.cfg,v 2.15 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect the Oracle Identity Manager setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${OIM_IN_USE}
dsc="Collects Oracle Identity Manager Information"
env=JBOSS_HOME
exe=OIMsetup
req=S000INI,*?OIM_REQ_WREQ:S301WREQ,*?OIM_REQ_IREQ:S313IREQ
rpt=OIM_IN_USE
trg=?OIM_REQ_WREQ:S301WREQ,?OIM_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=force_oim_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_oim_tests]
typ=B
alt=OIM_IN_USE
dft=0
dsc="Are the Oracle Identity Manager tests required by the profile?"
nam=-
var=oim_in_use

[oim_in_use]
typ=B
dft=1
dsc="Is Oracle Identity Manager information requested?"
nam=OIM_IN_USE
var=OIM_SERVER,OIM_PORT,OIM_NAME,OIM_USER,OIM_TIMEOUT,OIM_RDBMS,OIM_TEST_CONN,\
    OIM_LOCAL

[OIM_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Oracle Identity Manager information requested?"
inp="Do you want RDA to analyze Oracle Identity Manager (Y/N)?"
var=OIM_SERVER,OIM_PORT,OIM_NAME,OIM_USER,OIM_TIMEOUT,OIM_RDBMS,OIM_TEST_CONN,\
    OIM_LOCAL

#------------------------------------------------------------------------------
# Settings for Diagnostics Dashboard Collections
#------------------------------------------------------------------------------
[OIM_SERVER]
typ=T
dft="${RDA.HOST}"
dsc="OIM diagnostic dashboard server"
err="Invalid character found in the server name"
inp="Enter the fully qualified host name for OIM diagnostic dashboard"
ref="^[\w\-\.]+$"
val=E

[OIM_PORT]
typ=N
dft=8080
dsc="OIM diagnostic dashboard port"
err="The port number is an integer number greater than zero"
inp="Enter the port number used for OIM diagnostic dashboard"
ref=I]0,[
val=E

[OIM_NAME]
typ=T
dft="XIMDD"
dsc="OIM diagnostic dashboard application name"
err="Invalid character found in the application name"
inp="Enter the OIM diagnostic dashboard application name"
ref="^\w*$"
val=E

[OIM_USER]
typ=T
dft="XELSYSADM"
dsc="OIM user name to use in lock test"
inp="Enter the user name for OIM to test whether it is locked or not"

[OIM_TIMEOUT]
typ=N
dft=150
dsc="OIM diagnostic dashboard timeout"
err="The timeout value is an integer number greater than zero"
inp="Enter the maximum time (in seconds) to collect OIM diagnostic dashboard \
     information"
lvl=1
ref=I]0,[
val=E

#------------------------------------------------------------------------------
# Settings for database home specific operations (SQL operations)
#------------------------------------------------------------------------------
[OIM_RDBMS]
typ=B
dft=${RDA_DEFAULT:0}
dsc="OIM database information collection required?"
inp="Do you want RDA to collect OIM Database information (Y/N)?"
var=OIM_DB_USER,OIM_TNS_ALIAS

[OIM_DB_USER]
typ=T
dsc="OIM database user name"
inp="Enter the user name for OIM database"

[OIM_TNS_ALIAS]
typ=T
dft=${ORACLE_SID}
dsc="OIM database connect string"
inp="Enter the connect string to the OIM database"

#------------------------------------------------------------------------------
# Settings for basic connectivity, provisioning and reconciliation tests
#------------------------------------------------------------------------------
[OIM_TEST_CONN]
typ=B
dft=1
dsc="Perform IT resource type-name tests using OIM diagnostic dashboard?"
inp="The basic connectivity, provisioning and reconciliation tests is \
     available from OIM 9.1.0.1 and later. Do you want RDA to perform these \
     tests using OIM diagnostic dashboard (Y/N)?"
var=check_db

[check_db]
typ=B
alt=OIM_RESOURCE_ITEMS,check_items
dft=0
dsc="Are IT resources available from the database?"
exe=check_db
nam=-
var=oim_resource_items,OIM_USE_RESOURCES

[OIM_RESOURCE_ITEMS]
typ=T
dft=''
dsc="Known IT Resource type-name combinations"

[oim_resource_items]
typ=T
dft="${OIM_ITEMS}"
dsc="Known IT Resource type-name combinations"
nam=OIM_RESOURCE_ITEMS

[check_items]
typ=I
alt=oim_resources
dft="match:OIM_RESOURCE_ITEMS:\S"
dsc="Are resources items available from a previous run?"
nam=-
var=OIM_USE_RESOURCES

[OIM_USE_RESOURCES]
typ=B
alt=oim_resources
dft=1
dsc="Select the IT resources from known ones?"
inp="Do you want to select the IT resources from a list of known ones (Y/N)?"
var=OIM_RESOURCES

[OIM_RESOURCES]
typ=M
bef="IT Resource Type-Name Combination List:"
dft="^"
dup="IT Resource type-name combination already selected"
dsc="List of requested IT Resource type-name combinations"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the IT Resource type-name combination \
     or ${end} to terminate the list"
itm="${OIM_RESOURCE_ITEMS}"
mnu="<<N"
rsp="^"
sep="|"
val=E

[oim_resources]
typ=T
dft="${OIM_RESOURCES}"
dsc="List of requested IT Resource type-name combinations"
end="."
err="IT resource type and name can only start with a alphanumeric character, \
     followed by more alphanumeric characters or spaces. Use a dash (-) to \
     separate the type from the name."
inp="Enter the IT resource type and IT resource name in the format \
     'type-name'. Enter ${end} to terminate the list"
nam=OIM_RESOURCES
ref="^[a-zA-Z\d][a-zA-Z\d\s]+-[a-zA-Z\d][a-zA-Z\d\s]+$"
sep="|"
val=E

#------------------------------------------------------------------------------
# Settings for OIM home collections
#------------------------------------------------------------------------------
[OIM_LOCAL]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is the Oracle home for OIM Server on this host?"
inp="Is the Oracle home for OIM Server on this host (Y/N)?"
var=OIM_HOME,OIM_INTERIM,OIM_AS_TYPE,check_as_type

[OIM_HOME]
typ=D
dft=${ORACLE_HOME}
dsc="OIM Server home directory"
inp="Enter the home directory for the OIM Server"

[OIM_INTERIM]
typ=B
dft=0
dsc="Collect the file/directory list for the interim patches"
inp="Do you want to collect the file and directory list for the interim \
     patches in inventory (Y/N)?"
lvl=1

#------------------------------------------------------------------------------
# Settings for AS home collections
#------------------------------------------------------------------------------
[OIM_AS_TYPE]
typ=T
dft="oc4j"
dsc="Application Server type"
err="Only use jboss, oc4j, weblogic, or websphere as input."
inp="Enter the Application Server type (oc4j, jboss, weblogic, or websphere)"
ref="^(jboss|oc4j|weblogic|websphere)$"
val=E

[check_as_type]
typ=I
dft="decode:OIM_AS_TYPE:oc4j:OIM_AS_HOME,OIM_OC4J_INSTANCE:\
                        jboss:OIM_JBOSS_HOME:\
                        weblogic:get_install"
dsc="Determine which additional information is required"
nam=-

[OIM_AS_HOME]
typ=D
dft=${ORACLE_HOME}
dsc="Application Server home directory"
err="Warning: The specified directory does not exist"
inp="Enter the home directory for the Application Server"
val=W

[OIM_OC4J_INSTANCE]
typ=T
dft=""
dsc="OC4J instance name"
err="The OC4J instance name contains alphanumeric characters only"
inp="Enter the OC4J instance name"
ref="^\w+$"
val=E

[OIM_JBOSS_HOME]
typ=D
dft=${JBOSS_HOME}
dsc="JBoss home directory"
err="Warning: The specified directory does not exist"
inp="Enter the JBoss home directory"
val=W

#------------------------------------------------------------------------------
# Setting definitions for Oracle WebLogic
#------------------------------------------------------------------------------
[get_install]
typ=P
alt=check_server
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_server
dft="match:TMP_INSTALL:^Oracle IDM Suite"
dsc="Check for AS 11g install"
nam=-
var=OIM_CH_REQ_COMMON,OIM_DOM_REQ_DOMAIN

[check_server]
typ=D
alt=missing
dft=${OIM_HOME}/server
dsc="Oracle OIM home server directory"
nam=-
var=OIM_CH_REQ_COMMON,OIM_DOM_REQ_DOMAIN

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[OIM_CH_REQ_COMMON]
typ=D
alt=missing
dft="${OIM_HOME}/../oracle_common"
dsc="Common Product home"
var=oim_ch_focus,oim_req_ireq

[oim_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=OIM_CH_FOCUS

[oim_req_ireq]
typ=B
dft=1
dsc="Does OIM require Oracle Instance Request Handler collection?"
nam=OIM_REQ_IREQ

#------------------------------------------------------------------------------
# Setting definitions for Oracle WebLogic Server domain
#------------------------------------------------------------------------------
[OIM_DOM_REQ_DOMAIN]
typ=D
dft=${DOMAIN_HOME:${ENV.DOMAIN_HOME}}
dsc="Oracle WebLogic server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,get_user,check_user,oim_top_focus,oim_dom_focus,oim_req_wreq

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=oim_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[oim_wls_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=OIM_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=OIM_DOM_WLS_SERVERS

[oim_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for WebLogic middleware collection"
nam=OIM_TOP_FOCUS

[oim_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg,OIM,WLST"
dsc="Focus areas for WebLogic domain collection"
nam=OIM_DOM_FOCUS

[oim_req_wreq]
typ=B
dft=1
dsc="Does OIM require Oracle WebLogic Request Handler collection?"
nam=OIM_REQ_WREQ

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_OIM_WLS_USER

[check_user]
typ=I
alt=OIM_DOM_WLS_USER
dft="match:TMP_OIM_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=oim_dom_wls_user

[oim_dom_wls_user]
typ=T
clr=-
dft=${OIM_DOM_WLS_USER}
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If you \
     want RDA to collect information from the default Oracle WebLogic Server \
     user retrieved from domain configuration file, then enter a dash \
     ('${clr}')."
lvl=1
nam=OIM_DOM_WLS_USER
ref="^\S*$"
val=E

[OIM_DOM_WLS_USER]
typ=T
dsc="Oracle WebLogic Server user name"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection"
ref="^\S+$"
val=E
