# S363OAAM.cfg: Collects Oracle Adaptive Access Manager Information
# $Id: S363OAAM.cfg,v 1.9 2012/07/24 15:23:47 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S363OAAM.cfg,v 1.9 2012/07/24 15:23:47 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120702  KRA  Include Apache related setting.

###############################################################################
# Collect the Oracle Adaptive Access Manager setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${OAAM_IN_USE}
dsc="Collects Oracle Adaptive Access Manager Information"
exe=OAAMcfg
req=S000INI
rpt=OAAM_IN_USE
ttl="Oracle Product Settings"
var=force_oaam_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_oaam_tests]
typ=B
alt=OAAM_IN_USE
dft=0
dsc="Are the Oracle Adaptive Access Manager tests required by the profile?"
nam=-
var=oamm_in_use

[oamm_in_use]
typ=B
dft=1
dsc="Is Oracle Adaptive Access Manager information requested?"
nam=OAAM_IN_USE
var=OAAM_RDBMS,OAAM_WAS_TYPE,check_was_type,OAAM_HOME,chk_oaam_home1,\
    dft_apache_top,oaam_apache_top,OAAM_AGE,OAAM_LOCATION

[OAAM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Adaptive Access Manager information requested?"
inp="Do you want RDA to analyze Oracle Adaptive Access Manager (Y/N)?"
var=OAAM_RDBMS,OAAM_WAS_TYPE,check_was_type,OAAM_HOME,chk_oaam_home1,\
    dft_apache_top,oaam_apache_top,OAAM_AGE,OAAM_LOCATION

#------------------------------------------------------------------------------
# Settings for database home specific operations (SQL operations)
#------------------------------------------------------------------------------
[OAAM_RDBMS]
typ=B
dft=${RDA_DEFAULT:0}
dsc="OAAM database information collection required?"
inp="Do you want RDA to collect OAAM Database information (Y/N)?"
var=OAAM_DB_USER,OAAM_TNS_ALIAS

[OAAM_DB_USER]
typ=T
dsc="OAAM database user name"
inp="Enter the user name for OAAM database"

[OAAM_TNS_ALIAS]
typ=T
dft=${ORACLE_SID}
dsc="OAAM database connect string"
inp="Enter the connect string to the OAAM database"

#------------------------------------------------------------------------------
# Settings for Web application server operations
#------------------------------------------------------------------------------
[OAAM_WAS_TYPE]
typ=M
cas=0
dft="WLS"
dsc="Web application server type"
err="Enter 1, 2, or 3 only"
inp="Enter the Web application server type"
itm="1|Oracle Weblogic Server|2|IBM WebSphere|3|Tomcat"
mnu="<<I"
rsp="1|WLS|WLS|WLS|2|WSP|WSP|WSP|3|TOM|TOM|TOM"
val=E

[check_was_type]
typ=I
dft="decode:OAAM_WAS_TYPE:WLS:get_domain,chk_applications"
dsc="Determine which additional information is required"
nam=-

[get_domain]
typ=D
dft=${OAAM_DOMAIN:${ENV.DOMAIN_HOME}}
dsc="Domain home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory where the domain home directory"
nam=OAAM_DOMAIN
val=W

[chk_applications]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_applications
nam=-
var=ask_servers,set_loop

[ask_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list for '${OAAM_DOMAIN}' Domain:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list for Domain ${OAAM_DOMAIN}"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=OAAM_SERVERS
one="*"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=-OAAM_SERVERS

[set_loop]
typ=L
dft="${OAAM_SERVERS}"
dsc="Examine all directories"
nam=-TMP_SRV
sep="|"
var=set_req_server,ask_applications,set_app_loop

[set_req_server]
typ=T
dft=${TMP_OAAM_SRV${TMP_SRV}}
dsc="Server ${TMP_SRV}"
nam=OAAM_SRV${TMP_SRV}

[ask_applications]
typ=M
bef="Applications list for '${OAAM_SRV${TMP_SRV}}' Server:"
dft="${TMP_DFT_APPLICATIONS${TMP_SRV}}"
dsc="Applications list for '${OAAM_SRV${TMP_SRV}}' Server"
dup="Application already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the application name or ${end} to \
     terminate the list"
itm="${TMP_ITM_APPLICATIONS${TMP_SRV}}"
mnu="<<I"
nam=OAAM_SERV${TMP_SRV}_APPLICATIONS
sep="|"
val=E

[set_app_loop]
typ=L
dft="${OAAM_SERV${TMP_SRV}_APPLICATIONS}"
dsc="Examine all directories"
nam=-TMP_APP
sep="|"
var=set_req_app,set_req_path

[set_req_app]
typ=T
dft=${TMP_OAAM_SRV${TMP_SRV}_APP${TMP_APP}}
dsc="Server ${TMP_SRV}"
nam=OAAM_SRV${TMP_SRV}_APP${TMP_APP}

[set_req_path]
typ=T
dft=${TMP_OAAM_SRV${TMP_SRV}_APP${TMP_APP}_PATH}
dsc="Server ${TMP_SRV}"
nam=OAAM_SRV${TMP_SRV}_APP${TMP_APP}_PATH

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Common settings
#------------------------------------------------------------------------------
[OAAM_HOME]
typ=D
dft=${ORACLE_HOME}
dsc="OAAM Server home directory"
inp="Enter the home directory for the OAAM Server where the command line \
     scripts are located"

[chk_oaam_home1]
typ=F
alt=chk_oaam_home2
dft="${OAAM_HOME}/oaam/cli/${AS.CMD:runImportExport}"
dsc="Check if oaam/cli/runImportExport.(cmd|sh) exists"
nam=-

[chk_oaam_home2]
typ=F
alt=bad_oaam_home
dft="${OAAM_HOME}/oaam_cli/oaam_cli/scripts/${AS.CMD:runImportExport}"
dsc="Check if oaam_cli/oaam_cli/scripts/runImportExport.(cmd|sh) exists"
nam=-

[bad_oaam_home]
typ=C
dsc="Invalid OAAM_HOME candidate"
inp="The directory '${OAAM_HOME}' does not exists or does not have a \
     'runImportExport.(cmd|sh)' file at a known place.\n "
vis=0

[dft_apache_top]
typ=D
dft=${OAAM_HOME}/Apache/Apache
dsc="Default Apache top directory"
nam=-TMP_APACHE_TOP

[oaam_apache_top]
typ=D
dft=${OAAM_APACHE_TOP:${TMP_APACHE_TOP}}
dsc="Apache top directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the absolute path of the Apache home directory"
nam=OAAM_APACHE_TOP
val=W

[OAAM_AGE]
typ=N
dft=1
dsc="Age limit (in days) of the log files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the log files to be collected for \
     Oracle Adaptive Access Manager"
lvl=1
ref="R[0,["
val=F

[OAAM_LOCATION]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Location Loader installed?"
inp="Is Location Loader installed on this system (Y/N)?"
var=OAAM_LOCATION_TOP,chk_location_top

[OAAM_LOCATION_TOP]
typ=D
dsc="Location in which Location Loader is installed"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the full path of the directory where Location Loader is installed"

[chk_location_top]
typ=F
alt=bad_location_top,OAAM_LOCATION
dft="${OAAM_LOCATION_TOP}/conf/oaam_version.properties"
dsc="Check if conf/oaam_version.properties exists in Location Loader directory"
nam=-

[bad_location_top]
typ=C
dsc="Invalid Location Loader top candidate"
inp="The directory '${OAAM_LOCATION_TOP}' does not exists or does not have a \
     'conf/oaam_version.properties' file.\n "
vis=0
