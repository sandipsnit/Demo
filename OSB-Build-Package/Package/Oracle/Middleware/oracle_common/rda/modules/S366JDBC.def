# S366JDBC.def: Collects Oracle Java DB Connectivity (JDBC) Information
# $Id: S366JDBC.def,v 2.6 2012/01/03 13:34:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S366JDBC.def,v 2.6 2012/01/03 13:34:46 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S366JDBC - Collects Oracle Java DB connectivity (JDBC) Information

=head1 DESCRIPTION

This module collects Oracle Java DB Connectivity (JDBC)-related diagnostic
information.

The following reports can be generated and are regrouped under C<Oracle JDBC>:

=cut

echo tput('bold'),'Processing JDBC module...',tput('off')

# Initialization
var $ORACLE_HOME = getSetting('ORACLE_HOME','')
var $JDBC_LIB    = catDir($ORACLE_HOME,'jdbc','lib')

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'
pretoc '1:Oracle JDBC'

=head2 manifest - Manifest Information

Extracts the manifest from F<$ORACLE_HOME/jdbc/lib/ojdbc14dms.jar> or
F<$ORACLE_HOME/jdbc/lib/ojdbc5dms.jar> when F<unzip> is available.

=cut

if or(testFile('f',catFile($JDBC_LIB,'ojdbc5dms.jar')),\
      testFile('f',catFile($JDBC_LIB,'ojdbc14dms.jar')))
{if findCommand('unzip')
 {var $cmd = last
  report manifest
  debug ' Inside JDBC module, extracting the manifest'
  var $cmd = concat($cmd,' -p ',lastCommand(),' META-INF/MANIFEST.MF')
  prefix
   write '---++ Manifest Information'
  call writeCommand($cmd)
  if isCreated(true)
   toc '2:[[',getFile(),'][rda_report][Manifest Information]]'
 }
}

=head2 lib - lib Directory Contents

Lists the contents of F<$ORACLE_HOME/jdbc/lib> directory.

=cut

debug ' Inside JDBC module, listing the lib directory contents'
report lib
prefix
 write '---+ Contents of the lib Directory'
call statDir('n',$JDBC_LIB)
if isCreated(true)
 toc '2:[[',getFile(),'][rda_report][lib Directory Contents]]'
unpretoc

=begin credits

=over 10

=item RDA 4.17: Anjani Sankar, Miguel Hernandez

=item RDA 4.20: Miguel Hernandez

=back

=end credits


=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
