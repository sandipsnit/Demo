# S370SOA.cfg: Collects Oracle SOA Suite Information
# $Id: S370SOA.cfg,v 2.18 2012/02/03 07:17:38 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S370SOA.cfg,v 2.18 2012/02/03 07:17:38 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120201  KRA  Extend default domain prompt to $MH/user_projects/domains.

###############################################################################
# Collect the Oracle SOA setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${SOA_IN_USE}
dsc="Collects Oracle SOA Suite Information"
env=DOMAIN_HOME
exe=WLSsetup
man="Applies to Oracle SOA Suite 11g and later"
req=S000INI,*?SOA_REQ_WREQ:S301WREQ,*?SOA_REQ_IREQ:S313IREQ
rpt=SOA_IN_USE
trg=?SOA_REQ_WREQ:S301WREQ,?SOA_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=force_soa_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_soa_tests]
typ=B
alt=SOA_IN_USE
dft=0
dsc="Are the Oracle SOA Suite tests required by the profile?"
nam=-
var=soa_in_use

[soa_in_use]
typ=B
dft=1
dsc="Is Oracle SOA Suite 11g information requested?"
nam=SOA_IN_USE
var=SOA_DISTINCT_HOME

[SOA_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle SOA Suite 11g information requested?"
inp="Should RDA analyze Oracle SOA Suite 11g (Y/N)?"
var=SOA_DISTINCT_HOME

[SOA_DISTINCT_HOME]
typ=B
alt=soa_oracle_home,soa_home
dft=1
dsc="Is SOA installed in another Oracle home?"
inp="Is SOA installed in an Oracle home other than '${ORACLE_HOME}' (Y/N)?"
var=SOA_ORACLE_HOME,SOA_INTERIM,soa_home

[SOA_ORACLE_HOME]
typ=D
dsc="SOA Oracle home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the SOA Oracle home to be analyzed"
val=W

[SOA_INTERIM]
typ=B
dft=0
dsc="Collect the file/directory list for the interim patches"
inp="Do you want to collect the file and directory list for the interim \
     patches in inventory (Y/N)?"
lvl=1

[soa_oracle_home]
typ=D
dft=${ORACLE_HOME}
dsc="SOA Oracle home"
nam=SOA_ORACLE_HOME

[soa_home]
typ=D
alt=soa_comment,no_soa
dft=${SOA_ORACLE_HOME}/soa
dsc="Oracle SOA home"
nam=-
var=SOA_REQ_WLS,SOA_DEHYD_STORE,SOA_COMP_DIAG_DUMP,SOA_WSDL_DIAG_DUMP,set_jdk,\
    SOA_ALT_JDK

[soa_comment]
typ=C
dsc="Report bad SOA Oracle home"
inp="The specified Oracle SOA Suite directory does not exist or does not \
     contain some related files. The collection is disabled.\n\n\
     Hit 'Return' to continue"

[no_soa]
typ=B
dft=0
dsc="Is Oracle SOA Suite 11g information requested?"
nam=SOA_IN_USE

[SOA_REQ_WLS]
typ=B
alt=soa_db_auto
dft=${RDA_DEFAULT:1}
dsc="Is Oracle WebLogic Server domain information requested?"
inp="Should RDA analyze Oracle WebLogic Server domain (Y/N)?"
var=SOA_CH_REQ_COMMON,exist_domain,soa_domain_root

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[SOA_CH_REQ_COMMON]
typ=D
alt=missing
dft="${SOA_ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=soa_ch_focus,soa_req_ireq

[soa_ch_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for common home collection"
nam=SOA_CH_FOCUS

[soa_req_ireq]
typ=B
dft=1
dsc="Does SOA require Oracle Instance Request Handler collection?"
nam=SOA_REQ_IREQ

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Setting definitions for Oracle WebLogic Server
#------------------------------------------------------------------------------
[exist_domain]
typ=I
dft="exists:DOMAIN_HOME"
dsc="Check if DOMAIN_HOME environment variable set"
nam=-
var=dft_domain_root

[dft_domain_root]
typ=D
dft="${DOMAIN_HOME}/.."
dsc="Default domain root directory"
nam=-TMP_DOM_ROOT

[soa_domain_root]
typ=D
dft=${SOA_DOMAIN_ROOT:${TMP_DOM_ROOT:\
      ${SOA_ORACLE_HOME}/../user_projects/domains}}
dsc="Domain root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory where the domains to analyze are \
     located (For example in UNIX, <BEA Home>/user_projects/domains or \
     <Middleware Home>/user_projects/domains)"
nam=SOA_DOMAIN_ROOT
val=W
var=chk_domains

[chk_domains]
typ=B
alt=edit_domain_root
dft=0
dsc="Check which domain homes are present in the domain root directory"
exe=chk_domains
nam=-
var=ask_domains,set_loop,soa_req_wreq,SOA_DB_AUTO

[edit_domain_root]
typ=B
alt=soa_db_auto
dft=0
dsc="Do you want to modify the domain root location?"
inp="The specified domain root directory is either invalid or does not \
     contain some Oracle WebLogic Server related-files. The collection will \
     not contain Oracle WebLogic Server related information.\n\n\
     Do you want to modify the domain root path (Y/N)?"
nam=-
var=soa_domain_root

#------------------------------------------------------------------------------
# Select the domain(s)
#------------------------------------------------------------------------------
[ask_domains]
typ=M
add="*|All domains|*|all_domains"
bef="Domain list:"
dft="${TMP_DFT_DOMAINS}"
dsc="Domain list"
dup="Domain already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the domain directory name, or * to \
     select all domains, or ${end} to terminate the list"
itm="${TMP_ITM_DOMAINS}"
mnu="<<I"
nam=SOA_DOMAINS
one="*"
rsp="${TMP_RSP_DOMAINS}"
sep="|"
val=E

[all_domains]
typ=T
dft=${TMP_ALL_DOMAINS}
dsc="List all domains"
nam=-SOA_DOMAINS

[set_loop]
typ=L
dft="${SOA_DOMAINS}"
dsc="Examine all directories"
nam=-TMP_CNT
sep="|"
var=get_dom_basename,set_req_domain

[get_dom_basename]
typ=T
dft="${SOA_DOM${TMP_CNT}}"
dsc="Domain name"
nam=-dom

[set_req_domain]
typ=D
dft="${SOA_DOM${TMP_CNT}_REQ_DOMAIN}"
dsc="Domain ${TMP_CNT}"
nam=SOA_DOM${TMP_CNT}_REQ_DOMAIN
var=chk_servers,soa_top_focus,soa_dom_focus,check_jdk

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=soa_servers,get_user,check_user

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[soa_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list for '${dom}' Domain:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list for Domain ${TMP_CNT}"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=SOA_DOM${TMP_CNT}_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=SOA_DOM${TMP_CNT}_WLS_SERVERS

#------------------------------------------------------------------------------
# Identify the user
#------------------------------------------------------------------------------
[get_user]
typ=T
dsc="Get the Oracle WebLogic Server user name from configuration file"
exe=get_wls_user
nam=-TMP_SOA_WLS_USER

[check_user]
typ=I
alt=set_user2,set_last_user
dft="match:TMP_SOA_WLS_USER:\S"
dsc="Check whether the Oracle WebLogic user is specified"
nam=-
var=set_user1,set_last_user

[set_user1]
typ=T
clr=-
dft=${SOA_DOM${TMP_CNT}_WLS_USER:${TMP_LAST_USER:${TMP_SOA_WLS_USER}}}
dsc="Oracle WebLogic Server user name for domain ${TMP_CNT}"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection. If a dash \
     ('${clr}') is specified as input, default user name retrieved from \
     '${dom}' domain configuration file is considered."
lvl=1
nam=SOA_DOM${TMP_CNT}_WLS_USER
ref="^\S*$"
val=E

[set_user2]
typ=T
dft=${SOA_DOM${TMP_CNT}_WLS_USER:${TMP_LAST_USER}}
dsc="Oracle WebLogic Server user name for domain ${TMP_CNT}"
err="The user name should not contain spaces"
inp="Enter the user name for the Oracle WebLogic Server connection for \
     '${dom}' domain"
nam=SOA_DOM${TMP_CNT}_WLS_USER
ref="^\S+$"
val=E

[set_last_user]
typ=T
dft="${SOA_DOM${TMP_CNT}_WLS_USER}"
dsc="Last Oracle WebLogic Server user name entered"
nam=-TMP_LAST_USER

[soa_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for Oracle WebLogic Server Middleware collection"
nam=SOA_TOP${TMP_CNT}_FOCUS

[soa_dom_focus]
typ=T
dft="ASA,ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg,SOA,WLST"
dsc="Focus areas for Oracle WebLogic Server domain collection"
nam=SOA_DOM${TMP_CNT}_FOCUS

[soa_req_wreq]
typ=B
dft=1
dsc="Does SOA require Oracle WebLogic Server domain collection?"
nam=SOA_REQ_WREQ

#------------------------------------------------------------------------------
# Other settings
#------------------------------------------------------------------------------
[soa_db_auto]
typ=B
alt=check_sid
dft=0
dsc="Do you want RDA to get the database connection details automatically?"
nam=SOA_DB_AUTO

[SOA_DB_AUTO]
typ=B
alt=check_sid
dft=1
dsc="Do you want RDA to get the database connection details automatically?"
inp="Do you want RDA to get the database connection details automatically \
     (Y/N)?"
lvl=1

[check_sid]
typ=I
alt=soa_local
dft="exists:ORACLE_SID"
dsc="Check if ORACLE_SID is defined"
nam=-
var=SOA_LOCAL

[soa_local]
typ=B
alt=SOA_SID,SOA_LOGIN,SOA_SYSDBA,SOA_SWITCH
dft=0
dsc="Is the SOA schema stored in the database to be analyzed?"
nam=SOA_LOCAL

[SOA_LOCAL]
typ=B
alt=SOA_SID,SOA_LOGIN,SOA_SYSDBA,SOA_SWITCH
dft=1
dsc="Is the SOA schema stored in the database to be analyzed?"
inp="Is the SOA schema stored in the '${ORACLE_SID}' database (Y/N)?"

[SOA_SID]
typ=T
dsc="Database containing the SOA schema"
inp="Enter the Oracle SID of the database containing the SOA schema"

[SOA_LOGIN]
typ=T
dft='${SQL_LOGIN:system}'
dsc="User to connect to SQL*Plus"
inp="Enter an Oracle User ID (userid only) to view DBA_ and SOA related tables."

[SOA_SYSDBA]
typ=B
dft=0
dsc="Indicate that SOA_LOGIN will connect as SYSDBA"
inp="Is '${SOA_LOGIN}' a SYSDBA user (will connect as SYSDBA) (Y/N)?"

[SOA_SWITCH]
typ=B
dft=0
dsc="Indicate if the Oracle system identifier must be switched"

#------------------------------------------------------------------------------
# Common setting definitions
#------------------------------------------------------------------------------
[SOA_DEHYD_STORE]
typ=B
dft=0
dsc="Do you want RDA to get the Dehydration Store / Repository Profile details?"
inp="Do you want RDA to get the Dehydration Store / Repository Profile details \
     (Y/N)?"

[SOA_COMP_DIAG_DUMP]
typ=B
dft=1
dsc="Do you want RDA to collect the SOA diagnostic dump to get composite info?"
inp="Do you want RDA to collect the SOA diagnostic dump to get composite \
     information (Y/N)?"

[SOA_WSDL_DIAG_DUMP]
typ=B
dft=1
dsc="Do you want RDA to collect the SOA diagnostic dump to get WSDL info?"
inp="Do you want RDA to collect the SOA diagnostic dump to get WSDL \
     information (Y/N)?"

[check_jdk]
typ=I
alt=get_jdk_cfg
dft="exists:TMP_WLS_JDK"
dsc="Check if TMP_WLS_JDK is defined"
nam=-

[get_jdk_cfg]
typ=F
dft="${SOA_DOM${TMP_CNT}_REQ_DOMAIN}/init-info/tokenValue.properties"
dsc="Oracle WebLogic server configuration file"
nam=-TMP_JDK_CFG
var=get_jdk

[get_jdk]
typ=D
dft="<<CONFIG:TMP_JDK_CFG:1:^[^\043]*\bJAVA_HOME=\s*(.*)"
dsc="JDK used by Oracle WebLogic server"
nam=-TMP_WLS_JDK

[set_jdk]
typ=D
dft="${SOA_JDK:${TMP_WLS_JDK:${SOA_ORACLE_HOME}/jdk}}"
dsc="JDK used by Oracle SOA"
nam=-TMP_SOA_JDK

[SOA_ALT_JDK]
typ=B
alt=soa_jdk
dft=0
dsc="Is an alternative JDK used other than '${TMP_SOA_JDK}'?"
inp="Is an alternative JDK used other than '${TMP_SOA_JDK}' (Y/N)?"
var=SOA_JDK

[soa_jdk]
typ=D
dft=${TMP_SOA_JDK}
dsc="Location for the JDK used for the Oracle SOA Suite"
nam=SOA_JDK

[SOA_JDK]
typ=D
dft=${TMP_SOA_JDK}
dsc="Location for the JDK used for the Oracle SOA Suite"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the JDK used for Oracle SOA Suite" 	
val=W
