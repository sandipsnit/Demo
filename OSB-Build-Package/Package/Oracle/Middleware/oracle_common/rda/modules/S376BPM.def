# S376BPM.def: Collects Oracle Business Process Management Suite Information
# $Id: S376BPM.def,v 1.4 2012/01/03 13:34:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S376BPM.def,v 1.4 2012/01/03 13:34:46 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S376BPM - Collects Oracle Business Process Management Suite Information

=head1 DESCRIPTION

This module collects the Oracle Business Process Management Suite-related
diagnostic information.

The following reports can be generated and are regrouped under
C<Oracle Business Process Management Suite>:

=cut

echo tput('bold'),'Processing BPM module ...',tput('off')

# Initialization
var $BPM_HOME = getSetting('BPM_HOME','')
var $TAIL     = getSetting('RDA_TAIL',1000)

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'
pretoc '1:Oracle Business Process Management Suite'

# Load the common macros
run library()

=head2 Workspace Configuration Files

Gathers Oracle Business Process Management Suite workspace configuration files
from F<$BPM_HOME/webapps/workspace/WEB-INF> directory.

=cut

debug ' Inside BPM module, collecting the workspace configuration files'
pretoc '2:Workspace Configuration Files'
call sort_files(3,0,\
  grepDir(catDir($BPM_HOME,'webapps','workspace','WEB-INF'),'\.xml$','dr'))
unpretoc

=head2 Process Administrator Configuration Files

Gathers Oracle Business Process Management Suite process administrator
configuration files from F<$BPM_HOME/webapps/webconsole/WEB-INF> directory.

=cut

debug ' Inside BPM module, collecting the process administrator configuration \
        files'
pretoc '2:Process Administrator Configuration Files'
call sort_files(3,0,\
  grepDir(catDir($BPM_HOME,'webapps','webconsole','WEB-INF'),'\.xml$','dr'))
unpretoc

=head2 Workspace Property Files

Gathers Oracle Business Process Management Suite workspace property files
from F<$BPM_HOME/webapps/workspace/WEB-INF> directory.

=cut

debug ' Inside BPM module, collecting the workspace property files'
pretoc '2:Workspace Property Files'
call sort_files(3,0,\
  grepDir(catDir($BPM_HOME,'webapps','workspace','WEB-INF'),'\.properties$',\
          'dr'))
unpretoc

=head2 Webconsole Property Files

Gathers Oracle Business Process Management Suite webconsole property files
from F<$BPM_HOME/webapps/webconsole/WEB-INF> directory.

=cut

debug ' Inside BPM module, collecting the webconsole property files'
pretoc '2:Webconsole Property Files'
call sort_files(3,0,\
  grepDir(catDir($BPM_HOME,'webapps','webconsole','WEB-INF'),'\.properties$',\
          'dr'))
unpretoc

=head2 fdiconf - FDI Connection Configuration

Gathers F<$BPM_HOME/conf/directory.xml> file.

=cut

debug ' Inside BPM module, collecting FDI configuration file'
var $fil = catFile($BPM_HOME,'conf','directory.xml')
report fdiconf
prefix
{write '---+!! FDI Connection Configuration'
 write '---## Information Taken from ',encode($fil)
}
call writeFile($fil)
if isCreated(true)
 toc '2:[[',getFile(),concat('][rda_report][FDI Connection Configuration]]')

=head2 Tomcat Logs

Gathers Oracle Business Process Management Suite Tomcat logs from
F<$BPM_HOME/tomcat/logs> directory.

=cut

debug ' Inside BPM module, collecting the Tomcat files'
pretoc '2:Tomcat Logs'
call sort_files(3,$TAIL,\
  grepDir(catDir($BPM_HOME,'tomcat','logs'),'\.log$','dr'))
unpretoc

=head1 SEE ALSO

L<library.def|modules::library>

=begin credits

=over 10

=item RDA 4.20: Pablo Victory.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
