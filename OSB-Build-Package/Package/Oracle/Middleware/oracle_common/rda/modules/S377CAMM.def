# S377CAMM.def: Collects Oracle Composite Application Monitor and Modeler Info.
# $Id: S377CAMM.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S377CAMM.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S377CAMM - Collects Oracle Composite Application Monitor and Modeler Information

=head1 DESCRIPTION

This module collects the Oracle Composite Application Monitor and Modeler
(CAMM)-related information.

The following reports can be generated and are regrouped under C<Oracle CAMM>:

=cut

echo tput('bold'),'Processing CAMM module ...',tput('off')

# Initialization
var $CAMM_HOME = getSetting('CAMM_HOME','')
var $TAIL      = getSetting('RDA_TAIL',1000)
var $WEB_HOME  = getSetting('CAMM_WEB_PATH','')

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'
pretoc '1:Oracle CAMM'

# Load the common macros
run library()

=head1 FOR ORACLE CAMM MANAGER

=head2 Configuration Files

Gathers Oracle Composite Application Monitor and Modeler manager-related
configuration files.

=cut

debug ' Inside CAMM module, collecting the manager related configuration files'
pretoc '2:Oracle CAMM Manager'
pretoc '3:Configuration Files'
call sort_files(4,0,catFile($CAMM_HOME,'config','Acsera.properties'),\
                    catFile($CAMM_HOME,'config','event.xml'),\
                    catFile($CAMM_HOME,'config','slo.xml'),\
                    catFile($CAMM_HOME,'config','slo','slo.xml'))
unpretoc

=head2 Log Files

Gathers most recent Oracle Composite Application Monitor and Modeler
manager-related log files.

=cut

debug ' Inside CAMM module, collecting the manager related log files'
pretoc '3:Log Files'
call sort_files(4,$TAIL,\
  first(grepDir(catDir($CAMM_HOME,'log'),'^manager-log\d+\.csv$','ipt')))
unpretoc 2

=head1 FOR ORACLE CAMM AGENT

=head2 Log Files

Gathers most recent Oracle Composite Application Monitor and Modeler
agent-related log files.

=cut

debug ' Inside CAMM module, collecting the agent related log files'
pretoc '2:Oracle CAMM Agent'
pretoc '3:Log Files'
loop $sub (grepDir($WEB_HOME,'^\.+$','nv'))
{if testDir('d',catDir($WEB_HOME,$sub,'log'))
 {loop $grp (grepDir(lastDir(),'^\.+$','npv'))
   call sort_files(4,$TAIL,first(grepDir($grp,'^agent-log\d+\.csv$','ipt')))
 }
}
unpretoc 3

=head1 SEE ALSO

L<library.def|modules::library>

=begin credits

=over 10

=item RDA 4.20: Robert Liu.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
