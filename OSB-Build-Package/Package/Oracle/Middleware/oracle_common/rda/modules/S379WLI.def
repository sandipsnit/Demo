# S379WLI.def: Collects Oracle WebLogic Integration Information
# $Id: S379WLI.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S379WLI.def,v 1.5 2012/01/03 13:34:46 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S379WLI - Collects Oracle WebLogic Integration Information

=head1 DESCRIPTION

This module collects Oracle WebLogic Integration-related information. The
following reports can be generated and are regrouped under C<Oracle WebLogic
Integration>:

=head1 REPORTS

=cut

echo tput('bold'),'Processing WLI module ...',tput('off')

# Initialization
var $WLI_HOME = getSetting('WLI_HOME','')

pretoc '1:Oracle WebLogic Integration'

=head2 patch_list - Applied Patch List

Lists the applied Oracle WebLogic Integration patches.

=cut

# Generate the job and execute it
if testDir('dr',catDir($WLI_HOME,upDir(),'utils','bsu'))
{debug ' Inside WLI module, gathering applied patches'
 report patch_list
 prefix
  write '---+ List of Patches Applied'
 var $dir = lastDir()
 var $opt = concat(' -view -status=applied -prod_dir=',\
                   getNativePath($WLI_HOME))
 if or(isCygwin(),isWindows())
 {write '---## Using: ',concat(catFile($dir,'bsu.cmd'),$opt)
  var $job = createTemp('PCH','.bat',true)
  call writeTemp('PCH','@echo off')
  call writeTemp('PCH','cd /d "',getNativePath($dir),'"')
  call writeTemp('PCH','bsu.cmd',$opt)
  call closeTemp('PCH')
  call writeCommand(quote($job,'x'))
  call unlinkTemp('PCH')
 }
 elsif isUnix()
 {write '---## Using: ',concat(catFile($dir,'bsu.sh'),$opt)
  var $job = createTemp('PCH','.sh',true)
  call writeTemp('PCH','cd "',$dir,'"')
  call writeTemp('PCH','bsu.sh',$opt)
  call closeTemp('PCH')
  call writeCommand(quote($job,'x'))
  call unlinkTemp('PCH')
 }
 if isCreated(true)
  toc '2:[[',getFile(),'][rda_report][Applied Patch List]]'
}

=head1 COMMON HOME INFORMATION

Includes the reports generated by the IREQ module about the common home.

=cut

toc '%PUSH("%SPLIT%")%'
toc '%PUSH("1+:Common Product Home")%'
toc '%INCLUDE("',${CUR.GROUP},'_IREQ_WLI_CH.toc")%'
toc '%POP2%'

=head1 ORACLE WEBLOGIC SERVER DOMAIN COLLECTIONS

Includes all reports collected for the specified Oracle WebLogic Server domain.

=cut

toc '%PUSH("%SPLIT%")%'
toc '%PUSH("1+:Oracle WebLogic Server Overview")%'
toc '%INCLUDE("',${CUR.GROUP},'_WREQ_WLI_TOP.toc")%'
toc '%POP2%'
toc '%PUSH("%SPLIT%")%'
toc '%PUSH("1+:Oracle WebLogic Server Domain")%'
toc '%INCLUDE("',${CUR.GROUP},'_WREQ_WLI_DOM.toc")%'
toc '%POP2%'

unpretoc

=head1 SEE ALSO

L<S301WREQ.def|modules::S301WREQ>,
L<S313IREQ.def|modules::S313IREQ>

=begin credits

=over 10

=item RDA 4.22:  Maria Salzberger.

=item RDA 4.24:  Greg Cook, Andrew Salt.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
