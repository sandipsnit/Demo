# S385ODI.cfg: Collects Oracle Data Integrator Information
# $Id: S385ODI.cfg,v 2.8 2012/05/14 04:55:07 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S385ODI.cfg,v 2.8 2012/05/14 04:55:07 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120514  MSC  Do not save decode settings.

###############################################################################
# Collect Oracle Data Integrator setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${ODI_IN_USE}
dsc="Collects Oracle Data Integrator Information"
env=ODI_HOME
exe=ASITcfg
man="This module supports Oracle Data Integrator 10.1.3.4 or later only."
req=S000INI,*?ODI_REQ_WREQ:S301WREQ
rpt=ODI_IN_USE
trg=?ODI_REQ_WREQ:S301WREQ
ttl="Oracle Product Settings"
var=force_odi_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_odi_tests]
typ=B
alt=ODI_IN_USE
dft=0
dsc="Is this module automatically selected?"
nam=-
var=odi_in_use

[odi_in_use]
typ=B
dft=1
dsc="Is Oracle Data Integrator information requested?"
nam=ODI_IN_USE
var=check_odi_home

[ODI_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Data Integrator information requested?"
hlp="Oracle Data Integrator collections can take a long time. Be selective in \
     your request to reduce collection time."
inp="Do you want RDA to analyze Oracle Data Integrator (Y/N)?"
var=check_odi_home

#------------------------------------------------------------------------------
# Determine ODI home
#------------------------------------------------------------------------------
[check_odi_home]
typ=D
alt=get_odi_home
dft=${ODI_HOME}
dsc="ODI home directory"
nam=ODI_HOME
var=check_agent_11g,check_studio_11g,check_j2ee_11g,check_odi_11g

[get_odi_home]
typ=D
dft=${ODI_HOME}
dsc="ODI home directory"
err="The directory does not exist"
inp="Enter the full path of the ODI home directory"
nam=ODI_HOME
val=E
var=check_agent_11g,check_studio_11g,check_j2ee_11g,check_odi_11g

[check_agent_11g]
typ=D
dft=${ODI_HOME}/agent/bin
dsc="Detect potential ODI 11g"
nam=-
var=type_agent,store_type

[check_studio_11g]
typ=D
dft=${ODI_HOME}/client/odi/bin
dsc="Detect potential ODI 11g"
nam=-
var=type_studio,store_type

[check_j2ee_11g]
typ=D
alt=check_utils
dft=${ODI_HOME}/../../oracle_common
dsc="Detect potential ODI 11g"
nam=-
var=type_j2ee,store_type

[check_utils]
typ=D
dft=${ODI_HOME}/../../utils
dsc="Detect potential ODI 11g"
nam=-
var=type_j2ee,store_type

[type_agent]
typ=T
dft="A|Standalone Agent"
dsc="Installation type"
nam=-TMP_INSTALL

[type_studio]
typ=T
dft="S|Studio"
dsc="Installation type"
nam=-TMP_INSTALL

[type_j2ee]
typ=T
dft="W|J2EE Agent"
dsc="Installation type"
nam=-TMP_INSTALL

[store_type]
typ=I
dft="join:TMP_ITM_LIST:${TMP_INSTALL}"
dsc="Installation list"
nam=-TMP_ITM_LIST

[check_odi_11g]
typ=I
alt=check_odi_bin
dft="values:TMP_ITM_LIST"
dsc="Convert to a menu list"
nam=-
var=ODI_TYPE

[check_odi_bin]
typ=D
alt=bad_home,get_odi_home
dft=${ODI_HOME}/bin
dsc="Check the presence of a 'bin' subdirectory in the ODI home directory"
nam=-
var=check_odi_lib

[check_odi_lib]
typ=D
alt=bad_home,get_odi_home
dft=${ODI_HOME}/lib
dsc="Check the presence of a 'lib' subdirectory in the ODI home directory"
nam=-
var=dft_type,search_odi_master,decode_odi_master

[bad_home]
typ=C
dsc="Invalid ODI home directory"
inp="${ODI_HOME} cannot be the ODI home directory.\n "
vis=0

[dft_type]
typ=T
dft="ODI10"
dsc="Type required to repository scan"
nam=-TMP_TYPE

#------------------------------------------------------------------------------
# 11g Specific settings
#------------------------------------------------------------------------------
[ODI_TYPE]
typ=M
ask=0
bef="Oracle Data Integrator 11g installation type:"
cas=0
dft="^"
dsc="Oracle ODI 11g installation type"
err="Only a single letter corresponding to a menu item should be used"
inp="Enter the letter corresponding to the installation type"
itm="${TMP_ITM_LIST}"
mnu="<<T"
rsp="A|AGENT|S|STUDIO|W|WLS"
val=E
var=ODI_DISTINCT_HOME

[ODI_DISTINCT_HOME]
typ=B
alt=odi_oracle_home,odi_home
dft=0
dsc="Is Oracle Data Integrator installed in another Oracle home?"
inp="Is Oracle Data Integrator installed in an Oracle home other than \
     '${ORACLE_HOME}' (Y/N)?"
var=ODI_ORACLE_HOME,ODI_INTERIM,odi_home

[ODI_ORACLE_HOME]
typ=D
dsc="Data Integrator Oracle home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Data Integrator Oracle home to be analyzed"
val=W

[ODI_INTERIM]
typ=B
dsc="Collect the file/directory list for the interim patches"
dft=0
inp="Do you want to collect the file and directory list for the interim \
     patches in inventory (Y/N)?"
lvl=1

[odi_oracle_home]
typ=D
dft=${ORACLE_HOME}
dsc="Data Integrator Oracle home"
nam=ODI_ORACLE_HOME

[odi_home]
typ=D
alt=odi_comment,no_odi
dft=${ODI_ORACLE_HOME}/oracledi
dsc="Oracle Data Integrator home"
nam=-
var=check_type

[odi_comment]
typ=C
dsc="Report bad Data Integrator Oracle home"
inp="The specified Oracle Data Integrator directory does not exist or does \
     not contain some related files. The collection is disabled.\n\n\
     Hit 'Return' to continue"

[no_odi]
typ=B
dft=0
dsc="Is Oracle Data Integrator information requested?"
nam=ODI_IN_USE

[check_type]
typ=I
dft="decode:ODI_TYPE:\
            AGENT:search_odi_master,decode_odi_master:\
            STUDIO:search_odi_work,decode_odi_work_studio:\
            WLS:ODI_DOM_REQ_DOMAIN,ODI_M_MASTER_DB,ODI_W_WORK_DB"
dsc="Apply the type-related setup"
nam=-TMP_TYPE

#------------------------------------------------------------------------------
# Select master and technical repositories
#------------------------------------------------------------------------------
[search_odi_master]
typ=N
dft="<<Extern:RDA/Extern/Odi:search_master:${ODI_HOME},${TMP_TYPE}"
dsc="Master repository search error"
nam=-search_odi_master

[decode_odi_master]
typ=I
dft="decode:search_odi_master\
           :0:ODI_MASTER_SET,odi_master_loop\
           :1:ODI_MASTER_ERROR,bad_odi_master,ODI_MASTER_SET,odi_master_loop\
           :2:ODI_MASTER_ERROR,bad_odi_master"
dsc="Report missing configuration files"
nam=-

[ODI_MASTER_ERROR]
typ=T
dsc="MASTER Repository search error"

[bad_odi_master]
typ=C
dsc="Missing configuration file(s)"
inp="${ODI_MASTER_MESSAGE:Missing file(s)}\n "
vis=0

[ODI_MASTER_SET]
typ=T
dsc="Master identifier set"

[odi_master_loop]
typ=L
alt=search_odi_work,decode_odi_work
dft="${ODI_MASTER_SET}"
dsc="Query each master repository"
nam=-id
sep=","
var=odi_master_login,odi_master_export,odi_tech_export

[odi_master_login]
typ=T
dft="${${id}_LOGIN}"
dsc="${id} login"
nam=${id}_LOGIN

[odi_master_export]
typ=I
alt=odi_master_db2,odi_master_export2
dft="eq:id:ODI_M"
dsc="Information from odiparms?"
nam=-
var=odi_master_db1,odi_master_export1

[odi_master_db1]
typ=B
dft="${${id}_MASTER_DB}"
dsc="${${id}_LOGIN:${id}} master repository database details?"
inp="Do you want RDA to connect to master repository database using odiparams \
     connection details (Y/N)?"
nam=${id}_MASTER_DB

[odi_master_export1]
typ=B
dft="${${id}_MASTER_EXPORT}"
dsc="${${id}_LOGIN:${id}} master repository export?"
inp="Do you want to export master repository defined in odiparams (Y/N)?"
nam=${id}_MASTER_EXPORT

[odi_master_db2]
typ=B
dft="${${id}_MASTER_DB}"
dsc="${${id}_LOGIN:${id}} master repository database details?"
inp="Do you want RDA to connect to master repository '${${id}_LOGIN:${id}}' \
     database (Y/N)?"
nam=${id}_MASTER_DB

[odi_master_export2]
typ=B
dft="${${id}_MASTER_EXPORT}"
dsc="${${id}_LOGIN:${id}} master repository export?"
inp="Do you want to export master repository '${${id}_LOGIN:${id}}' (Y/N)?"
nam=${id}_MASTER_EXPORT

[odi_tech_export]
typ=B
dft="${${id}_TECH_EXPORT}"
dsc="${${id}_LOGIN:${id}} technical environment export?"
inp="Do you want to export the technical environment of this master repository \
     (Y/N)?"
nam=${id}_TECH_EXPORT

#------------------------------------------------------------------------------
# Select work repositories
#------------------------------------------------------------------------------
[search_odi_work]
typ=N
dft="<<Extern:RDA/Extern/Odi:search_work:${ODI_HOME},${TMP_TYPE}"
dsc="Work repository search error"
nam=-search_odi_work

[decode_odi_work]
typ=I
dft="decode:search_odi_work\
           :0:ODI_WORK_SET,odi_work_loop\
           :1:ODI_WORK_ERROR,bad_odi_work,ODI_WORK_SET,odi_work_loop\
           :2:ODI_WORK_ERROR,bad_odi_work"
dsc="Report missing configuration files"
nam=-

[decode_odi_work_studio]
typ=I
dft="decode:search_odi_work\
           :0:ODI_WORK_SET,odi_work_studio_loop\
           :1:ODI_WORK_ERROR,bad_odi_work,ODI_WORK_SET,odi_work_studio_loop\
           :2:ODI_WORK_ERROR,bad_odi_work"
dsc="Report missing configuration files"
nam=-

[ODI_WORK_ERROR]
typ=T
dsc="Work Repository search error"

[bad_odi_work]
typ=C
dsc="Missing configuration file(s)"
inp="${ODI_WORK_MESSAGE:Missing file(s)}\n "
vis=0

[ODI_WORK_SET]
typ=T
dsc="Work identifier set"

[odi_work_loop]
typ=L
alt=check_log
dft="${ODI_WORK_SET}"
dsc="Query each work repository"
nam=-id
sep=","
var=odi_work_login,odi_work_export,odi_log_export

[odi_work_studio_loop]
typ=L
alt=check_log
dft="${ODI_WORK_SET}"
dsc="Query each work repository"
nam=-id
sep=","
var=odi_work_login,odi_work_db

[odi_work_login]
typ=T
dft="${${id}_LOGIN}"
dsc="${id} login"
nam=${id}_LOGIN

[odi_work_db]
typ=I
alt=odi_work_db2
dft="eq:id:ODI_W"
dsc="Information from odiparms?"
nam=-
var=odi_work_db1

[odi_work_export]
typ=I
alt=odi_work_db2,odi_work_export2
dft="eq:id:ODI_W"
dsc="Information from odiparms?"
nam=-
var=odi_work_db1,odi_work_export1

[odi_work_db1]
typ=B
dft="${${id}_WORK_DB}"
dsc="${${id}_LOGIN:${id}} work repository database details?"
inp="Do you want RDA to connect to work repository database using odiparams \
     connection details (Y/N)?"
nam=${id}_WORK_DB

[odi_work_export1]
typ=B
dft="${${id}_WORK_EXPORT}"
dsc="${${id}_LOGIN:${id}} work repository export?"
inp="Do you want to export work repository defined in odiparams (Y/N)?"
nam=${id}_WORK_EXPORT

[odi_work_db2]
typ=B
dft="${${id}_WORK_DB}"
dsc="${${id}_LOGIN:${id}} work repository database details?"
inp="Do you want RDA to connect to work repository '${${id}_LOGIN:${id}}' \
     database (Y/N)?"
nam=${id}_WORK_DB

[odi_work_export2]
typ=B
dft="${${id}_WORK_EXPORT}"
dsc="${${id}_LOGIN:${id}} work repository export?"
inp="Do you want to export work repository '${${id}_LOGIN:${id}}' (Y/N)?"
nam=${id}_WORK_EXPORT

[odi_log_export]
typ=B
dft="${${id}_LOG_EXPORT}"
dsc="${${id}_LOGIN:${id}} execution log export?"
inp="Do you want to export the execution logs from this repository (Y/N)?"
nam=${id}_LOG_EXPORT
var=set_log

[set_log]
typ=B
dft=1
dsc="Indicate whether RDA must collect execution logs"
nam=-ODI_LOG_TMP

#------------------------------------------------------------------------------
# Setting definitions for Oracle WebLogic Server
#------------------------------------------------------------------------------
[ODI_DOM_REQ_DOMAIN]
typ=D
dft=${ENV.DOMAIN_HOME}
dsc="Oracle WebLogic Server domain home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle WebLogic Server domain home to be used for data analysis"
val=W
var=chk_servers,odi_top_focus,odi_dom_focus,odi_req_wreq

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=odi_wls_servers

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Select the server(s)
#------------------------------------------------------------------------------
[odi_wls_servers]
typ=M
add="*|All servers|*|all_servers"
ask=0
bef="Oracle WebLogic Server list:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=ODI_DOM_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=ODI_DOM_WLS_SERVERS

[odi_top_focus]
typ=T
dft="Generic"
dsc="Focus areas for Oracle WebLogic Server Middleware collection"
nam=ODI_TOP_FOCUS

[odi_dom_focus]
typ=T
dft="MinDomCfg,MinSrvCfg"
dsc="Focus areas for Oracle WebLogic Server domain collection"
nam=ODI_DOM_FOCUS

[odi_req_wreq]
typ=B
dft=1
dsc="Does ODI require Oracle WebLogic Server domain collection?"
nam=ODI_REQ_WREQ

[ODI_M_MASTER_DB]
typ=B
dft=0
dsc="Master repository database details?"
inp="Do you want RDA to get the master repository details from database (Y/N)?"
var=odi_wls_master_set,odi_wls_master_login

[odi_wls_master_set]
typ=T
dft="ODI_M"
dsc="Master identifier set"
nam=ODI_MASTER_SET

[odi_wls_master_login]
typ=T
dft="[WEBLOGIC]"
dsc="ODI_M login"
nam=ODI_M_LOGIN

[ODI_W_WORK_DB]
typ=B
dft=0
dsc="Work repository database details?"
inp="Do you want RDA to get the work repository details from database (Y/N)?"
var=odi_wls_work_set,odi_wls_work_login

[odi_wls_work_set]
typ=T
dft="ODI_W"
dsc="Work identifier set"
nam=ODI_WORK_SET

[odi_wls_work_login]
typ=T
dft="[WEBLOGIC]"
dsc="ODI_W login"
nam=ODI_W_LOGIN

#------------------------------------------------------------------------------
# Select the log interval
#------------------------------------------------------------------------------
[check_log]
typ=B
dft=${ODI_LOG_TMP}
dsc="Check if execution logs must be collected"
nam=-
var=ODI_BEGIN,ODI_END

[ODI_BEGIN]
typ=T
dsc="Begin date"
err="Invalid date format"
inp="Enter the begin date (in a 'YYYY-MM-DD HH:MI:SS' format)"
ref="^\d{4}-[01]\d-[0-3]\d [0-2]\d:[0-5]\d:[0-5]\d$"
val=E

[ODI_END]
typ=T
dsc="End date"
err="Invalid date format"
inp="Enter the end date (in a 'YYYY-MM-DD HH:MI:SS' format)"
ref="^\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}$"
val=E
