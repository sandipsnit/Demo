# S390DSCV.cfg: Setup for Oracle Discoverer Module
# $Id: S390DSCV.cfg,v 2.16 2012/08/21 10:41:41 mschenke Exp $ 
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S390DSCV.cfg,v 2.16 2012/08/21 10:41:41 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120821  KRA  Extend installation type detection.

###############################################################################
# Collects Oracle Discoverer Information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${DISCO_IN_USE}
dsc="Collects Oracle Discoverer Information"
env=ORACLE_INSTANCE
exe=ASITcfg
req=S300IAS,*?DSCV_REQ_WREQ:S301WREQ,*?DSCV_REQ_IREQ:S313IREQ
rpt=DISCO_IN_USE
trg=+S300IAS,?DSCV_REQ_WREQ:S301WREQ,?DSCV_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=check_disco

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_disco]
typ=D
alt=no_disco
dft="${ORACLE_HOME}/discoverer"
dsc="Check the presence of the Oracle Discoverer home"
nam=-
var=force_disco_tests

[no_disco]
typ=B
dft=0
dsc="Is Oracle Discoverer used in this Oracle home?"
nam=DISCO_IN_USE

[force_disco_tests]
typ=B
alt=DISCO_IN_USE
dft=0
dsc="Are the Oracle Discoverer tests required by the profile?"
nam=-
var=disco_in_use

[disco_in_use]
typ=B
dft=1
dsc="Is Oracle Discoverer used in this Oracle home?"
nam=DISCO_IN_USE
var=get_install,DISCO_LOG_MAX,DISCO_INFRA,DISCO_EUL,DISCO_PORTLET,\
    DISCO_WEBSERVICE

[DISCO_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Discoverer used in this Oracle home?"
inp="Is Oracle Discoverer used in this Oracle home (Y/N)?"
var=get_install,DISCO_LOG_MAX,DISCO_INFRA,DISCO_EUL,DISCO_PORTLET,\
    DISCO_WEBSERVICE

[get_install]
typ=P
alt=check_rcu
dft="product"
dsc="Installation Type"
nam=-TMP_INSTALL
var=check_install

[check_install]
typ=I
alt=check_rcu
dft="match:TMP_INSTALL:^(Classic Application Server 11g|\
                         Oracle Forms and Reports 11g|\
                         Oracle Portal, Forms, Reports and Discoverer 11g)"
dsc="Check for AS 11g install"
nam=-
var=check_profile

[check_rcu]
typ=D
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=check_profile

[check_profile]
typ=B
alt=force_primary
dft=${ofm_profile}
dsc="Is it a profile based collection?"
nam=-
var=set_primary

[force_primary]
typ=B
dft=1
dsc="Is DSCV the primary module?"
nam=DSCV_PRIMARY
var=DSCV_CH_REQ_COMMON,dscv_instance_root

[set_primary]
typ=B
dft=${dscv_primary}
dsc="Is DSCV the primary module?"
nam=DSCV_PRIMARY
var=DSCV_CH_REQ_COMMON,dscv_instance_root

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[DSCV_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=dscv_ch_focus,dscv_req_ireq

[dscv_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=DSCV_CH_FOCUS

#------------------------------------------------------------------------------
# Setting definitions for Oracle Instance
#------------------------------------------------------------------------------
[dscv_instance_root]
typ=D
alt=chk_oracle_instance,DSCV_INSTANCE_ROOT
dft=${INSTANCE_ROOT}
dsc="Instance root directory"
nam=DSCV_INSTANCE_ROOT
var=chk_instances

[chk_oracle_instance]
typ=I
dft="exists:ORACLE_INSTANCE"
dsc="Check the ORACLE_INSTANCE environment variable existence"
nam=-
var=dft_instance_root

[dft_instance_root]
typ=D
dft="${ENV.ORACLE_INSTANCE}/.."
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT

[DSCV_INSTANCE_ROOT]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance homes to \
     analyze (For example the parent directory of the path specified by an \
     ORACLE_INSTANCE environment variable)"
var=chk_instances

[chk_instances]
typ=B
alt=dscv_comment
dft=0
dsc="Get the directories present in the instance root directory"
exe=chk_instances
nam=-
var=dscv_instances,set_loop,dscv_tnsadmin_list,dscv_req_ireq,find_server

[dscv_comment]
typ=C
dsc="Report bad Oracle instance root directory"
inp="The specified Oracle instance root directory is either invalid or does \
     not contain some Oracle DSCV instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Select instances
#------------------------------------------------------------------------------
[dscv_instances]
typ=M
add="*|All instances|*|all_instances"
bef="Instance list:"
col=1
dft="${TMP_DFT_INSTANCES}"
dsc="Instance list"
dup="Instance already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the instance directory name, or * to \
     select all instances, or ${end} to terminate the list"
itm="${TMP_ITM_INSTANCES}"
mnu="<<I"
nam=DSCV_INSTANCES
one="*"
rsp="${TMP_RSP_INSTANCES}"
sep="|"
val=E

[all_instances]
typ=T
dft=${TMP_ALL_INSTANCES}
dsc="List all instances"
nam=-DSCV_INSTANCES

[set_loop]
typ=L
dft="${DSCV_INSTANCES}"
dsc="Examine all directories"
nam=-cnt
sep="|"
var=set_req_instance

[set_req_instance]
typ=D
dft="${DSCV_OI${cnt}_REQ_INSTANCE}"
dsc="Instance ${cnt}"
nam=DSCV_OI${cnt}_REQ_INSTANCE
var=set_oh_focus,set_oi_focus,chk_tnsadmin_list

[set_oh_focus]
typ=T
dft="DSCV,HTTP,Manifest,OPMN"
dsc="Focus areas for Oracle home associated to the instance home"
nam=DSCV_OH${cnt}_FOCUS

[set_oi_focus]
typ=T
dft="DSCV,HTTP,OPMN"
dsc="Focus areas for instance home"
nam=DSCV_OI${cnt}_FOCUS

[chk_tnsadmin_list]
typ=I
dft="join:TMP_TNSADMIN_LIST:${DSCV_OI${cnt}_REQ_INSTANCE}/config"
dsc="List of extra TNS_ADMIN directories"
nam=-TMP_TNSADMIN_LIST

[dscv_tnsadmin_list]
typ=D
dft=${TMP_TNSADMIN_LIST}
dsc="List of extra TNS_ADMIN directories"
nam=DSCV_TNSADMIN_LIST
sep="|"

[dscv_req_ireq]
typ=B
dft=1
dsc="Does DSCV require Oracle Instance Request Handler collection?"
nam=DSCV_REQ_IREQ

#------------------------------------------------------------------------------
# Identify the Oracle WebLogic domain and server
#------------------------------------------------------------------------------
[find_server]
typ=B
alt=missing
dft=0
dsc="Identify the server configured"
exe=find_disco_server
nam=-
var=dscv_wls_domain,dscv_wls_server,dscv_top_focus,dscv_dom_focus,dscv_req_wreq

[missing]
typ=B
dsc="Used to reject settings"
nam=-

[dscv_wls_domain]
typ=D
dft=${TMP_DOMAIN}
dsc="Oracle WebLogic server domain home"
nam=DSCV_DOM_REQ_DOMAIN

[dscv_wls_server]
typ=T
dft=${TMP_SERVER}
dsc="Server configured"
nam=DSCV_DOM_WLS_SERVERS

[dscv_top_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for WebLogic middleware collection"
nam=DSCV_TOP_FOCUS

[dscv_dom_focus]
typ=T
dft="DSCV,ExtDomCfg,ExtSrvCfg,MinDomCfg,MinSrvCfg"
dsc="Focus areas for WebLogic domain collection"
nam=DSCV_DOM_FOCUS

[dscv_req_wreq]
typ=B
dft=1
dsc="Does DSCV require Oracle WebLogic Request Handler collection?"
nam=DSCV_REQ_WREQ

#------------------------------------------------------------------------------
# Common settings
#------------------------------------------------------------------------------
[DISCO_LOG_MAX]
typ=N
dft=20
dsc="Number of log files to collect"
err="The number of log files must be a positive integer"
inp="Specify how many log files you want RDA to collect"
lvl=1
ref="I[0,["
val=F

[DISCO_INFRA]
typ=B
dft=1
dsc="Should RDA collect the information from the infrastructure database?"
inp="Do you want to query data from the infrastructure database (Y/N)?"
var=DISCO_INFRA_LOGIN,check_version,DISCO_INFRA_SID,DISCO_INFRA_SYSDBA

[DISCO_INFRA_LOGIN]
typ=T
dft='system'
dsc="User to connect to infrastructue database"
inp="Enter an Oracle user identifier (userid only) to access infrastructure \
     database information."

[check_version]
typ=I
dft="exists:DSCV_PRIMARY"
dsc="Check for Discoverer version 11g"
nam=-
var=DISCO_INFRA_SCHEMA

[DISCO_INFRA_SCHEMA]
typ=T
dsc="Schema name for getting active discoverer portlets"
inp="Enter the schema name for getting Active Discoverer Portlets"

[DISCO_INFRA_SID]
typ=T
dft=${ORACLE_SID}
dsc="Database containing the infrastructue database schema"
inp="Enter the Oracle SID of the database containing the infrastructure \
     database schemas"

[DISCO_INFRA_SYSDBA]
typ=B
dft=0
dsc="Indicate that DISCO_INFRA_LOGIN will connect as SYSDBA"
inp="Is '${DISCO_INFRA_LOGIN}' a SYSDBA user (will connect as SYSDBA) (Y/N)?"
lvl=1

[DISCO_EUL]
typ=B
dft=1
dsc="Should RDA collect the information from database where EUL resides?"
inp="Do you want to query data from the database where the End User Layer \
     (EUL) resides (Y/N)?"
var=DISCO_EUL_LOGIN,DISCO_EUL_SID,DISCO_EUL_SYSDBA

[DISCO_EUL_LOGIN]
typ=T
dft='EUL5_US'
dsc="User to connect to End User Layer (EUL) database"
inp="Enter an Oracle user identifier (userid only) to view information from \
     the End User Layer (EUL) database"

[DISCO_EUL_SID]
typ=T
dft=${ORACLE_SID}
dsc="End User Layer (EUL) database"
inp="Enter the Oracle SID of the database where the End User Layer (EUL) \
     resides"

[DISCO_EUL_SYSDBA]
typ=B
dft=0
dsc="Indicate that DISCO_EUL_LOGIN will connect as SYSDBA"
inp="Is '${DISCO_EUL_LOGIN}' a SYSDBA user (will connect as SYSDBA) (Y/N)?"
lvl=1

[DISCO_PORTLET]
typ=B
dft=0
dsc="Discoverer Portlet is configured?"
inp="Do you want RDA to check whether Discoverer Portlet is configured (Y/N)?"

[DISCO_WEBSERVICE]
typ=B
dft=0
dsc="Discoverer Web Service is configured?"
inp="Do you want RDA to check whether Discoverer Web Service is \
     configured (Y/N)?"
var=DISCO_WEBSERVICE_LOGIN

[DISCO_WEBSERVICE_LOGIN]
typ=T
dft='bipublisher'
dsc="User to connect to Discoverer Web Service"
inp="Enter the username to access Discoverer Web Service"
