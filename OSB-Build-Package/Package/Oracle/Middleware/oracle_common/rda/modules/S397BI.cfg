# S397BI.cfg: Collects Business Intelligence Enterprise Edition Information
# $Id: S397BI.cfg,v 2.10 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S397BI.cfg,v 2.10 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect Oracle Business Intelligence Enterprise Edition setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${BI_IN_USE}
dsc="Collects Oracle Business Intelligence Enterprise Edition Information"
env=ORACLE_INSTANCE,SAROOTDIR,SADATADIR
exe=ASITcfg
req=S000INI,*?BI_REQ_WREQ:S301WREQ,*?BI_REQ_IREQ:S313IREQ
rpt=BI_IN_USE
trg=?BI_REQ_WREQ:S301WREQ,?BI_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=force_bi_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_bi_tests]
typ=B
alt=BI_IN_USE
dft=0
nam=-
var=bi_in_use

[bi_in_use]
typ=B
dft=1
dsc="Gather Oracle Business Intelligence Enterprise Edition information?"
nam=BI_IN_USE
var=check_bi,BI_TAIL,BI_LOG_AGE

[BI_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Business Intelligence Enterprise Edition information requested?"
inp="Do you want RDA to analyze Oracle Business Intelligence Enterprise \
     Edition (formerly Siebel Business Analytics) (Y/N)?"
var=check_bi,BI_TAIL,BI_LOG_AGE

[check_bi]
typ=D
alt=check_rcu
dft=${ORACLE_HOME}/bifoundation
dsc="Oracle home bifoundation directory"
nam=-
var=BI_CH_REQ_COMMON,bi_instance_root

[check_rcu]
typ=D
alt=BI_HOME,BI_DATA,repository_dir,repository_list,bi_repository
dft=${ORACLE_HOME}/rcu
dsc="Oracle home rcu directory"
nam=-
var=BI_CH_REQ_COMMON,bi_instance_root

#------------------------------------------------------------------------------
# Setting definitions for common home
#------------------------------------------------------------------------------
[BI_CH_REQ_COMMON]
typ=D
alt=missing
dft="${ORACLE_HOME}/../oracle_common"
dsc="Common Product home"
var=bi_ch_focus,bi_req_ireq

[bi_ch_focus]
typ=T
dft="Manifest"
dsc="Focus areas for common home collection"
nam=BI_CH_FOCUS

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Setting definitions for Oracle Instance
#------------------------------------------------------------------------------
[bi_instance_root]
typ=D
alt=chk_oracle_instance,BI_INSTANCE_ROOT
dft=${INSTANCE_ROOT}
dsc="Instance root directory"
nam=BI_INSTANCE_ROOT
var=chk_instances

[chk_oracle_instance]
typ=I
dft="exists:ORACLE_INSTANCE"
dsc="Check the ORACLE_INSTANCE environment variable existence"
nam=-
var=dft_instance_root

[dft_instance_root]
typ=D
dft="${ENV.ORACLE_INSTANCE}/.."
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT

[BI_INSTANCE_ROOT]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the location of the directory containing the instance homes to \
     analyze (For example the parent directory of the path specified by an \
     ORACLE_INSTANCE environment variable)"
var=chk_instances

[chk_instances]
typ=B
alt=bi_comment
dft=0
dsc="Get the directories present in the instance root directory"
exe=chk_instances
nam=-
var=bi_instances,set_loop,bi_req_ireq

[bi_comment]
typ=C
dsc="Report bad Oracle instance root directory"
inp="The specified Oracle instance root directory is either invalid or does \
     not contain some Oracle BI instance related-files. \
     Collection will not contain complete instance data.\n\n\
     Hit 'Return' to continue"

#------------------------------------------------------------------------------
# Select instances
#------------------------------------------------------------------------------
[bi_instances]
typ=M
add="*|All instances|*|all_instances"
bef="Instance list:"
col=1
dft="${TMP_DFT_INSTANCES}"
dsc="Instance list"
dup="Instance already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the instance directory name, or * to \
     select all instances, or ${end} to terminate the list"
itm="${TMP_ITM_INSTANCES}"
nam=BI_INSTANCES
one="*"
rsp="${TMP_RSP_INSTANCES}"
sep="|"
val=E

[all_instances]
typ=T
dft=${TMP_ALL_INSTANCES}
dsc="List all instances"
nam=-BI_INSTANCES

[set_loop]
typ=L
dft="${BI_INSTANCES}"
dsc="Examine all directories"
nam=-cnt
sep="|"
var=set_req_instance

[set_req_instance]
typ=D
dft="${BI_OI${cnt}_REQ_INSTANCE}"
dsc="Instance ${cnt}"
nam=BI_OI${cnt}_REQ_INSTANCE
var=set_oh_focus,set_oi_focus,component_dir,get_cmp

[set_oh_focus]
typ=T
dft="BI,HTTP,Manifest,OPMN"
dsc="Focus areas for Oracle home associated to the instance home"
nam=BI_OH${cnt}_FOCUS

[set_oi_focus]
typ=T
dft="BI,HTTP,OPMN"
dsc="Focus areas for instance home"
nam=BI_OI${cnt}_FOCUS

[bi_req_ireq]
typ=B
dft=1
dsc="Does BI require Oracle Instance Request Handler collection?"
nam=BI_REQ_IREQ

#------------------------------------------------------------------------------
# 11g setting definitions
#------------------------------------------------------------------------------
[component_dir]
typ=D
dft="${BI_OI${cnt}_REQ_INSTANCE}/bifoundation/OracleBIServerComponent"
dsc="Oracle BI Server component directory"
nam=-TMP_CMP_DIR
var=cmp_list

[cmp_list]
typ=T
dft="<<LIST:TMP_CMP_DIR:1:^([^\.]+)$"
dsc="Get the directories present in the OracleBIServerComponent directory"
nam=-TMP_CMP_LIST

[get_cmp]
typ=I
dft="values:TMP_CMP_LIST:1"
dsc="Suppress the item numbers"
nam=-TMP_CMP_LIST
var=cmp_loop

[cmp_loop]
typ=L
dft=${TMP_CMP_LIST}
dsc="Examine all directories"
nam=-comp
sep="|"
var=check_cmp,get_repo

[check_cmp]
typ=D
dft="${TMP_CMP_DIR}/${comp}/repository"
dsc="Repository directory"
nam=-TMP_REPO_DIR
var=repo_list

[repo_list]
typ=T
dft="<<LIST:TMP_REPO_DIR:1:^(.*\.rpd)$"
dsc="Repository list"
nam=-TMP_REPO_LIST

[get_repo]
typ=I
dft="values:TMP_REPO_LIST:1"
dsc="Suppress the item numbers"
nam=-TMP_REPO_LIST
var=repo_loop,BI_REPOSITORY_LIST,check_list

[repo_loop]
typ=L
dft=${TMP_REPO_LIST}
dsc="Examine all repositories"
nam=-repo
sep="|"
var=store_repo

[store_repo]
typ=T
dft="${TMP_REPOSITORY_LIST:None}|InsDir:${ins},Comp:${comp},Repo:${repo}"
dsc="Store the valid Repository"
nam=-TMP_REPOSITORY_LIST

[BI_REPOSITORY_LIST]
typ=T
dft="${TMP_REPOSITORY_LIST}"
dsc="Repository list"

[check_list]
typ=I
dft="hash:TMP_REPOSITORY_LIST"
dsc="Convert the list in an item list"
nam=-TMP_REPOSITORY_LIST
var=bi_as11_repository

[bi_as11_repository]
typ=M
dft="^"
dsc="Repository name"
err="Enter the number corresponding to the corresponding entry"
inp="Enter the number corresponding to repository name or an asterisk (*) \
     to select all repositories"
itm="*|All|${TMP_REPOSITORY_LIST}"
mnu="<<T"
nam=BI_REPOSITORY
rsp="^"
val=E

#------------------------------------------------------------------------------
# Prior 11g setting definitions
#------------------------------------------------------------------------------
[BI_HOME]
typ=D
dft=${SAROOTDIR}
dsc="Oracle BI server installation directory"
err="Warning: The specified directory does not -yet- exist"
inp="Specify the Oracle BI server installation directory"
val=W

[BI_DATA]
typ=D
dft=${SADATADIR}
dsc="Oracle BI data directory"
err="Warning: The specified directory does not -yet- exist"
inp="Specify the Oracle BI data directory"
val=W

[repository_dir]
typ=D
dft=${BI_HOME}/server/Repository
dsc="Repository directory"
nam=-TMP_REPOSITORY_DIR

[repository_list]
typ=T
dft="<<LIST:TMP_REPOSITORY_DIR:1:^(.*\.rpd)$"
dsc="Repository list"
nam=-TMP_REPOSITORY_LIST

[bi_repository]
typ=M
dft="^"
dsc="Repository name"
err="Enter the number corresponding to the corresponding entry"
inp="Enter the number corresponding to repository name or an asterisk (*) \
     to select all repositories"
itm="*|All|0|None|${TMP_REPOSITORY_LIST}"
mnu="<<T"
nam=BI_REPOSITORY
rsp="^"
val=E

#------------------------------------------------------------------------------
# Common setting definitions
#------------------------------------------------------------------------------
[BI_TAIL]
typ=N
dft=5000
dsc="Maximum number of lines to extract from each log file"
err="The number of lines must be an integer greater than zero"
inp="How many lines do you want RDA to extract starting from the end of each \
     log file?"
lvl=1
ref="I]0,["
val=F

[BI_LOG_AGE]
typ=N
dft=5
dsc="Age limit (in days) of the log files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the log files to be collected"
lvl=1
ref="R[0,["
val=F
