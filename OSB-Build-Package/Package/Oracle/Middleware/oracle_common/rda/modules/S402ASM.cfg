# S402ASM.cfg: Collects Automatic Storage Management Information
# $Id: S402ASM.cfg,v 2.14 2012/03/20 16:37:46 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S402ASM.cfg,v 2.14 2012/03/20 16:37:46 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120320  KRA  Change ASM_ALERT_TEXT default value to 1.

###############################################################################
# Collect the Automatic Storage Management setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${ASM_IN_USE}
dsc="Collects Automatic Storage Management Information"
fam=Cygwin,Unix,Windows
inv=get_db_version
man="RDA considers this module with Oracle Database 10g or later only. RDA \
     performs this check only when the inventory information is available.\n\n\
     RDA excludes this module when you did not specify a database to analyze."
req=S000INI
rpt=ASM_IN_USE,ASM_AUTO_HOME,ASM_AUTO_SID
ttl="Oracle Product Settings"
var=ASM_IN_USE

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[get_db_version]
typ=P
alt=no_asm
dft="find:version:oracle.rdbms"
dsc="Get the database version"
nam=-TMP_DB_VERSION
var=check_db_version

[check_db_version]
typ=I
alt=no_asm
dft="match:TMP_DB_VERSION:^(1[01]\.\d+\.)"
dsc="Check the database version"
nam=-
var=ASM_IN_USE

[no_asm]
typ=B
dft=0
dsc="Is Automatic Storage Management (ASM) in use?"
nam=ASM_IN_USE

[ASM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Automatic Storage Management (ASM) in use?"
inp="Do you want RDA to collect Automatic Storage Management (ASM) information \
     (Y/N)?"
var=detect_asm,ASM_LOGIN,ASM_ADVANCED,ASM_ALLOCATION,ASM_DEVICES,\
    ASM_ALERT_SUMMARY,ASM_ALERT_TAIL,ASM_INTERIM,ASM_TRACE_AGE,\
    ASM_TRACE_ERRORS,ASM_TRACE_RATIO,ASM_TRACE_TRESHOLD,ASM_TRACE_VOLUME,\
    ASM_TRACE_BDUMP,ASM_TRACE_UDUMP

[detect_asm]
typ=B
alt=ASM_DISTINCT_HOME,ASM_ORACLE_SID,ASM_PFILE_LOCAL,oracle_bin,find_adrci
dft=0
dsc="Do you want RDA to automatically detect ASM Oracle home and ASM SID?"
nam=-
var=asm_distinct_home,asm_oracle_sid,asm_pfile_local,ASM_ALERT_TEXT,\
    ASM_INCIDENTS

[ASM_DISTINCT_HOME]
typ=B
alt=asm_oracle_home
dft=0
dsc="Is ASM installed in a separate Oracle home?"
inp="Is ASM installed in a separate Oracle home (Y/N)?"
var=ASM_ORACLE_HOME

[ASM_ORACLE_HOME]
typ=D
dft=${ORACLE_HOME}
dsc="ASM Oracle home path"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the ASM Oracle home Path"
val=W

[asm_oracle_home]
typ=D
dft=${ORACLE_HOME}
dsc="ASM Oracle home Path"
nam=ASM_ORACLE_HOME

[ASM_ORACLE_SID]
typ=T
dft='+ASM'
dsc="ASM Oracle SID"
inp="Enter the ASM Oracle SID"

[ASM_PFILE_LOCAL]
typ=B
dft=1
dsc="Is the PFILE local?"
inp="Is the ASM INIT.ORA located on this system (Y/N)?"
var=asm_pfile_dir_u,asm_pfile_dir_w,ASM_PFILE_LOCATION

[asm_pfile_dir_u]
typ=D
dft=${ASM_ORACLE_HOME}/dbs
dsc="ASM PFILE directory"
fam=Unix
nam=-ASM_PFILE_DIR
var=asm_find_spfile

[asm_pfile_dir_w]
typ=D
dft=${ASM_ORACLE_HOME}/database
dsc="ASM PFILE directory"
fam=Cygwin,Windows
nam=-ASM_PFILE_DIR
var=asm_find_spfile

[asm_find_spfile]
typ=F
alt=asm_find_pfile
dft="<<Search:ASM_PFILE_DIR:p:^\Qspfile${ASM_ORACLE_SID}.ora\E$"
dsc="ASM SPFILE path"
nam=-ASM_PFILE_PATH

[asm_find_pfile]
typ=F
dft="<<Search:ASM_PFILE_DIR:p:^\Qinit${ASM_ORACLE_SID}.ora\E$"
dsc="ASM PFILE path"
nam=-ASM_PFILE_PATH

[ASM_PFILE_LOCATION]
typ=F
dft=${ASM_PFILE_PATH}
dsc="ASM SPFILE/PFILE location"
err="Warning: The specified file does not -yet- exist"
inp="Enter the location of the ASM spfile or the INIT.ORA \
     (including the directory and file name)"
val=W

[asm_distinct_home]
typ=B
dft=1
dsc="Is ASM installed in a separate Oracle home?"
nam=ASM_DISTINCT_HOME

[asm_oracle_sid]
typ=T
dft='*'
dsc="ASM Oracle SID"
nam=ASM_ORACLE_SID

[asm_pfile_local]
typ=B
dft=1
dsc="Is the PFILE local?"
nam=ASM_PFILE_LOCAL
var=asm_pfile_location

[asm_pfile_location]
typ=F
dft=''
dsc="ASM SPFILE/PFILE location"
nam=ASM_PFILE_LOCATION

[ASM_LOGIN]
typ=T
dft="/"
dsc="ASM user"

[ASM_ADVANCED]
typ=B
dft=0
dsc="Advanced collection mode"
inp="Is the advanced mode to be enabled (Y/N)?"
lvl=1

[ASM_ALLOCATION]
typ=B
dft=1
dsc="Do you want to collect allocation information?"
inp="Should RDA collect allocation information (Y/N)?"
lvl=9

[ASM_DEVICES]
typ=B
dft=1
dsc="Do you want to collect device header and its potential duplicates?"
inp="Should RDA collect device header and its potential duplicates \
     information (Y/N)?"
lvl=9

[oracle_bin]
typ=D
dft=${ASM_ORACLE_HOME}/bin
dsc=""
nam=-TMP_ORACLE_BIN

[find_adrci]
typ=F
alt=asm_alert_text,asm_incidents
dft="<<Search:TMP_ORACLE_BIN:r:^adrci(\.exe)?$"
dsc="Look for adrci in the $ASM_ORACLE_HOME/bin directory"
nam=-
var=ASM_ALERT_TEXT,ASM_INCIDENTS

[asm_alert_text]
typ=B
dft=1
dsc="Do you want RDA to collect the ASM alert.log in text format?"
nam=ASM_ALERT_TEXT

[ASM_ALERT_SUMMARY]
typ=B
dft=1
dsc="Do you want RDA to analyze the ASM alert.log report?"
inp="Do you want RDA to analyze the ASM alert.log report (Y/N)?"
lvl=1

[ASM_ALERT_TEXT]
typ=B
dft=1
dsc="Do you want RDA to collect the ASM alert.log in text format?"
inp="Do you want RDA to collect the ASM alert.log in text format (Y/N)?"
lvl=1

[ASM_ALERT_TAIL]
typ=N
dft=30000
dsc="Maximum number of lines to extract from ASM alert.log"
err="The number of lines must be an integer greater than zero"
inp="How many lines can we extract from ASM alert.log?"
lvl=1
ref="I]0,["
val=F

[asm_incidents]
typ=N
dft=0
dsc="Number of incidents to capture"
nam=ASM_INCIDENTS

[ASM_INCIDENTS]
typ=N
dft=10
dsc="Number of incidents to capture"
err="The number must be a positive integer"
inp="Enter the maximum number of incidents to capture"
lvl=1
ref="I[0,["
val=F

[ASM_INTERIM]
typ=B
dsc="Collect the file/directory list for the interim patches"
dft=0
inp="Do you want to collect the file and directory list for the interim \
     patches in inventory (Y/N)?"
lvl=1

[ASM_TRACE_AGE]
typ=N
dft=15
dsc="Age limit (in days) of the error trace files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the error trace files to be collected"
lvl=1
ref="R[0,["
val=F

[ASM_TRACE_ERRORS]
typ=N
dft=250
dsc="Number of error references extracted from the alert_log"
err="The number of references must be a positive integer"
inp="Enter how many error references are considered"
lvl=1
ref="I[0,["
val=F

[ASM_TRACE_RATIO]
typ=N
dft=10
dsc="Ratio to estimate contribution to collection volume"

[ASM_TRACE_TRESHOLD]
typ=N
dft=20480
dsc="Minimum file size (in bytes) to apply the ASM_TRACE_RATIO"

[ASM_TRACE_VOLUME]
typ=N
dft=10
dsc="Total size limit (in MiB) for error trace files to be collected"
err="The number of MiB must be a positive number"
inp="Enter the total size limit (in MiB) for error trace files to be \
     collected"
lvl=1
ref="R[0,["
val=F

[ASM_TRACE_BDUMP]
typ=N
dft=0
dsc="Number of background trace files of each type to be collected"
err="The number of trace files must be a positive integer"
inp="Enter how many background trace files of each type can be collected"
lvl=1
ref="I[0,["
val=F

[ASM_TRACE_UDUMP]
typ=N
dft=0
dsc="Age limit (in days) of the user dump files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the user dump files to be collected"
lvl=1
ref="R[0,["
val=F
