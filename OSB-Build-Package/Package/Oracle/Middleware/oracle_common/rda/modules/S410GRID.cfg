# S410GRID.cfg: Collects Oracle Management Server and Repository Information
# $Id: S410GRID.cfg,v 2.18 2012/01/23 12:12:49 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S410GRID.cfg,v 2.18 2012/01/23 12:12:49 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120123  KRA  Add 'Manifest' focus to common home.

###############################################################################
# Collect Oracle Enterprise Manager Grid Control setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${GRID_SERVER_IN_USE}
dsc="Collects Oracle Management Server and Repository Information"
exe=GRIDcfg
req=S000INI,*?GRID_REQ_WREQ:S301WREQ,*?GRID_REQ_IREQ:S313IREQ
rpt=GRID_SERVER_IN_USE,GRID_HOME,GRID_EMDIAG_IN_USE
trg=?GRID_REQ_WREQ:S301WREQ,?GRID_REQ_IREQ:S313IREQ
ttl="Oracle Product Settings"
var=check_depth

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_depth]
typ=B
alt=force_grid_tests
dft=${CUR.DEPTH}
dsc="Is it executed by the INI module?"
nam=-
var=GRID_HOME,oracle_home

#------------------------------------------------------------------------------
# Setting definitions for INI-based module
#------------------------------------------------------------------------------
[GRID_HOME]
typ=D
dsc="Oracle Enterprise Manager Cloud/Grid Control directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle Enterprise Manager Cloud/Grid Control (OMS) home \
     directory location"
val=W

[oracle_home]
typ=D
dft=${GRID_HOME}
dsc="Oracle home"
nam=ORACLE_HOME

#------------------------------------------------------------------------------
# Setting definitions for GRID-based setup
#------------------------------------------------------------------------------
[force_grid_tests]
typ=B
alt=GRID_SERVER_IN_USE
dft=0
dsc="Are the Oracle EM Grid Control tests required by the profile?"
nam=-
var=grid_server_in_use

[grid_server_in_use]
typ=B
dft=1
dsc="Is Oracle Enterprise Manager Cloud/Grid Control information requested?"
nam=GRID_SERVER_IN_USE
var=chk_grid_home,chk_eminstance_mapping,find_version,check_version,\
    GRID_INTERIM

[GRID_SERVER_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Enterprise Manager Cloud/Grid Control information requested?"
inp="Do you want RDA to analyze Oracle Enterprise Manager Cloud/Grid Control \
     (Y/N)?"
var=chk_grid_home,chk_eminstance_mapping,find_version,check_version,\
    GRID_INTERIM

[chk_grid_home]
typ=D
alt=default_home_12c
dft=${GRID_HOME}
dsc="Oracle Enterprise Manager Cloud/Grid Control directory"
nam=GRID_SERVER_HOME

[default_home_12c]
typ=D
alt=default_home_11g
dft=${ORACLE_PARENT}/oms
nam=-TMP_DFT_HOME
var=GRID_SERVER_HOME

[default_home_11g]
typ=D
alt=GRID_SERVER_HOME
dft=${ORACLE_PARENT}/oms11g
nam=-TMP_DFT_HOME
var=GRID_SERVER_HOME

[GRID_SERVER_HOME]
typ=D
dft=${TMP_DFT_HOME}
dsc="Oracle Enterprise Manager Cloud/Grid Control directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle Enterprise Manager Cloud/Grid Control (OMS) home \
     directory location"
val=W

#------------------------------------------------------------------------------
# Get the instance and domain details
#------------------------------------------------------------------------------
[chk_eminstance_mapping]
typ=F
alt=missing
dft=${GRID_SERVER_HOME}/sysman/config/emInstanceMapping.properties
dsc="Possible emInstanceMapping.properties"
nam=-TMP_INST_MAPPING
var=GRID_CH_REQ_COMMON,get_emgc_properties,GRID_OI_REQ_INSTANCE,\
    GRID_DOM_REQ_DOMAIN

[GRID_CH_REQ_COMMON]
typ=D
alt=missing
dft="${GRID_SERVER_HOME}/../oracle_common"
dsc="Common product home"
var=grid_ch_focus,grid_req_ireq

[grid_ch_focus]
typ=T
dft="Generic,Manifest"
dsc="Focus areas for common home collection"
nam=GRID_CH_FOCUS

[get_emgc_properties]
typ=T
dft="<<CONFIG:TMP_INST_MAPPING:1:^[^\043]*.*?=(.*\bemgc\.properties)\s*$"
dsc="String with emgc.properties file"
nam=-TMP_EMGC_PROPERTY

[GRID_OI_REQ_INSTANCE]
typ=D
alt=missing
dft="<<CONFIG:TMP_EMGC_PROPERTY:1:^[^\043]*EM_WEBTIER_INSTHOME=(.*)\s*$"
dsc="Grid instance home location"
var=grid_oh_focus,grid_oi_focus,grid_req_ireq

[grid_oh_focus]
typ=T
dft="HTTP,OPMN"
dsc="Focus areas for Oracle home associated to the instance home"
nam=GRID_OH_FOCUS

[grid_oi_focus]
typ=T
dft="HTTP,OPMN"
dsc="Focus areas for instance home"
nam=GRID_OI_FOCUS

[GRID_DOM_REQ_DOMAIN]
typ=D
alt=missing
dft="<<CONFIG:TMP_EMGC_PROPERTY:1:^[^\043]*EM_DOMAIN_HOME=(.*)\s*$"
dsc="Grid domain home location"
var=grid_top_focus,grid_dom_focus,grid_req_wreq

[grid_top_focus]
typ=T
dft="Generic"
dsc="Focus areas for WebLogic middleware collection"
nam=GRID_TOP_FOCUS

[grid_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,GRID,MinDomCfg,MinSrvCfg"
dsc="Focus areas for WebLogic domain collection"
nam=GRID_DOM_FOCUS

[grid_req_ireq]
typ=B
dft=1
dsc="Does GRID require Oracle Instance Request Handler collection?"
nam=GRID_REQ_IREQ

[grid_req_wreq]
typ=B
dft=1
dsc="Does GRID require WebLogic Server Domain Request Handler collection?"
nam=GRID_REQ_WREQ

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Other settings
#------------------------------------------------------------------------------
[find_version]
typ=T
dsc="Find the OMS version"
exe=find_version
nam=-TMP_VER

[check_version]
typ=I
alt=GRID_EMDIAG_IN_USE,GRID_PING_TEST
dft="match:TMP_VER:^12\."
dsc="Check for Cloud Control 12c install"
nam=-
var=grid_emdiag_in_use

[grid_emdiag_in_use]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Cloud Control OMS EMDIAG kit information requested?"
inp="Do you want to run the EMDIAG omsvfy diagnostic kit (Y/N)?"
nam=GRID_EMDIAG_IN_USE
var=tmp_emdiag_top,GRID_EMDIAG_TOP

[GRID_EMDIAG_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Grid Control EMDIAG kit information requested?"
inp="Do you want EMDIAG kit results on the Grid OMS Repository (Y/N)?"
var=GRID_EMDIAG_TOP,GRID_AUDIT_AGE,GRID_VIOLATION_AGE

[tmp_emdiag_top]
typ=D
dft="${ENV.EMDIAG_HOME:${GRID_SERVER_HOME}/emdiag}"
dsc="Cloud Control EMDIAG kit directory"
nam=-TMP_GRID_EMDIAG_TOP

[GRID_EMDIAG_TOP]
typ=D
clr=-
dft=${TMP_GRID_EMDIAG_TOP}
dsc="Cloud/Grid Control EMDIAG kit directory"
err="Warning: The specified directory does not -yet- exist"
inp="To collect the log files from a local EMDIAG kit installation, enter the \
     EMDIAG kit top-level directory location, where its 'log' directory is \
     present. Otherwise, enter '${clr}'."
val=W

[GRID_AUDIT_AGE]
typ=N
dft=30
dsc="Age limit (in days) of the audit events to be collected"
err="The number of days must be an integer greater than zero"
inp="Specify the age limit (in days) of the audit events to be collected"
lvl=1
ref="I]0,["
val=E

[GRID_VIOLATION_AGE]
typ=N
dft=15
dsc="Age limit (in days) of the violations to be collected"
err="The number of days must be an integer greater than zero"
inp="Specify the age limit (in days) of the violations to be collected"
lvl=1
ref="I]0,["
val=E

[GRID_PING_TEST]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Do you want to perform agent ping test?"
inp="Do you want to perform agent ping test (Y/N)?"
var=GRID_PING_LIST

[GRID_PING_LIST]
typ=T
dsc="Agent host names for which a ping test should be performed"
end="."
dup="Duplicate host name"
inp="You can enter multiple host names one by one and finish the list by \
     entering a ${end} at last. Enter an agent host name or ${end} to end."
sep="|"

[GRID_INTERIM]
typ=B
dsc="Collect the file/directory list for the interim patches"
dft=0
inp="Do you want to collect the file/directory list for the interim patches \
     in inventory (Y/N)?"
lvl=1

