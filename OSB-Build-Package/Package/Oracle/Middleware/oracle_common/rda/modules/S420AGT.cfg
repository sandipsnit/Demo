# S420AGT.cfg: Collects Oracle Enterprise Manager Agent Information
# $Id: S420AGT.cfg,v 2.14 2012/01/02 17:25:17 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S420AGT.cfg,v 2.14 2012/01/02 17:25:17 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120102  MSC  Change the copyright notice.

###############################################################################
# Collect Oracle Enterprise Manager Agent setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${AGT_AGENT_IN_USE}
dsc="Collects Oracle Enterprise Manager Agent Information"
exe=AGTcfg
req=S000INI
rpt=AGT_AGENT_IN_USE,AGT_BASE_HOME,AGT_ORACLE_HOME,AGT_HOME,AGT_EMDIAG_IN_USE
ttl="Oracle Product Settings"
var=force_agt_tests

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[force_agt_tests]
typ=B
alt=AGT_AGENT_IN_USE
dft=0
nam=-
var=agt_agent_in_use

[agt_agent_in_use]
typ=B
dft=1
dsc="Is Oracle Enterprise Manager Agent information requested?"
nam=AGT_AGENT_IN_USE
var=check_default1,AGT_HOME,find_version,check_version,AGT_EMDIAG_IN_USE,\
    AGT_INTERIM

[AGT_AGENT_IN_USE]
typ=B
dft="<<COND:GRID_SERVER_IN_USE,1,SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Enterprise Manager Agent information requested?"
inp="Do you want RDA to analyze Oracle Enterprise Manager Agent (Y/N)?"
var=check_default1,AGT_HOME,find_version,check_version,AGT_EMDIAG_IN_USE,\
    AGT_INTERIM

[check_default1]
typ=D
alt=check_default2
dft=${GRID_SERVER_HOME}/../agent10g
dsc="Consider OMS home peer directory"
nam=-AGT_DEFAULT

[check_default2]
typ=D
alt=check_default1_11g
dft=${GRID_SERVER_HOME}/agent10g
dsc="Consider OMS home subdirectory"
nam=-AGT_DEFAULT

[check_default1_11g]
typ=D
alt=check_default2_11g
dft=${GRID_SERVER_HOME}/../agent11g
dsc="Consider OMS home peer directory"
nam=-AGT_DEFAULT

[check_default2_11g]
typ=D
alt=check_default1_12c
dft=${GRID_SERVER_HOME}/agent11g
dsc="Consider OMS home subdirectory"
nam=-AGT_DEFAULT

[check_default1_12c]
typ=D
alt=check_default3
dft=${GRID_SERVER_HOME}/../agent
dsc="Consider OMS home peer directory"
nam=-TMP_AGT_TOP
var=check_12c_hom1,check_12c_agt1

[check_default3]
typ=D
alt=check_default4
dft=${ORACLE_HOME}/../agent10g
dsc="Consider Oracle home peer directory"
nam=-AGT_DEFAULT

[check_default4]
typ=D
alt=check_default3_11g
dft=${ORACLE_HOME}/agent10
dsc="Consider Oracle home subdirectory"
nam=-AGT_DEFAULT

[check_default3_11g]
typ=D
alt=check_default4_11g
dft=${ORACLE_HOME}/../agent11g
dsc="Consider Oracle home peer directory"
nam=-AGT_DEFAULT

[check_default4_11g]
typ=D
alt=check_default2_12c
dft=${ORACLE_HOME}/agent11
dsc="Consider Oracle home subdirectory"
nam=-AGT_DEFAULT

[check_default2_12c]
typ=D
dft=${ORACLE_HOME}/../agent
dsc="Consider Oracle home peer directory"
nam=-TMP_AGT_TOP
var=check_12c_hom1,check_12c_agt1

[check_12c_hom1]
typ=D
dft=${TMP_AGT_TOP}/core
dsc="Check for Cloud Control 12c"
nam=-TMP_AGT_HOM
var=check_12c_hom2

[check_12c_hom2]
typ=D
dft="<<Search:TMP_AGT_HOM:wr3:^emctl(\.bat)?$"
dsc="Cloud Control 12c agent Oracle home bin directory"
nam=-TMP_OH_BIN
var=check_12c_oh

[check_12c_oh]
typ=D
dft=${TMP_OH_BIN}/..
dsc="Cloud Control 12c agent Oracle home directory"
nam=-AGT_OH_DEFAULT

[check_12c_agt1]
typ=D
dft="<<Search:TMP_AGT_TOP:wr3:^emctl(\.bat)?$"
dsc="Cloud Control 12c agent bin directory"
nam=-TMP_AGT_BIN
var=check_12c_ih

[check_12c_ih]
typ=D
dft=${TMP_AGT_BIN}/..
dsc="Cloud Control 12c agent home directory"
nam=-AGT_DEFAULT

[AGT_HOME]
typ=D
dft=${AGT_DEFAULT}
dsc="Agent home directory"
err="Warning: The specified directory does not -yet- exist"
inp="For  Oracle Enterprise Manager Cloud Control 12c, enter the agent \
     instance directory location. For earlier versions, enter the Grid \
     Control agent home directory location."
val=W

[find_version]
typ=T
dsc="Find the agent version"
exe=find_version
nam=-TMP_VER

[check_version]
typ=I
alt=agt_tnsadmin_list
dft="match:TMP_VER:^12\."
dsc="Check for Cloud Control 12c install"
nam=-
var=agt_oracle_home,agt_base_home,tmp_emdiag_top

[agt_oracle_home]
typ=D
dft=${AGT_ORACLE_HOME:${AGT_OH_DEFAULT:${ORACLE_HOME}}}
dsc="Agent core Oracle home directory"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle Enterprise Manager Cloud Control Agent core Oracle home \
     directory location"
nam=AGT_ORACLE_HOME
val=W

[agt_base_home]
typ=D
dft=${AGT_ORACLE_HOME}/../..
dsc="Agent base home directory"
nam=AGT_BASE_HOME

[tmp_emdiag_top]
typ=D
dft=${AGT_ORACLE_HOME}/emdiag
dsc="Agent EMDIAG kit directory"
nam=-TMP_AGT_EMDIAG_TOP

[agt_tnsadmin_list]
typ=D
dsc="List of extra TNS_ADMIN directories"
dft=${AGT_HOME}/bin|${AGT_HOME}/network/admin|${AGT_HOME}/network/agent
nam=AGT_TNSADMIN_LIST
sep="|"

[AGT_EMDIAG_IN_USE]
typ=B
dft=${RDA_DEFAULT:0}
dsc="Is Agent EMDIAG kit information requested?"
inp="Do you want to run the EMDIAG agtvfy diagnostic kit (Y/N)?"
var=AGT_EMDIAG_TOP,check_emdiag_top

[AGT_EMDIAG_TOP]
typ=D
dft=${TMP_AGT_EMDIAG_TOP}
dsc="Agent EMDIAG kit directory"
err="Warning: The specified directory does not -yet- exist"
inp="To collect agtvfy information from a local EMDIAG kit installation, enter \
     the EMDIAG kit top-level directory location."
val=W

[check_emdiag_top]
typ=F
alt=bad_emdiag_top,AGT_EMDIAG_IN_USE
dft=${AGT_EMDIAG_TOP}/bin/${AS.BATCH:agtvfy}
dsc="Check for bin/agtvfy"
nam=-

[bad_emdiag_top]
typ=C
dsc="Invalid EMDIAG kit directory"
inp="The directory '${AGT_EMDIAG_TOP}' does not exist or does not have a \
     '${AS.BATCH:agtvfy}' file in its 'bin' subdirectory.\n "
vis=0

[AGT_INTERIM]
typ=B
dsc="Collect the file/directory list for the interim patches"
dft=0
inp="Do you want to collect the file/directory list for the interim patches \
     in inventory (Y/N)?"
lvl=1

