# S495CS.def: Collects Oracle Communications Calendar Server Information
# $Id: S495CS.def,v 1.1 2012/01/06 18:03:26 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S495CS.def,v 1.1 2012/01/06 18:03:26 mschenke Exp $
#
# Change History
# 20120104  KRA  Initial version.

=head1 NAME

S495CS - Collects Oracle Communications Calendar Server Information

=head1 DESCRIPTION

This module collects information related to Oracle Communications Calendar
Server, formerly known as Sun Java System Calendar Server.

The following reports can be generated and are regrouped under C<Calendar
Server>:

=head1 REPORTS

=cut

echo tput('bold'),'Processing CS module ...',tput('off')

# Initialization
var $HOME = undef
var $TAIL = getSetting('RDA_TAIL',1000)

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'
pretoc '1:Calendar Server'

# Identify the installation home
if ${OS.linux}
{if or(testDir('d',catDir(first(command(\
         "rpm -q 'qf '%{INSTALLPREFIX}' sun-davserver")))),\
       testDir('d',catDir(first(command(\
         "rpm -q 'qf '%{INSTALLPREFIX}' sun-calendar-server")))))
  var $HOME = lastDir()
}
elsif ${OS.solaris}
{if or(testDir('d',catDir('/opt/sun/comms/davserver')),\
       testDir('d',catDir('/opt/sun/comms/calendar/SUNWics5/cal')),\
       testDir('d',catDir('/opt/SUNWics5/cal')),\
       testDir('d',catDir(first(command('pkginfo -r SUNWdavserver')))),\
       testDir('d',catDir(first(command('pkginfo -r SUNWics5')))))
  var $HOME = lastDir()
}
if ?$HOME
{# Load the common macros
 run library()

=head2 Configuration Files

Gathers Oracle Communications Calendar Server-related configuration files.

=cut

 debug ' Inside CS module, collecting the configuration files'
 pretoc '2:Configuration Files'
 call sort_files(3,0,grepDir(catDir($HOME,'config'),'^\.+$','npv'))
 unpretoc

=head2 Log Files

Gathers Oracle Communications Calendar Server-related log files.

=cut

 debug ' Inside CS module, collecting the log files'
 pretoc '2:Log Files'
 if or(testDir('d',catDir($HOME,'logs')),\
       testDir('d',catDir($HOME,'data')),\
       testDir('d',catDir('/var/opt/SUNWics5/logs')))
  call sort_files(3,$TAIL,grepDir(lastDir(),'^\.+$','npv'))
 unpretoc
}
unpretoc

=head1 SEE ALSO

L<library.def|modules::library>

=begin credits

=over 10

=item RDA 4.27: Mike Edwards.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
