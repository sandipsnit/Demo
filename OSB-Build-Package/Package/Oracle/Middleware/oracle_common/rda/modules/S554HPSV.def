# S554HPSV.def: Collects Oracle Hyperion Provider Services Information
# $Id: S554HPSV.def,v 1.9 2012/01/03 13:34:47 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S554HPSV.def,v 1.9 2012/01/03 13:34:47 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S554HPSV - Collects Oracle Hyperion Provider Services Information

=head1 DESCRIPTION

This module collects information for Oracle Hyperion Provider Services.

The following reports can be generated and are regrouped under C<Hyperion
Provider Services>:

=cut

echo tput('bold'),'Processing HPSV module ...',tput('off')

# Initialization
var $EPM_HOME      = ${EPM_HOME:${ENV.EPM_ORACLE_HOME:${ENV.HYPERION_HOME:''}}}
var $HPSV_REQUESTS = ${HPSV_REQUESTS}

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'

toc '1:Hyperion Provider Services'

=head2 product - Product Version Information

Gathers product version information.

=cut

if or(testFile('r',catFile($EPM_HOME,'AnalyticProviderServices','redist',\
                           'version.xml')),\
      testFile('r',catFile($EPM_HOME,'products',\
                           'AnalyticProviderServices','redist','version.xml')))
{debug ' Inside HPSV module, gathering product version information'
 report product
 prefix
 {write '---+!! Version Information'
  write '---## Information Taken from ',encode(lastFile())
 }
 call writeFile(lastFile())
 if isCreated(true)
  toc '2:[[',getFile(),'][rda_report][Product Version Information]]'
}

=head2 Oracle WebLogic Server Information

Includes the Oracle WebLogic Server reports generated by the WREQ module for
the associated Oracle WebLogic Server domain.

=cut

if ?$HPSV_REQUESTS
{loop $uid (split('\|',$HPSV_REQUESTS))
 {next !$uid
  var $ins = getSetting(concat('HPSV_HOME',$uid))
  call setAbbr(concat('HPSV_i',$uid))
  toc '%SPLIT%'
  toc "1+:'",getSetting(concat('HPSV_INSTANCE',$uid)),"' Deployment"
  if ?getSetting(concat('HPSV_DOM',$uid,'_REQ_DOMAIN'))
  {var $dom = basename(last)
   toc '%PUSH("%SPLIT%")%'
   toc '%PUSH("1++:Oracle WebLogic Server Overview")%'
   toc '%INCLUDE("',${CUR.GROUP},'_WREQ_HPSV_TOP',$uid,'.toc",1)%'
   toc '%POP2%'
   toc '%PUSH("%SPLIT%")%'
   toc '%PUSH("1++:',"'",$dom,"'",' Domain")%'
   toc '%INCLUDE("',${CUR.GROUP},'_WREQ_HPSV_DOM',$uid,'.toc",1)%'
   toc '%POP2%'
  }
  unpretoc 2
 }
}
elsif ?${HPSV_DOM_REQ_DOMAIN}
{var $dom = basename(last)
 toc '%PUSH("%SPLIT%")%'
 toc '%PUSH("1+:Oracle WebLogic Server Overview")%'
 toc '%INCLUDE("',${CUR.GROUP},'_WREQ_HPSV_TOP.toc")%'
 toc '%POP2%'
 toc '%PUSH("%SPLIT%")%'
 toc '%PUSH("1+:',"'",$dom,"'",' Domain")%'
 toc '%INCLUDE("',${CUR.GROUP},'_WREQ_HPSV_DOM.toc")%'
 toc '%POP2%'
}

=head1 SEE ALSO

L<S301WREQ.def|modules::S301WREQ>

=begin credits

=over 10

=item RDA 4.19: Deepak Sabita.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
