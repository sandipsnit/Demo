# S556PR.def: Collects Oracle Hyperion SQR Production Reporting Information
# $Id: S556PR.def,v 1.3 2012/01/03 13:34:47 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S556PR.def,v 1.3 2012/01/03 13:34:47 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

S556PR - Collects Oracle Hyperion SQR Production Reporting Information

=head1 DESCRIPTION

This module collects information for Oracle Hyperion SQR Production Reporting.

The following reports can be generated and are regrouped under C<Hyperion SQR
Production Reporting>:

=cut

echo tput('bold'),'Processing PR module ...',tput('off')

# Initialization
var $EPM_HOME    = ${EPM_HOME:${ENV.EPM_ORACLE_HOME:${ENV.HYPERION_HOME:''}}}
var $PR_REQUESTS = ${PR_REQUESTS}

var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'

pretoc '1:Hyperion SQR Production Reporting'

=head2 sqr - SQR Initialization File

For Windows, collects the F<C:\Windows\sqr.ini> or F<C:\Winnt\sqr.ini> file.

=cut

if or(isWindows(),isCygwin())
{debug ' Inside PR module, getting sqr.ini file'
 if or(testFile('f',catFile('C:\Windows\sqr.ini')),\
       testFile('f',catFile('C:\Winnt\sqr.ini')))
 {var $fil = lastFile()
  report sqr
  write '---+!! ',encode($fil),' file contents'
  call writeFile($fil)
  toc '2:[[',getFile(),'][rda_report][SQR Initialization File]]'
 }
}

=head2 Oracle WebLogic Server Information

Includes the Oracle WebLogic Server reports generated by the WREQ module for
the associated Oracle WebLogic Server domain (on versions having a product
registry).

=cut

if ?$PR_REQUESTS
{loop $uid (split('\|',$PR_REQUESTS))
 {next !$uid
  var $ins = getSetting(concat('PR_HOME',$uid))
  call setAbbr(concat('PR_i',$uid))
  toc '%SPLIT%'
  toc "1+:'",getSetting(concat('PR_INSTANCE',$uid)),"' Deployment"
  if ?getSetting(concat('PR_DOM',$uid,'_REQ_DOMAIN'))
  {var $dom = basename(last)
   toc '%PUSH("%SPLIT%")%'
   toc '%PUSH("1++:Oracle WebLogic Server Overview")%'
   toc '%INCLUDE("',${CUR.GROUP},'_WREQ_PR_TOP',$uid,'.toc",1)%'
   toc '%POP2%'
   toc '%PUSH("%SPLIT%")%'
   toc '%PUSH("1++:',"'",$dom,"'",' Domain")%'
   toc '%INCLUDE("',${CUR.GROUP},'_WREQ_PR_DOM',$uid,'.toc",1)%'
   toc '%POP2%'
  }
  unpretoc 2
 }
}
elsif ?${PR_DOM_REQ_DOMAIN}
{var $dom = basename(last)
 toc '%PUSH("%SPLIT%")%'
 toc '%PUSH("1+:Oracle WebLogic Server Overview")%'
 toc '%INCLUDE("',${CUR.GROUP},'_WREQ_PR_TOP.toc")%'
 toc '%POP2%'
 toc '%PUSH("%SPLIT%")%'
 toc '%PUSH("1+:',"'",$dom,"'",' Domain")%'
 toc '%INCLUDE("',${CUR.GROUP},'_WREQ_PR_DOM.toc")%'
 toc '%POP2%'
}
unpretoc

=begin credits

=over 10

=item RDA 4.23: Yun Kuo.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
