# S564HFM.cfg: Collects Oracle Hyperion Financial Management Information
# $Id: S564HFM.cfg,v 2.22 2012/09/04 12:35:48 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/S564HFM.cfg,v 2.22 2012/09/04 12:35:48 mschenke Exp $
#
# Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.
#
# Change history
# 20120904  KRA  Fix all_servers setting.

###############################################################################
# Collect HFM setup information
###############################################################################

#------------------------------------------------------------------------------
# Module definition
#------------------------------------------------------------------------------
col=${HFM_IN_USE}
dsc="Collects Oracle Hyperion Financial Management Information"
env=HYPERION_HOME
exe=EPMcfg
fam=Cygwin,Windows
req=S545EPM,*?HFM_REQ_WREQ:S301WREQ
rpt=HFM_IN_USE
trg=S545EPM,?EPM_REQ_IREQ:S313IREQ,?HFM_REQ_WREQ:S301WREQ
ttl="Oracle Product Settings"
var=check_depth

#------------------------------------------------------------------------------
# Setting definitions
#------------------------------------------------------------------------------
[check_depth]
typ=B
alt=check_epm
dft=${CUR.DEPTH}
dsc="Does the setup flow is through profile?"
nam=-
var=ORACLE_PARENT,check_ofm

#------------------------------------------------------------------------------
# Setting definitions for INI-based module
#------------------------------------------------------------------------------
[ORACLE_PARENT]
typ=D
dft=${ENV.BEA_HOME}
dsc="Oracle Middleware home"
err="Warning: The specified directory does not -yet- exist"
inp="Enter the Oracle Middleware home to be used for data analysis"
val=W

[check_ofm]
typ=F
alt=mw_comment
dft="${ORACLE_PARENT}/registry.xml"
dsc="Is a valid OFM environment?"
nam=-
var=dft_dom_home,dft_ora_home,dft_instance_root,dft_java_home

[mw_comment]
typ=C
dsc="Report bad Oracle Middleware home directory"
inp="The specified Middleware home directory is either invalid or does not \
     contain some Oracle WebLogic related-files. The collection is \
     disabled. Rerun the setup with the correct Middleware home directory.\n\n\
     Hit 'Return' to continue"
val=F

[dft_dom_home]
typ=D
dft="${ORACLE_PARENT}/user_projects/domains/EPMSystem"
dsc="Default domain home directory"
nam=-TMP_DOMAIN_HOME
var=domain_home

[domain_home]
typ=D
dft=${TMP_DOMAIN_HOME}
dsc="Domain home directory"
nam=DOMAIN_HOME

[dft_ora_home]
typ=D
dft="<<SEARCH:ORACLE_PARENT:p:^EPMSystem11"
dsc="Default Oracle home directory"
nam=-TMP_ORACLE_HOME
var=oracle_home

[oracle_home]
typ=D
dft=${TMP_ORACLE_HOME}
dsc="Oracle home"
nam=ORACLE_HOME

[dft_instance_root]
typ=D
dft="${ORACLE_PARENT}/user_projects"
dsc="Default instance root directory"
nam=-TMP_INSTANCE_ROOT
var=instance_root

[instance_root]
typ=D
dft=${TMP_INSTANCE_ROOT}
dsc="Instance root directory"
nam=INSTANCE_ROOT

[dft_java_home]
typ=D
dft="<<SEARCH:ORACLE_PARENT:p:^(jdk\d+|jrockit_\d+)"
dsc="Default java home"
nam=-TMP_JAVA_HOME
var=java_home

[java_home]
typ=D
dft=${TMP_JAVA_HOME}
dsc="Java home"
nam=JAVA_HOME

#------------------------------------------------------------------------------
# Setting definitions for HFM-based setup
#------------------------------------------------------------------------------
[check_epm]
typ=B
alt=no_hfm
dft=${EPM_IN_USE}
dsc="Are EPM collections requested?"
nam=-
var=check_epm_home

[check_epm_home]
typ=D
alt=no_hfm
dft=${EPM_HOME}
dsc="Is the Hyperion home defined?"
nam=-
var=force_hfm_tests

[no_hfm]
typ=B
dft=0
dsc="Is Oracle Hyperion Financial Management information requested?"
nam=HFM_IN_USE

[force_hfm_tests]
typ=B
alt=HFM_IN_USE
dft=0
nam=-
var=hfm_in_use

[hfm_in_use]
typ=B
dft=1
dsc="Gather Oracle Hyperion Financial Management information?"
nam=HFM_IN_USE
var=check_epm_domain,HFM_AGE,HFM_DB,HFM_START_TIME,check_start_time

[HFM_IN_USE]
typ=B
dft="<<COND:SELECTED_MODULE,1,RDA_DEFAULT,1,0"
dsc="Is Oracle Hyperion Financial Management information requested?"
inp="Do you want RDA to analyze Oracle Hyperion Financial Management (Y/N)?"
var=check_epm_domain,HFM_AGE,HFM_DB,HFM_START_TIME,check_start_time

#------------------------------------------------------------------------------
# Determine the collection approach
#------------------------------------------------------------------------------
[check_epm_domain]
typ=D
alt=check_epm_instance
dft=${EPM_DOMAIN}
dsc="Check if there is single domain in EPM"
nam=HFM_DOM_REQ_DOMAIN
var=chk_servers,hfm_req_wreq,set_top_focus,set_dom_focus

[check_epm_instance]
typ=D
alt=missing
dft=${EPM_INSTANCE_ROOT}
dsc="Check if there is instance root in EPM"
var=hfm_instances,set_loop,hfm_requests

#------------------------------------------------------------------------------
# Set domain settings
#------------------------------------------------------------------------------
[hfm_instances]
typ=T
dft="${EPM_INSTANCES}"
dsc=List of HFM instances (derived from the EPM module)
exe=init_dom
nam=HFM_INSTANCES

[set_loop]
typ=L
dft="${HFM_INSTANCES}"
dsc="Examine all instances"
nam=-TMP_INSTANCE
sep="|"
var=add_hfm_request,set_hfm_instance,set_hfm_home,set_req_domain

[add_hfm_request]
typ=I
dft=join:TMP_REQUESTS:${INC.Instance}
dsc="Add an instance identifier to the list"
nam=-TMP_REQUESTS

[set_hfm_instance]
typ=T
dft=${TMP_INSTANCE}
dsc="Instance name"
exe=find_dom_details
nam=HFM_INSTANCE${CNT.Instance}

[set_hfm_home]
typ=D
dft=${TMP_HOME}
dsc="Instance home directory for ${TMP_INSTANCE}"
exe=find_dom_details
nam=HFM_HOME${CNT.Instance}

[set_req_domain]
typ=D
alt=missing
dft=${TMP_DOMAIN}
dsc="Domain associated to ${TMP_INSTANCE}"
nam=HFM_DOM${CNT.Instance}_REQ_DOMAIN
var=chk_servers,hfm_req_wreq,set_top_focus,set_dom_focus

[chk_servers]
typ=B
alt=missing
dft=0
dsc="Check which server homes are present in the domain home directory"
exe=chk_servers
nam=-
var=ask_servers

[ask_servers]
typ=M
add="*|All servers|*|all_servers"
bef="Oracle WebLogic Server list for '${TMP_DOMAIN_NAME}' Domain:"
dft="${TMP_DFT_SERVERS}"
dsc="Server list for the domain associated to ${TMP_INSTANCE}"
dup="Server already selected"
end="."
err="Enter a menu item number only"
inp="Enter the number corresponding to the server directory name, or * to \
     select all servers, or ${end} to terminate the list"
itm="${TMP_ITM_SERVERS}"
mnu="<<I"
nam=HFM_DOM${CNT.Instance}_WLS_SERVERS
one="*"
rsp="^"
sep="|"
val=E

[all_servers]
typ=T
dft=${TMP_ALL_SERVERS}
dsc="List all servers"
nam=HFM_DOM${CNT.Instance}_WLS_SERVERS

[set_top_focus]
typ=T
dft="Generic"
dsc="Focus areas for Oracle WebLogic Server middleware collection"
nam=HFM_TOP${CNT.Instance}_FOCUS

[set_dom_focus]
typ=T
dft="ExtDomCfg,ExtSrvCfg,HFM,HSS,MinDomCfg,MinSrvCfg"
dsc="Focus areas for Oracle WebLogic Server domain collection"
nam=HFM_DOM${CNT.Instance}_FOCUS

[hfm_requests]
typ=T
dft=${TMP_REQUESTS}
dsc="List of request identifiers"
nam=HFM_REQUESTS

[hfm_req_wreq]
typ=B
dft=1
dsc="Does HFM require WebLogic Server Domain Request Handler collection?"
nam=HFM_REQ_WREQ

[missing]
typ=B
dsc="Used to reject settings"
nam=-

#------------------------------------------------------------------------------
# Common settings
#------------------------------------------------------------------------------
[HFM_AGE]
typ=N
dft=3
dsc="Age limit (in days) of the log files to be collected"
err="The number of days must be a positive number"
inp="Enter the age limit (in days) for the log files to be collected for \
     Hyperion Financial Management"
lvl=1
ref="R[0,["
val=F

[HFM_DB]
typ=B
dft=1
dsc="Collect information from an Oracle Database"
inp="Do you want to collect information from an Oracle Database (Y/N)?"
hlp="WARNING: RDBMS information is collected from Oracle Database only.\n"
var=check_sid,HFM_ANALYZE

[check_sid]
typ=I
alt=hfm_local
dft="exists:ORACLE_SID"
dsc="Check if ORACLE_SID is defined"
nam=-
var=HFM_LOCAL

[hfm_local]
typ=B
alt=HFM_SID,HFM_LOGIN,HFM_SWITCH
dft=0
dsc="Are the schemas stored in the database to be analyzed?"
nam=HFM_LOCAL

[HFM_LOCAL]
typ=B
alt=HFM_SID,HFM_LOGIN,HFM_SWITCH
dft=1
dsc="Are the schemas stored in the database to be analyzed?"
inp="Are the Hyperion Financial Management schemas stored in the \
     '${ORACLE_SID}' database (Y/N)?"

[HFM_SID]
typ=T
dsc="Database containing the schemas"
inp="Enter the Oracle SID of the database containing the Hyperion \
     Financial Management schemas."

[HFM_LOGIN]
typ=T
dft='${SQL_LOGIN:hfm}'
dsc="User to connect to SQL*Plus"
inp="Enter an Oracle User ID (userid only) to view Hyperion Financial \
     Management-related information."

[HFM_SWITCH]
typ=B
dft=0
dsc="Indicate whether RDA must switch the Oracle system identifier"

[HFM_ANALYZE]
typ=B
dft=1
dsc="Specific application analysis to be run"
inp="Do you want to collect data analysis for a specific application (Y/N)?"
hlp="WARNING: RDBMS information is collected from Oracle Database only.\n"
var=HFM_APPNAME,HFM_START_YEAR,HFM_END_YEAR

[HFM_APPNAME]
typ=T
dsc="Application to run data analysis on"
inp="Enter the application name on which to run data analysis"

[HFM_START_YEAR]
typ=T
dsc="Start year for running the data analysis"
err="Enter four digits for the start year"
inp="Enter the start year for performing the data analysis"
ref="^[1-2]\d{3}$"
val=E

[HFM_END_YEAR]
typ=T
dsc="End year for running the data analysis"
err="Enter four digits for the end year"
inp="Enter the end year for performing the data analysis"
ref="^[1-2]\d{3}$"
val=E

[HFM_START_TIME]
typ=T
clr='-'
dft=''
dsc="Start time for task audit and HsvEventLog collections"
err="Start time format should be DD-Mon-YYYY_HH24:MI"
hlp="If you want to collect task audit and HsvEventLog information for a \
     specific time interval, enter the start and end times. Otherwise, RDA \
     collects the information for the last 14 days."
inp="Enter the time, when you want to start the collection of task audit and \
     HsvEventLog information. When a dash '${clr}' is specified as input, RDA \
     considers last 14 days. Start time should be in DD-Mon-YYYY_HH24:MI \
     format."
ref="^([0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d)?$"
val=E

[check_start_time]
typ=I
alt=hfm_end_time
dft="match:HFM_START_TIME:^[0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d$"
dsc="Check if the end time must be specified"
nam=-
var=HFM_END_TIME

[hfm_end_time]
typ=T
dft=''
dsc="End time for task audit and HsvEventLog collections"
nam=HFM_END_TIME

[HFM_END_TIME]
typ=T
clr='-'
dft=''
dsc="End time for task audit and HsvEventLog collections"
err="End time format should be DD-Mon-YYYY_HH24:MI"
inp="Enter the time, when you want to end the collection of task audit and \
     HsvEventLog information. When a dash '${clr}' is specified as input, \
     current time is taken as end time. End time should be in \
     DD-Mon-YYYY_HH24:MI format."
ref="^([0-3]\d\-[A-Za-z]{3}\-[1-2]\d{3}_[0-2]\d:[0-5]\d)?$"
val=E
