# SOSload.def: Collects siga/sosreport/sysreport Reports
# $Id: SOSload.def,v 2.5 2012/01/03 13:34:48 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/SOSload.def,v 2.5 2012/01/03 13:34:48 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

SOSload - Collects siga/sosreport/sysreport Reports

=head1 DESCRIPTION

This module retrieves the F<siga>, F<sosreport>, and F<sysreport> reports
generated over the last 15 days.

=cut

debug ' Inside LOAD module, gathering siga/sosreport/sysreport reports'
report sos

# Purge old reports
call setAbbr('SOS')
call purge('C','.',15)

# Collect recent reports
prefix
{write '---+ siga/sosreport/sysreport Reports'
 write '   * Limited to runs done in last 15 days'
 write '   * Links point to files that have been collected in their original \
             format. Opening them directly in your browser can present risks. \
             To prevent them, access the file outside the browser or use \
             the link to save them and use an adequate viewer.'
 write '|*File Name*|*Last Modified Date*| *Size*|'
}
loop $fil (grepDir(${OUT.C},concat('^',${CUR.PREFIX}),'pt'))
{var $bas = basename($fil)
 write '|[[',$bas,'][_blank][',encode($bas),']]|',\
       getLastModify($fil,'%d-%b-%Y&nbsp;%H:%M:%S'),'| ',\
       getSize($fil),'|'
}
if isCreated(true)
 toc '2:[[',getFile(),'][rda_report][siga/sosreport/sysreport Reports]]'

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
