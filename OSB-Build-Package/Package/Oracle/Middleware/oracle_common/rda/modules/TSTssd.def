# TSTssd.def: Analyzes System State Dumps
# $Id: TSTssd.def,v 2.7 2012/01/03 13:34:48 mschenke Exp $
# ARCS: $Header: /home/cvs/cvs/RDA_4/src/scripting/lib/modules/TSTssd.def,v 2.7 2012/01/03 13:34:48 mschenke Exp $
#
# Change History
# 20120103  MSC  Change the copyright notice.

=head1 NAME

TSTssd - Analyzes System State Dumps

=head1 DESCRIPTION

This test module analyzes all system state dumps contained in a specified trace
file and provides a summary as a report. The trace file can be specified in two
ways:

=over 3

=item a)

Runs interactively. It requests the user to input the absolute path of the
trace file.

<rda> -vT ssd

=item b)

Runs from the command line. The input can be given in the command line using
the following syntax:

<rda> -vT ssd:absolute_path_of_trace_file

=back

=cut

echo tput('bold'),'Analyzing system state dumps ...',tput('off')

# Initialisation
var $TOC = '%TOC%'
var $TOP = '[[#Top][Back to top]]'

# Load the common macros
run DBssd()

# Obtain the input trace file
if getSetting('TST_ARGS')
 var $fil = last
else
{call requestSetting('TSTssd')
 var $fil = getSetting('TRACE_FILE')
}

# Treat the file
if testFile('r',$fil)
{report system_state
 call analyze_ssd($fil)
 if isCreated()
 {call renderFile()
  echo 'Result file: ',last
 }
 else
  echo 'The input file does not contain a valid system state dump'
}
else
 echo 'The input file does not exist or is not readable'

=head1 SEE ALSO

L<DBssd.def|modules::DBssd>

=begin credits

=over 10

=item RDA 4.6:  Kevin Quinn.

=back

=end credits

=head1 COPYRIGHT NOTICE

Copyright (c) 2002, 2012, Oracle and/or its affiliates. All rights reserved.

=head1 TRADEMARK NOTICE

Oracle and Java are registered trademarks of Oracle and/or its
affiliates. Other names may be trademarks of their respective owners.

=cut
