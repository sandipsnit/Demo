<!DOCTYPE TargetCollection SYSTEM "../dtds/TargetCollection.dtd">

<TargetCollection TYPE="oracle_webcache" >
<!--
  Please cut and paste the following block in to your collection file for your 
  specific oracle_webcache target in order to start a collection of chronos
  data. This must be inside the TargetCollection XML node.

  <CollectionItem NAME = "chronos_collection_set" UPLOAD_ON_FETCH = "TRUE" TIMEOUT="-1">
     <Schedule>
        <IntervalSchedule INTERVAL = "20" TIME_UNIT = "Min"/>
     </Schedule>
     <MetricColl NAME = "chronos_collection"/>
     <MetricColl NAME = "chronos_run"/>
  </CollectionItem>

  Example:
    The following are the contents of a sample collection file placed under 
    $EMD_ROOT/sysman/emd/collection in order to estabilish collection of 
    chronos data. 

<TargetCollection TYPE="oracle_webcache" NAME="my_webcache">
  <CollectionItem NAME = "chronos_collection" UPLOAD_ON_FETCH = "TRUE" TIMEOUT="-1">
     <Schedule>
        <IntervalSchedule INTERVAL = "20" TIME_UNIT = "Min"/>
     </Schedule>
     <MetricColl NAME = "chronos_collection"/>
     <MetricColl NAME = "chronos_run"/>
  </CollectionItem>
</TargetCollection>
  
-->

  <CollectionItem NAME="oracle_webcache_config" CONFIG="TRUE" COLLECT_WHEN_DOWN="TRUE" UPLOAD_ON_FETCH="TRUE" UPLOAD="1">
    <Schedule>
      <IntervalSchedule INTERVAL="1" TIME_UNIT="Day" />
    </Schedule>
    <MetricColl NAME="ClusterInfo" />
    <MetricColl NAME="ClusterMembers" />
    <MetricColl NAME="OriginServers" />
    <MetricColl NAME="SiteMappings" />
    <MetricColl NAME="SiteAliases" />
    <MetricColl NAME="ListenPorts" />
    <MetricColl NAME="OperationPorts" />
    <MetricColl NAME="PerfRelated" />
    <MetricColl NAME="ConfigFiles" />
    <MetricColl NAME="ConfigFiles_Upload" />
  </CollectionItem>

  <!-- Metrics collected for grid control AS topology pages -->
  <CollectionItem NAME="oracle_webcache_topology" COLLECT_WHEN_DOWN="TRUE" UPLOAD="1">
     <Schedule>
        <IntervalSchedule INTERVAL="1" TIME_UNIT="Day"/>
     </Schedule>
     <MetricColl NAME="ClusterInfoTopo" />
     <MetricColl NAME="OriginServersTopo" />
  </CollectionItem>

  <CollectionItem NAME = "Response" UPLOAD="60">
     <Schedule>
        <IntervalSchedule INTERVAL = "1" TIME_UNIT = "Min"/>
     </Schedule>
     <Condition COLUMN_NAME="Status" CRITICAL="0" OPERATOR="EQ"  
      MESSAGE_NLSID="RESPONSE_STATUS_DOWN"
      MESSAGE="The Web Cache instance is down"
      CLEAR_MESSAGE_NLSID="RESPONSE_STATUS_DOWN_CLEAR"
      CLEAR_MESSAGE="CLEARED - The Web Cache instance is up"/>
  </CollectionItem>

  <CollectionItem NAME = "HIST" UPLOAD="3" INITIAL_UPLOADS="4">
     <Schedule>
        <IntervalSchedule INTERVAL = "5" TIME_UNIT = "Min"/>
     </Schedule>
     <Condition COLUMN_NAME="HIST__COMPUTED__PERCENT_OF_CACHE_MEMORY_ALLOCATED" 
      CRITICAL="99" WARNING="90" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__COMPUTED__PERCENT_OF_CACHE_MEMORY_ALLOCATED_"
      MESSAGE="The cache is using %value%%% of its allocated memory" />
     <Condition COLUMN_NAME="HIST__COMPUTED__HIT_RATE"
      CRITICAL="20" WARNING="30" OPERATOR="LT" OCCURRENCES="3"
      MESSAGE_NLSID="HIST__COMPUTED__HIT_RATE_"
      MESSAGE="%value%%% of requests were cache hits" />
     <Condition COLUMN_NAME="HIST__COMPUTED__STALE_HIT_RATE"
      CRITICAL="80" WARNING="70" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__COMPUTED__STALE_HIT_RATE_"
      MESSAGE="%value%%% of hits were stale cache hits" />
     <Condition COLUMN_NAME="HIST__ERRORS__NETWORK_ERRORS__CURRENT_THRUPUT" 
      CRITICAL="1" WARNING=".5" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__ERRORS__NETWORK_ERRORS__CURRENT_THRUPUT"
      MESSAGE="The cache encountered %value% network errors per second" />
     <Condition COLUMN_NAME="HIST__ERRORS__PARTIAL_PAGE_ERRORS__CURRENT_THRUPUT" 
      CRITICAL="1" WARNING=".5" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__ERRORS__PARTIAL_PAGE_ERRORS__CURRENT_THRUPUT"
      MESSAGE="The cache encountered %value% partial page errors per second" />
     <Condition COLUMN_NAME="HIST__ERRORS__SITE_BUSY_ERRORS__CURRENT_THRUPUT" 
      CRITICAL="1" WARNING=".5" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__ERRORS__SITE_BUSY_ERRORS__CURRENT_THRUPUT" 
      MESSAGE="The cache encountered %value% site busy errors per second" />
     <Condition COLUMN_NAME="HIST__INVALIDATION_REQUESTS__CURRENT_THRUPUT" 
      CRITICAL="120" WARNING="100" OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="HIST__INVALIDATION_REQUESTS__CURRENT_THRUPUT"
      MESSAGE="The cache encountered %value% invalidation requests per second" />
  </CollectionItem>

  <CollectionItem NAME = "SERVER_HIST" UPLOAD="3" INITIAL_UPLOADS="4">
     <Schedule>
        <IntervalSchedule INTERVAL = "5" TIME_UNIT = "Min"/>
     </Schedule>
  </CollectionItem>

  <CollectionItem NAME = "ESI_HIST" UPLOAD="3" INITIAL_UPLOADS="4">
     <Schedule>
        <IntervalSchedule INTERVAL = "5" TIME_UNIT = "Min"/>
     </Schedule>
  </CollectionItem>

  <CollectionItem NAME = "ResourceUsage" UPLOAD="3" INITIAL_UPLOADS="4">
     <Schedule>
        <IntervalSchedule INTERVAL = "5" TIME_UNIT = "Min"/>
     </Schedule>
     <Condition COLUMN_NAME="cpu.component" CRITICAL="NotDefined" WARNING="NotDefined" 
      OPERATOR="GT" OCCURRENCES="2" 
      MESSAGE_NLSID="RESOURCEUSAGE_CPU_COMPONENT"
      MESSAGE="CPU Utilization is %value%%%" />
     <Condition COLUMN_NAME="memoryPercentage.component" CRITICAL="90" WARNING="80" 
      OPERATOR="GT" OCCURRENCES="2"
      MESSAGE_NLSID="RESOURCEUSAGE_MEMORYPERCENTAGE_COMPONENT"
      MESSAGE="Memory Utilization is %value%%%"/>
  </CollectionItem>

  <CollectionItem NAME="oracle_security" CONFIG="TRUE" COLLECT_WHEN_DOWN="TRUE" UPLOAD_ON_FETCH="TRUE" UPLOAD="1"> 
    <Schedule OFFSET_TYPE="INCREMENTAL">
        <IntervalSchedule INTERVAL="24" TIME_UNIT="Hr"/>
    </Schedule>
    <MetricColl NAME="webcacheSecurityViolations"/>
</CollectionItem>

  <CollectionItem NAME = "WebCache_general" UPLOAD="3" INITIAL_UPLOADS="4">
     <Schedule>
        <IntervalSchedule INTERVAL = "5" TIME_UNIT = "Min"/>
     </Schedule>
 
     <MetricColl NAME="WebCache_RequestFilter_CIP"/>
     <MetricColl NAME="WebCache_Request_Filter_URL"/>
     <MetricColl NAME="WebCache_CacheabilityRule"/>
     <MetricColl NAME="nontimedAggSiteStats"/>
     <MetricColl NAME="timedAggSiteStats"/>

  </CollectionItem>


</TargetCollection>
