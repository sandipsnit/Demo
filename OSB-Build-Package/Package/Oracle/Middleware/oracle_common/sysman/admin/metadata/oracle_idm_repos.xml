<?xml version="1.0" ?>

<!-- Copyright (c) 2007, 2008, Oracle and/or its affiliates.
All rights reserved. -->

<!-- $Header: emas/sysman/admin/metadata/oracle_idm_repos.xml /st_emasgc_project-21452/1 2008/12/16 12:47:46 kchander Exp $ -->
<!DOCTYPE TargetMetadata SYSTEM "../dtds/TargetMetadata.dtd">
<TargetMetadata META_VER="2.1" TYPE="oracle_idm_repos" 
                CATEGORY_PROPERTIES="Version;DatabaseType">
	<Display>
		<Label NLSID="ORACLE_IM_REPOS_NAME">Identity Manager Repository</Label>
	</Display>

	<Metric NAME="Response" TYPE="TABLE">
		<Display>
			<Label NLSID="ORACLE_IM_REPOS_RESP">Response</Label>
		</Display>
		<TableDescriptor>
			<ColumnDescriptor NAME="Status" TYPE="NUMBER" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RESP_STATUS">Status</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="LogonTime" TYPE="NUMBER" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_LOGON_TIME">Logon Time</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="StatusMsg" TYPE="STRING" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_STATUS_MSG">Status Msg</Label>
				</Display>
			</ColumnDescriptor>
		</TableDescriptor>
		<QueryDescriptor FETCHLET_ID="OSLineToken">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="oracle_database"/>
		  </ValidIf>
			<Property NAME="ENVEM_TARGET_ADDRESS" SCOPE="INSTANCE" OPTIONAL="TRUE">ConnectDescriptor</Property>
			<Property NAME="Port" SCOPE="INSTANCE" OPTIONAL="TRUE">DatabaseType</Property>
			<Property NAME="SID" SCOPE="INSTANCE" OPTIONAL="TRUE">SID</Property>
			<Property NAME="ENVEM_TARGET_USERNAME" SCOPE="INSTANCE">UserName</Property>
			<Property NAME="ENVEM_TARGET_PASSWORD" SCOPE="INSTANCE">password</Property>
			<Property NAME="perlBin" SCOPE="SYSTEMGLOBAL">perlBin</Property>
			<Property NAME="scriptsDir" SCOPE="SYSTEMGLOBAL">scriptsDir</Property>
            <Property NAME="command" SCOPE="GLOBAL">"%perlBin%/perl" "%scriptsDir%/idmrepos_status.pl" "%DatabaseType%" "%UserName%" "%password%" "%ConnectDescriptor%"</Property>
			<Property NAME="startsWith" SCOPE="GLOBAL">em_result=</Property>
			<Property NAME="delimiter" SCOPE="GLOBAL">|</Property>
		</QueryDescriptor>
		<QueryDescriptor FETCHLET_ID="OSLineToken">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="microsoft_sqlserver_database"/>
		  </ValidIf>
			<Property NAME="Port" SCOPE="INSTANCE" OPTIONAL="TRUE">DatabaseType</Property>
			<Property NAME="jdbcdriver" SCOPE="INSTANCE" OPTIONAL="TRUE">jdbcdriver</Property>
			<Property NAME="url" SCOPE="INSTANCE" OPTIONAL="TRUE">url</Property>
			<Property NAME="XLHOME" SCOPE="INSTANCE" OPTIONAL="TRUE">XLHOME</Property>
			<Property NAME="ENVEM_TARGET_USERNAME" SCOPE="INSTANCE">UserName</Property>
			<Property NAME="ENVEM_TARGET_PASSWORD" SCOPE="INSTANCE">password</Property>
			<Property NAME="perlBin" SCOPE="SYSTEMGLOBAL">perlBin</Property>
			<Property NAME="emdRoot" SCOPE="SYSTEMGLOBAL">emdRoot</Property>
			<Property NAME="scriptsDir" SCOPE="SYSTEMGLOBAL">scriptsDir</Property>
            <Property NAME="command" SCOPE="GLOBAL">"%perlBin%/perl" "%scriptsDir%/idmrepos_status.pl" "%DatabaseType%" "1" "%url%" "%jdbcdriver%" "%UserName%" "%password%" "%XLHOME%" "%emdRoot%"</Property>
			<Property NAME="startsWith" SCOPE="GLOBAL">em_result=</Property>
			<Property NAME="delimiter" SCOPE="GLOBAL">|</Property>
		</QueryDescriptor>
    </Metric>

	<Metric NAME="Provisioning" TYPE="TABLE" USAGE_TYPE="VIEW_COLLECT">
		<Display>
			<Label NLSID="ORACLE_IM_REPOS_PROVISIONING_METRIC_LABEL">Provisioning Metrics</Label>
		</Display>
		<TableDescriptor>
			<ColumnDescriptor NAME="totalNoOfProvUsers" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_PROV_USERS_LABEL">Total Number of Provisioned Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="totalNoOfLockedUsers" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_LOCKED_USERS_LABEL">Total Number of Locked Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="totalNoOfUsersDeleted" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_USERS_DELETED_LABEL">Total Number of Users Deleted</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="totalNoOfUsersDisabled" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_USERS_DISABLED_LABEL">Total Number of Users Disabled</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfProvUsers" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfProvUsers - _totalNoOfProvUsers) > 0 ? (totalNoOfProvUsers - _totalNoOfProvUsers) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_PROV_USERS_LABEL">Newly Provisioned Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfLockedUsers" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfLockedUsers - _totalNoOfLockedUsers) > 0 ? (totalNoOfLockedUsers - _totalNoOfLockedUsers) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_LOCKED_USERS_LABEL">Newly Locked Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfUsersDeleted" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfUsersDeleted - _totalNoOfUsersDeleted) > 0 ? (totalNoOfUsersDeleted - _totalNoOfUsersDeleted) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_USERS_DELETED_LABEL">Newly Deleted Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfUsersDisabled" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfUsersDisabled - _totalNoOfUsersDisabled) > 0 ? (totalNoOfUsersDisabled - _totalNoOfUsersDisabled) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_USERS_DISABLED_LABEL">Newly Disabled Users</Label>
				</Display>
			</ColumnDescriptor>
		</TableDescriptor>
        <QueryDescriptor FETCHLET_ID="SQL">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="oracle_database"/>
		  </ValidIf>
          <Property NAME="STATEMENT" SCOPE="GLOBAL">
            <![CDATA[
            DECLARE
				no_of_prov_users NUMBER := 0;
				no_of_locked_users NUMBER := 0;
				no_of_users_deleted NUMBER := 0;
				no_of_users_disabled NUMBER := 0;
				TYPE data_cursor_type IS REF CURSOR;
				data_cursor data_cursor_type;
            BEGIN
				select count(usr_key) into no_of_prov_users from USR
					where USR_STATUS='Active' and USR_PROVISIONED_DATE <= sysdate;
				select count(usr_key) into no_of_locked_users from USR where USR_STATUS='Locked';
				select count(usr_key) into no_of_users_deleted from USR where USR_STATUS='Deleted';
				select count(usr_key) into no_of_users_disabled from USR where USR_STATUS='Disabled';
				  -- open the cursor to return
				  OPEN data_cursor FOR
					SELECT to_char(no_of_prov_users), to_char(no_of_locked_users),
					to_char(no_of_users_deleted), to_char(no_of_users_disabled) FROM dual;
				  :1 := data_cursor;
            END;
            ]]>
          </Property>
          <Property NAME="SQLOUTPARAMPOS" SCOPE="GLOBAL">1</Property>
          <Property NAME="SQLOUTPARAMTYPE" SCOPE="GLOBAL">SQL_CURSOR</Property>
          <Property NAME="MachineName" SCOPE="INSTANCE">MachineName</Property>
          <Property NAME="Port" SCOPE="INSTANCE">Port</Property>
          <Property NAME="SID" SCOPE="INSTANCE">SID</Property>
          <Property NAME="UserName" SCOPE="INSTANCE">UserName</Property>
          <Property NAME="password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
        <QueryDescriptor FETCHLET_ID="JDBCSQL">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="microsoft_sqlserver_database"/>
		  </ValidIf>
            <Property NAME="ConnInfo" SCOPE="INSTANCE">url</Property>
            <Property NAME="Class" SCOPE="INSTANCE">jdbcdriver</Property>
            <Property NAME="STATEMENT" SCOPE="GLOBAL">
			<![CDATA[
				select max(c1), max(c2), max(c3), max(c4) from 
				(
					select count(usr_key) as 'c1', 0 as 'c2', 0 as 'c3', 0 as 'c4' from USR where USR_STATUS='Active' and USR_PROVISIONED_DATE <= getdate()
					UNION ALL
					select 0 as 'c1', count(usr_key)  as 'c2', 0 as 'c3', 0 as 'c4' from USR where USR_STATUS='Locked'
					UNION ALL
					select 0 as 'c1', 0 as 'c2', count(usr_key) as 'c3', 0 as 'c4' from USR where USR_STATUS='Deleted'
					UNION ALL
					select 0 as 'c1', 0 as 'c2', 0 as 'c3', count(usr_key) as 'c4' from USR where USR_STATUS='Disabled'
				) a
			]]></Property>
            <Property NAME="CONNECT_PROP_user" SCOPE="INSTANCE">UserName</Property>
            <Property NAME="CONNECT_PROP_password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
	</Metric>

	<Metric NAME="Load" TYPE="TABLE" USAGE_TYPE="VIEW_COLLECT">
		<Display>
			<Label NLSID="ORACLE_IM_REPOS_LOAD_METRIC_LABEL">Load Metrics</Label>
		</Display>
		<TableDescriptor>
			<ColumnDescriptor NAME="totalNoOfReqsInitiated" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_REQS_INITIATED_LABEL">Total Number of Requests Initiated</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="totalNoOfUsersCreated" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_USERS_CREATED_LABEL">Total Number of Users Created</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="totalNoOfEventsInitiated" TYPE="NUMBER" IS_KEY="FALSE" TRANSIENT="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_TOTAL_NO_OF_EVENTS_INITIATED_LABEL">Total Number of Reconciliation Events Initiated</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfReqsInitiated" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfReqsInitiated - _totalNoOfReqsInitiated) > 0 ? (totalNoOfReqsInitiated - _totalNoOfReqsInitiated) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_REQS_INITIATED_LABEL">Newly Initiated Requests</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfUsersCreated" TYPE="NUMBER" IS_KEY="FALSE"
				COMPUTE_EXPR="(totalNoOfUsersCreated - _totalNoOfUsersCreated) > 0 ? (totalNoOfUsersCreated - _totalNoOfUsersCreated) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_USERS_CREATED_LABEL">Newly Created Users</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfEventsInitiated" TYPE="NUMBER" IS_KEY="FALSE"
					COMPUTE_EXPR="(totalNoOfEventsInitiated - _totalNoOfEventsInitiated) > 0 ? (totalNoOfEventsInitiated - _totalNoOfEventsInitiated) : 0">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_EVENTS_INITIATED_LABEL">Newly Initiated Reconciliation Events</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="noOfActiveScheduledTasks" TYPE="NUMBER" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_NO_OF_ACTIVE_SCHEDULED_TASKS_LABEL">Number of Scheduled Tasks Initiated</Label>
				</Display>
			</ColumnDescriptor>
		</TableDescriptor>
        <QueryDescriptor FETCHLET_ID="SQL">
			<ValidIf>
				<CategoryProp NAME="DatabaseType" CHOICES="oracle_database"/>
			</ValidIf>
			<Property NAME="STATEMENT" SCOPE="GLOBAL">
			<![CDATA[
				DECLARE
					no_of_reqs_initiated NUMBER := 0;
					no_of_users_created NUMBER := 0;
					no_of_events_initiated NUMBER := 0;
					no_of_active_scheduled_tasks NUMBER := 0;
					TYPE data_cursor_type IS REF CURSOR;
					data_cursor data_cursor_type;
				BEGIN
					select count(*) into no_of_reqs_initiated from REQ;
					select count(usr_key) into no_of_users_created from USR;
					select count(distinct rce_key) into no_of_events_initiated from RCH where rch_action='Event Received';
					select count(*) into no_of_active_scheduled_tasks from TSK where tsk_status='ACTIVE';
					-- open the cursor to return
					  OPEN data_cursor FOR
						SELECT to_char(no_of_reqs_initiated), to_char(no_of_users_created),  to_char(no_of_events_initiated), to_char(no_of_active_scheduled_tasks) FROM dual;
					  :1 := data_cursor;
				END;
			]]>
			</Property>
			<Property NAME="SQLOUTPARAMPOS" SCOPE="GLOBAL">1</Property>
			<Property NAME="SQLOUTPARAMTYPE" SCOPE="GLOBAL">SQL_CURSOR</Property>
			<Property NAME="MachineName" SCOPE="INSTANCE">MachineName</Property>
			<Property NAME="Port" SCOPE="INSTANCE">Port</Property>
			<Property NAME="SID" SCOPE="INSTANCE">SID</Property>
			<Property NAME="UserName" SCOPE="INSTANCE">UserName</Property>
			<Property NAME="password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
        <QueryDescriptor FETCHLET_ID="JDBCSQL">
			<ValidIf>
				<CategoryProp NAME="DatabaseType" CHOICES="microsoft_sqlserver_database"/>
			</ValidIf>
            <Property NAME="ConnInfo" SCOPE="INSTANCE">url</Property>
            <Property NAME="Class" SCOPE="INSTANCE">jdbcdriver</Property>
			<Property NAME="STATEMENT" SCOPE="GLOBAL">
			<![CDATA[
				select max(c1), max(c2), max(c3), max(c4) from (
					select count(*) as 'c1', 0 as 'c2', 0 as 'c3', 0 as 'c4' from REQ
					UNION
					select 0 as 'c1', count(*) as 'c2', 0 as 'c3', 0 as 'c4' from USR
					UNION
					select 0 as 'c1',0 as 'c2', count(*) as 'c3',0 as 'c4' from RCH where rch_action='Event Received'
					UNION
					select 0 as 'c1', 0 as 'c2', 0 as 'c3', count(*) as 'c4' from TSK where tsk_status='ACTIVE'
				) a		
			]]>
			</Property>
            <Property NAME="CONNECT_PROP_user" SCOPE="INSTANCE">UserName</Property>
            <Property NAME="CONNECT_PROP_password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
	</Metric>


    <Metric NAME="RemoteManagerMetrics" TYPE="TABLE">
		<Display>
			<Label NLSID="ORACLE_IM_REPOS_RM_METRIC_LABEL">Remote Manager Metrics</Label>
		</Display>
		<TableDescriptor>
			<ColumnDescriptor NAME="RemoteManagerServerName" TYPE="STRING" IS_KEY="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RM_SERVER_AME_LABEL">Server Name</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="RemoteManagerServiceName" TYPE="STRING" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RM_SERVER_AME_LABEL">Service Name</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="RemoteManagerHost" TYPE="STRING" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RM_HOST_LABEL">Host</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="RemoteManagerStatus" TYPE="NUMBER" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RM_STATUS_LABEL">Status</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="RemoteManagerStatusMessage" TYPE="STRING" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_RM_STATUS_MSG_LABEL">Message</Label>
				</Display>
			</ColumnDescriptor>
		</TableDescriptor>
		<QueryDescriptor FETCHLET_ID="OSLineToken">
			<Property NAME="MachineName" SCOPE="INSTANCE" OPTIONAL="TRUE">MachineName</Property>
            <Property NAME="DatabaseType" SCOPE="INSTANCE">DatabaseType</Property>
			<Property NAME="Port" SCOPE="INSTANCE" OPTIONAL="TRUE">Port</Property>
			<Property NAME="SID" SCOPE="INSTANCE" OPTIONAL="TRUE">SID</Property>
			<Property NAME="ENVEM_TARGET_USERNAME" SCOPE="INSTANCE">UserName</Property>
			<Property NAME="ENVEM_TARGET_PASSWORD" SCOPE="INSTANCE">password</Property>
			<Property NAME="perlBin" SCOPE="SYSTEMGLOBAL">perlBin</Property>
			<Property NAME="emdRoot" SCOPE="SYSTEMGLOBAL">emdRoot</Property>
			<Property NAME="scriptsDir" SCOPE="SYSTEMGLOBAL">scriptsDir</Property>
            <Property NAME="XLHOME" SCOPE="INSTANCE">XLHOME</Property>
            <Property NAME="command" SCOPE="GLOBAL">"%perlBin%/perl" "%scriptsDir%/idmRMStatus.pl" "%DatabaseType%" "2" "%MachineName%" "%Port%" "%SID%" "%UserName%" "%password%" "%XLHOME%" "%emdRoot%"</Property>
			<Property NAME="startsWith" SCOPE="GLOBAL">em_result=</Property>
			<Property NAME="delimiter" SCOPE="GLOBAL">|</Property>
		</QueryDescriptor>
		<QueryDescriptor FETCHLET_ID="OSLineToken">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="microsoft_sqlserver_database"/>
		  </ValidIf>
			<Property NAME="Port" SCOPE="INSTANCE" OPTIONAL="TRUE">DatabaseType</Property>
			<Property NAME="SID" SCOPE="INSTANCE" OPTIONAL="TRUE">SID</Property>
			<Property NAME="jdbcdriver" SCOPE="INSTANCE" OPTIONAL="TRUE">jdbcdriver</Property>
			<Property NAME="url" SCOPE="INSTANCE" OPTIONAL="TRUE">url</Property>
			<Property NAME="XLHOME" SCOPE="INSTANCE" OPTIONAL="TRUE">XLHOME</Property>
			<Property NAME="ENVEM_TARGET_USERNAME" SCOPE="INSTANCE">UserName</Property>
			<Property NAME="ENVEM_TARGET_PASSWORD" SCOPE="INSTANCE">password</Property>
			<Property NAME="perlBin" SCOPE="SYSTEMGLOBAL">perlBin</Property>
			<Property NAME="emdRoot" SCOPE="SYSTEMGLOBAL">emdRoot</Property>
			<Property NAME="scriptsDir" SCOPE="SYSTEMGLOBAL">scriptsDir</Property>
            <Property NAME="command" SCOPE="GLOBAL">"%perlBin%/perl" "%scriptsDir%/idmRMStatus.pl" "%DatabaseType%" "2" "%url%" "%jdbcdriver%" "%UserName%" "%password%" "%XLHOME%" "%emdRoot%"</Property>
			<Property NAME="startsWith" SCOPE="GLOBAL">em_result=</Property>
			<Property NAME="delimiter" SCOPE="GLOBAL">|</Property>
		</QueryDescriptor>
	</Metric>

	<Metric NAME="ScheduledTasksMetrics" TYPE="TABLE">
		<Display>
			<Label NLSID="ORACLE_IM_REPOS_SCHEDULEDTASK_METRIC_LABEL">Scheduled Tasks Metrics</Label>
		</Display>
		<TableDescriptor>
			<ColumnDescriptor NAME="scheduledTaskName" TYPE="STRING" IS_KEY="TRUE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_SCHEDULEDTASK_NAME_LABEL">Scheduled Task Name</Label>
				</Display>
			</ColumnDescriptor>
			<ColumnDescriptor NAME="scheduledTaskTime" TYPE="NUMBER" IS_KEY="FALSE">
				<Display>
					<Label NLSID="ORACLE_IM_REPOS_SCHEDULEDTASK_EXECUTION_TIME_LABEL">Scheduled Task Execution Time</Label>
				</Display>
			</ColumnDescriptor>
		</TableDescriptor>
        <QueryDescriptor FETCHLET_ID="SQL">
		  <ValidIf>
			<CategoryProp NAME="DatabaseType" CHOICES="oracle_database"/>
		  </ValidIf>
          <Property NAME="STATEMENT" SCOPE="GLOBAL">
            <![CDATA[
				select tsk_name, trunc(sysdate - tsk_start_time)*24*60 tsk_time from tsk where tsk_status='ACTIVE'
            ]]>
          </Property>
          <Property NAME="MachineName" SCOPE="INSTANCE">MachineName</Property>
          <Property NAME="Port" SCOPE="INSTANCE">Port</Property>
          <Property NAME="SID" SCOPE="INSTANCE">SID</Property>
          <Property NAME="UserName" SCOPE="INSTANCE">UserName</Property>
          <Property NAME="password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
        <QueryDescriptor FETCHLET_ID="JDBCSQL">
			<ValidIf>
				<CategoryProp NAME="DatabaseType" CHOICES="microsoft_sqlserver_database"/>
			</ValidIf>
            <Property NAME="ConnInfo" SCOPE="INSTANCE">url</Property>
            <Property NAME="Class" SCOPE="INSTANCE">jdbcdriver</Property>
			<Property NAME="STATEMENT" SCOPE="GLOBAL">
			<![CDATA[
				select tsk_name, Convert(numeric, getdate() - tsk_start_time)*24*60 tsk_time from tsk where tsk_status='ACTIVE'			 
			]]>
			</Property>
            <Property NAME="CONNECT_PROP_user" SCOPE="INSTANCE">UserName</Property>
            <Property NAME="CONNECT_PROP_password" SCOPE="INSTANCE">password</Property>
        </QueryDescriptor>
	</Metric>

	<InstanceProperties>
		<InstanceProperty NAME="MachineName">
			<Display>
				<Label NLSID="ORACLE_IM_REPOS_MACHINENAME_LABEL">Machine Name</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="ConnectDescriptor">
			<Display>
                <Label NLSID="ORACLE_IM_REPOS_CONN_DESC_LABEL">Connect Descriptor</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="url">
			<Display>
                <Label NLSID="ORACLE_IM_REPOS_JDBC_URL_LABEL">JDBC Url</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="jdbcdriver">
			<Display>
                <Label NLSID="ORACLE_IM_REPOS_JDBC_DRIVER_LABEL">JDBC Driver</Label>
			</Display>
		</InstanceProperty>
      <InstanceProperty NAME="DatabaseName">
         <Display>
            <Label NLSID="ORACLE_IM_REPOS_DATABASENAME_LABEL">Database Name</Label>
         </Display>
      </InstanceProperty>
      <InstanceProperty NAME="DatabaseType">
         <Display>
            <Label NLSID="ORACLE_IM_REPOS_DATABASETYPE_LABEL">Database Type</Label>
         </Display>
      </InstanceProperty>
		<InstanceProperty NAME="UserName" CREDENTIAL="TRUE" OPTIONAL="FALSE">
			<Display>
				<Label NLSID="ORACLE_IM_REPOS_USERNAME_LABEL">Username</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="password" CREDENTIAL="TRUE" OPTIONAL="FALSE">
			<Display>
				<Label NLSID="ORACLE_IM_REPOS_PASSWORD_LABEL">Password</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="Port">
			<Display>
				<Label NLSID="ORACLE_IM_REPOS_PORT_LABEL">Port</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="SID">
			<Display>
				<Label NLSID="ORACLE_IM_REPOS_SID_LABEL">Database SID</Label>
			</Display>
		</InstanceProperty>
		<InstanceProperty NAME="Version">
		  <Display>
			<Label NLSID="ORACLE_IM_REPOS_VERSION_LABEL">Version</Label>
			<ShortName NLSID="ORACLE_IM_REPOS_VERSION_LABEL">Version</ShortName>
		  </Display>
		</InstanceProperty>
		<InstanceProperty NAME="XLHOME">
		  <Display>
			<Label NLSID="ORACLE_IM_REPOS_XLHOME_LABEL">OIM Home Path</Label>
			<ShortName NLSID="ORACLE_IM_REPOS_XLHOME_LABEL">OIM Home Path</ShortName>
		  </Display>
		</InstanceProperty>
	</InstanceProperties>
</TargetMetadata>

