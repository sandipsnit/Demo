<?xml version="1.0" ?>

<!--  $Header: emas/sysman/admin/metadata/oracle_oim.xml /st_emasgc_11.1as/7 2010/06/30 11:45:16 rayleung Exp $ -->

<!-- 
 Copyright (c) 2009, 2010, Oracle and/or its affiliates. All rights reserved. 

   NAME
     oracle_oim.xml - <one-line expansion of the name>

   DESCRIPTION
     <short description of component this file declares/defines>

   NOTES
     <other useful comments, qualifications, etc.>

   MODIFIED   (MM/DD/YY)
   scgrover    12/23/09 - add isJRFEnabled
   rayleung    11/19/09 - Add custom metrics
   jmcclung    10/27/09 - Add monMode
   sunilkum    10/05/09 - add resource bundle name
   klmichae    02/01/10 - remove reference to obsolete file
   sunilkum    08/13/09 - Add instance variable
   sunilkum    07/24/09 - Remove adf metrics
   sunilkum    07/22/09 - metedata file for OIM
   sunilkum    07/22/09 - Creation
-->
<!DOCTYPE TargetMetadata SYSTEM "../dtds/TargetMetadata.dtd" [
<!ENTITY j2ee_application_metrics SYSTEM "./j2ee_application_metrics.xmlp">
<!ENTITY j2ee_application_response SYSTEM "./j2ee_application_response.xmlp">
<!ENTITY j2ee_application_ws_metrics SYSTEM "./j2ee_application_ws_metrics.xmlp">
<!ENTITY mds_metric SYSTEM "./mds.xmlp">
]>

<TargetMetadata META_VER="11.0" TYPE="oracle_oim" 
                CATEGORY_PROPERTIES="VersionCategory;isJRFEnabled;monMode;serverType" 
                RESOURCE_BUNDLE_PACKAGE="oracle.sysman.emas.rsc.gen.iam">
  <Display>
    <Label NLSID="OIM">Oracle Identity Manager</Label>
    <ShortName NLSID="OIM_SHORT">Oracle Identity Manager</ShortName>
    <Description NLSID="OIM_DESC">Oracle Identity Manager</Description>
  </Display>

  <AssocTarget ASSOCIATION_NAME="farm" ASSOC_TARGET_TYPE="*"/>
  <AssocTarget ASSOCIATION_NAME="managedBy" ASSOC_TARGET_TYPE="*"/>
  <AssocTarget ASSOCIATION_NAME="managedServer" ASSOC_TARGET_TYPE="*"/>

<!-- Include generic J2EE application metrics-->
&j2ee_application_response;
&j2ee_application_metrics;
&j2ee_application_ws_metrics;
&mds_metric;

  <!-- Events Handler Metric -->
  <Metric NAME="EventsHandler" TYPE="TABLE">
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus" />
    </ValidIf>
    <Display>
      <Label NLSID="EVENTS_HANDLER">Events Handler</Label>
    </Display>
    <TableDescriptor>
      <ColumnDescriptor NAME="EventName" TYPE="STRING" IS_KEY="TRUE">
        <Display>
          <Label NLSID="EVENT_NAME">Event Name</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="CompletedExec" TYPE="NUMBER">
        <Display>
          <Label NLSID="COMPLETED_EXEC">Completed Events Executions</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="AvgProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="AVG_EVENT_EXEC">Average Events Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MaxProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MAX_EVENT_EXEC">Maximum Events Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MinProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MIN_EVENT_EXEC">Minimum Events Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="JMX">    
      <Property NAME="serviceURL" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">serviceURL</Property>
      <Property NAME="UserName" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">UserName</Property>
      <Property NAME="password" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">password</Property>
      <Property NAME="metric" SCOPE="GLOBAL">oracle_oim:event_handler</Property>
      <Property NAME="ServerNames" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="MetricSource" SCOPE="GLOBAL">Weblogic</Property>
      <Property NAME="MetricService" SCOPE="GLOBAL">true</Property>
      <Property NAME="columnOrder" SCOPE="GLOBAL">
        EventName;
        CompletedExec;
        AvgProcess;
        MaxProcess;
        MinProcess
      </Property>     
    </QueryDescriptor>
  </Metric> <!-- Events Handler Metric -->
  
  <!-- Adapters Metric -->
  <Metric NAME="Adapters" TYPE="TABLE">
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus" />
    </ValidIf>
    <Display>
      <Label NLSID="ADAPTERS">Adapters</Label>
    </Display>
    <TableDescriptor>
      <ColumnDescriptor NAME="AdapterName" TYPE="STRING" IS_KEY="TRUE">
        <Display>
          <Label NLSID="ADAPTER_NAME">Adapter Name</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="CompletedExec" TYPE="NUMBER">
        <Display>
          <Label NLSID="COMPLETED_ADAPTER_EXEC">Completed Adapter Executions</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="AvgProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="AVG_ADAPTER_EXEC">Average Adapter Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MaxProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MAX_ADAPTER_EXEC">Maximum Adapter Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MinProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MIN_ADAPTER_EXEC">Minimum Adapter Execution Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="JMX">    
      <Property NAME="serviceURL" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">serviceURL</Property>
      <Property NAME="UserName" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">UserName</Property>
      <Property NAME="password" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">password</Property>
      <Property NAME="metric" SCOPE="GLOBAL">oracle_oim:adapter</Property>
      <Property NAME="ServerNames" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="MetricSource" SCOPE="GLOBAL">Weblogic</Property>
      <Property NAME="MetricService" SCOPE="GLOBAL">true</Property>
      <Property NAME="columnOrder" SCOPE="GLOBAL">
        AdapterName;
        CompletedExec;
        AvgProcess;
        MaxProcess;
        MinProcess
      </Property>     
    </QueryDescriptor>
  </Metric> <!-- Adapters Metric -->
  
  <!-- JMS Queue Metric -->
  <Metric NAME="JMSQueue" TYPE="TABLE">
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus" />
    </ValidIf>
    <Display>
      <Label NLSID="JMS_QUEUE">JMS Queue</Label>
    </Display>
    <TableDescriptor>
      <ColumnDescriptor NAME="MessageName" TYPE="STRING" IS_KEY="TRUE">
        <Display>
              <Label NLSID="MSG_NAME">Message Name</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="CompletedMsg" TYPE="NUMBER">
        <Display>
          <Label NLSID="COMPLETED_MSGS">Number of Processed Messages</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="AvgProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="AVG_PROC">Average Processing Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MaxProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MAX_PROC">Maximum Processing Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="MinProcess" TYPE="NUMBER">
        <Display>
          <Label NLSID="MIN_PROC">Minimum processing Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="JMX">    
      <Property NAME="serviceURL" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">serviceURL</Property>
      <Property NAME="UserName" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">UserName</Property>
      <Property NAME="password" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">password</Property>
      <Property NAME="metric" SCOPE="GLOBAL">oracle_oim:jms_queue</Property>
      <Property NAME="ServerNames" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="MetricSource" SCOPE="GLOBAL">Weblogic</Property>
      <Property NAME="MetricService" SCOPE="GLOBAL">true</Property>
      <Property NAME="columnOrder" SCOPE="GLOBAL">
        MessageName;
        CompletedMsg;
        AvgProcess;
        MaxProcess;
        MinProcess
      </Property>     
    </QueryDescriptor>
  </Metric> <!-- JMS Queue Metric -->
  
  <!-- Overall Metric -->
  <Metric NAME="Overall" TYPE="TABLE">
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus" />
    </ValidIf>
    <Display>
      <Label NLSID="OVERALL_METRIC">Executions and Messages</Label>
    </Display>
    <TableDescriptor>
      <ColumnDescriptor NAME="CompletedAdapterExec" TYPE="NUMBER">
        <Display>
          <Label NLSID="TOTAL_COMPLETED_ADAPTER_EXEC">Total Adapter Executions</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="CompletedEventExec" TYPE="NUMBER">
        <Display>
          <Label NLSID="TOTAL_COMPLETED_EVENT_EXEC">Total Events Handler Executions</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="CompletedJMSMsg" TYPE="NUMBER">
        <Display>
          <Label NLSID="TOTAL_COMPLETED_MSGS">Total JMS Messages</Label>
        </Display>
      </ColumnDescriptor>
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="JMX">    
      <Property NAME="serviceURL" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">serviceURL</Property>
      <Property NAME="UserName" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">UserName</Property>
      <Property NAME="password" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">password</Property>
      <Property NAME="metric" SCOPE="GLOBAL">oracle_oim:overall</Property>
      <Property NAME="ServerNames" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="MetricSource" SCOPE="GLOBAL">Weblogic</Property>
      <Property NAME="MetricService" SCOPE="GLOBAL">true</Property>
      <Property NAME="columnOrder" SCOPE="GLOBAL">
        CompletedAdapterExec;
        CompletedEventExec;
        CompletedJMSMsg
      </Property>     
    </QueryDescriptor>
  </Metric> <!-- Overall Metric -->
  
  <!-- SPML Web Service Metric -->
  <Metric NAME="SPMLWebService" TYPE="TABLE">
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus" />
    </ValidIf>
    <Display>
      <Label NLSID="SPML_WEB_SERVICE">SPML Web Services</Label>
    </Display>
    <TableDescriptor>
      <ColumnDescriptor NAME="WebserviceName" TYPE="STRING" IS_KEY="TRUE">
        <Display>
              <Label NLSID="WEB_SERVICE_NAME">Web Service Name</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="TotalRequests" TYPE="NUMBER">
        <Display>
          <Label NLSID="INCOMING_CALLS">Incoming Calls</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="AvgRequest" TYPE="NUMBER">
        <Display>
          <Label NLSID="AVG_RESPONSE">Average Response Time (ms)</Label>
          <Unit NLSID="MS">ms</Unit>
        </Display>
      </ColumnDescriptor>      
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="JMX">    
      <Property NAME="serviceURL" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">serviceURL</Property>
      <Property NAME="UserName" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">UserName</Property>
      <Property NAME="password" SCOPE="ASSOCTGT" ASSOCIATION_NAME="farm">password</Property>
      <Property NAME="metric" SCOPE="GLOBAL">oracle_oim:spml_service</Property>
      <Property NAME="ServerNames" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="MetricSource" SCOPE="GLOBAL">Weblogic</Property>
      <Property NAME="MetricService" SCOPE="GLOBAL">true</Property>
      <Property NAME="columnOrder" SCOPE="GLOBAL">
        WebserviceName;
        TotalRequests;
        AvgRequest       
      </Property>     
    </QueryDescriptor>
  </Metric> <!-- JSPML Web Service Metric -->   

  <!-- Resource Usage Metric -->
  <!-- Disable for FMW Control -->
  <!--Metric NAME="ResourceUsage" TYPE="TABLE" NUM_CACHE_VALUES="24" FORCE_CACHE="TRUE" >
    <ValidIf>
      <CategoryProp NAME="VersionCategory" CHOICES="11plus"/>
    </ValidIf>
    <Display>
      <Label NLSID="RESOURCE_USAGE">Resource Usage</Label>
    </Display>
    <TableDescriptor>      
      <ColumnDescriptor NAME="memory.component" TYPE="NUMBER">
        <Display>
          <Label NLSID="RESOURCE_MEMORY_KB">Memory Utilization (KB)</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="memoryPercentage.component" TYPE="NUMBER">
        <Display FOR_SUMMARY_UI="TRUE">
          <Label NLSID="RESOURCE_MEMORY_PCT">Memory Utilization (%)</Label>
        </Display>
      </ColumnDescriptor>
      <ColumnDescriptor NAME="cpu.component" TYPE="NUMBER">
        <Display FOR_SUMMARY_UI="TRUE">
          <Label NLSID="RESOURCE_CPU_PCT">CPU Utilization (%)</Label>
        </Display>
      </ColumnDescriptor>
    </TableDescriptor>
    <QueryDescriptor FETCHLET_ID="OSLineToken" ON_TARGET="TRUE">
      <Property NAME="perlBin" SCOPE="SYSTEMGLOBAL">perlBin</Property>
      <Property NAME="scriptsDir" SCOPE="SYSTEMGLOBAL">scriptsDir</Property>
      <Property NAME="wlshome" SCOPE="INSTANCE">WebLogicHome</Property>
      <Property NAME="servername" SCOPE="INSTANCE">ServerNames</Property>
      <Property NAME="command">%perlBin%/perl</Property>
      <Property NAME="args">%scriptsDir%/iam/weblogicResUsage.pl %wlshome% %servername%</Property>
      <Property NAME="startsWith" SCOPE="GLOBAL">em_result=</Property>
      <Property NAME="delimiter" SCOPE="GLOBAL">|</Property>
    </QueryDescriptor>
  </Metric-->

  <InstanceProperties>
    <InstanceProperty NAME="version" CREDENTIAL="FALSE" OPTIONAL="FALSE">      
      <Display>
        <Label NLSID="VERSION_IPROP">Version</Label>
      </Display>
    </InstanceProperty>
    <InstanceProperty NAME="VersionCategory" IS_COMPUTED="TRUE">
      <Display>
        <Label NLSID="VERSION_CAT_IPROP">Version Category</Label>
      </Display>
    </InstanceProperty>
    <InstanceProperty NAME="WebLogicHome">      
      <Display>
        <Label NLSID="WEBLOGIC_HOME_IPROP">Weblogic Home</Label>
        <ShortName NLSID="WEBLOGIC_HOME_IPROP">Weblogic Home</ShortName>
      </Display>
    </InstanceProperty>
    <InstanceProperty NAME="ServerNames">
      <Display>
        <Label NLSID="SERVER_NAMES_IPROP">Server Names</Label>
      </Display>
    </InstanceProperty>
    <InstanceProperty NAME="appName">
      <Display>
        <Label NLSID="APP_NAME_IPROP">Application Name</Label>
      </Display>
    </InstanceProperty>  
    <InstanceProperty NAME="monMode">
     <Display>
       <Label NLSID="MON_MODE_IPROP">Monitoring Mode</Label>
     </Display>
    </InstanceProperty>
    <InstanceProperty NAME="serverType">
      <Display>
        <Label NLSID="SERVER_TYPE_IPROP">Server Type</Label>
      </Display>
    </InstanceProperty>
    <InstanceProperty NAME="isJRFEnabled">
     <Display>
      <Label NLSID="J2EE_ISJRFENABLED_IPROP">Is JRF Enabled</Label>
     </Display>
    </InstanceProperty>

    <DynamicProperties NAME="ComputeVC" FORMAT="ROW" PROP_LIST="VersionCategory">
      <QueryDescriptor FETCHLET_ID="VersionRangeComputer">
        <Property NAME="Version" SCOPE="INSTANCE">version</Property>       
        <Property NAME="11plus" SCOPE="GLOBAL">11.1.1.;</Property>
      </QueryDescriptor>
    </DynamicProperties>
  </InstanceProperties>
  
</TargetMetadata>
