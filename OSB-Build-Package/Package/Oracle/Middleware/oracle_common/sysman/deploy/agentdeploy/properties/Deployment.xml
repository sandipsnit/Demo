<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Copyright (c) 2001, 2007, Oracle. All rights reserved.  
 *
 *      NAME
 *      Deployment.xml 
 *
 *      NOTES
 *      List of action steps for local/remoteprereq and installation listed here.
 *
 *    MODIFIED     (MM/DD/YY)  VERSION
 *    supchoud     02/19/07 - 
 *    spramani     02/14/07  - 
 *    aamkumar     02/07/07  - add local prereqs
 *    spramani     02/04/07  - rem prereq actions
 *    spramani     02/02/07 -  change to add remote tag
 *    spramani     01/29/07 -  change step Names 
 *    supchoud     12/04/06 -  add install/prereq tags 
 *    supchoud     11/30/06 -  modify attributes
 *    supchoud     11/30/06 -  add install attribs
 *    supchoud     11/29/06 -  created
 *
-->
<prov:AgentDeployment version="1.0.0"
      xmlns:prov="http://www.oracle.com/sysman/prov/deployment">
    <prov:deployment type="localprereq" step="1" remote="false">
        <prov:depType deploymentId="localprereq" 
                      className="oracle.sysman.core.agentdeploy.deploy.deployer.LocalPrereqChecker">
            <prov:action id="LocalPrereq" critical="0" jndiUpdateRequired="true" order="100"/>
        </prov:depType>
    </prov:deployment>  
    <prov:deployment type="remoteprereq" step="2"  remote="true">
        <prov:depType deploymentId="remoteprereq"
                      className="oracle.sysman.core.agentdeploy.deploy.deployer.RemotePrereqChecker">
             <prov:action id="RunPrereq" entryPoint="emagent_install" critical="2" jndiUpdateRequired="true"/>
        </prov:depType>
    </prov:deployment> 
    <!-- 
          For Installation 
          _________________________________________________________________________
          1. Each scenario lists the steps to be executed for that step to complete.
          2. Each scenario has a deployer class associated with it.
          3. The <action> specifies a step.
          4. The id of a action maps to a particular method in the deployer.
          5. critical is significant; as explained below:
              i. if critical=0; in case this action fails, neednot stop execution of other steps
              ii. if critical=1; in case this action fails, stop and only execute other actions with criticality greater than 1
              iii. if critical=2; in case this action fails, stop and only execute other actions with criticality 2
          6. jndiUpdateRequired represents if a JNDI state updation is required after this step is completed.
          7. order represents the order in which these steps will be executed by the deployer.A step with order 2 will be executed after a step with 1 and so on...
    -->
    <prov:deployment step="3" type="install"  remote="true">
        <prov:depType deploymentId="FreshInstall" 
                      className="oracle.sysman.core.agentdeploy.deploy.deployer.NewAgentDeployer">
            <prov:action id="PreInstallScript" critical="0" jndiUpdateRequired="true" order="100"/>
            <prov:action id="Install" critical="1" jndiUpdateRequired="true" order="200"/>
            <prov:action type="Command" id="optionalCommand" critical="0" order="300">
                <prov:command type="unix" cmd="" args=""/>
                <prov:command type="nt" cmd="" args=""/>
            </prov:action>
            <prov:action id="Config" critical="1" jndiUpdateRequired="true" order="400"/>
            <prov:action id="RunRootSH" critical="0" jndiUpdateRequired="true" order="500"/>
            <prov:action id="RunAddons" critical="0" jndiUpdateRequired="true" order="600"/>
            <prov:action id="PostInstall" critical="0" jndiUpdateRequired="true" order="700"/>
            <prov:action id="RunCRSRACPrereqSetup" critical="0" jndiUpdateRequired="true" order="800"/>
            <prov:action id="CollectLog" critical="2" jndiUpdateRequired="true" order="900"/>
            <prov:action id="Cleanup" critical="2" jndiUpdateRequired="true" order="1000"/>
        </prov:depType>
    </prov:deployment>

<!-- UPGRADE-->
    <prov:deployment step="3" type="install"  remote="true">
        <prov:depType deploymentId="AgentUpgrade" 
                      className="oracle.sysman.core.agentdeploy.deploy.deployer.UpgradeAgentDeployer">
            <prov:action id="Upgrade" critical="1" jndiUpdateRequired="true" order="100"/>
        </prov:depType>
    </prov:deployment>
    
    <prov:deployment step="4" type="cleanup"  remote="true">
        <prov:depType deploymentId="cleanup"> 
            <prov:action id="Cleanup" critical="1" jndiUpdateRequired="false" order="1000000"/>
        </prov:depType>
    </prov:deployment>
</prov:AgentDeployment>
