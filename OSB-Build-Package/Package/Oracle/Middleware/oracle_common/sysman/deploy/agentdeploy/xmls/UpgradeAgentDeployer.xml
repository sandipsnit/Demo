<?xml version="1.0"?>

<!--  $Header: UpgradeAgentDeployer.xml 04-dec-2007.23:29:05 supchoud Exp $ -->

<!-- 
 Copyright (c) 2007, Oracle. All rights reserved.  

   NAME
     UpgradeAgentDeployer.xml - <one-line expansion of the name>

   DESCRIPTION
     <short description of component this file declares/defines>

   NOTES
     <other useful comments, qualifications, etc.>

   MODIFIED   (MM/DD/YY)
   supchoud    11/29/07 - 
   spramani    08/22/07 - 
   supchoud    06/29/07 - 
   spramani    05/21/07 - 
   supchoud    05/02/07 - 
   spramani    03/07/07 - upgrade agent deployer
   spramani    03/07/07 - Creation

-->
<prov:agentDeployment id = "UpgradeAgentDeployment" version="1.0.0" xmlns:prov="http://www.oracle.com/sysman/prov/deployment">
    <!-- 
         1. This is the third step of agent push installation. The deployer class will get the deploymentment with id
            "install" and will pick up all the actions under it to be executed according to the 'order' attribute 
            of action tag. 
         2. criticality 2 is the action with highest priority; critcality with 0 is the action with lowest priority 
         3. An action with  jndiUpdateRequired= true will update the action status to jndi , otherwise not
         4. order determines in what order the actions in a deployment will be executed
         5. scope tells on what all nodes we need the action to be executed
         6. Cleanup is a deployment ( defined in PrereqChecker.xml )  that called at the end of anyother deployment. 
         7. toRetry=true means this action will be re-tried regardless of what happend on last try
    -->
    <prov:deployment id="install">
            <prov:action id="InitSetup" critical="1" jndiUpdateRequired="false" order="0" scope="allNode" hidden="true" resourceID=""/>
            <prov:action id="PreInstallScript" critical="0" jndiUpdateRequired="true" order="100" scope="allNode" hidden="false" resourceID="ACTION_DISPLAY_NAME_PRE_INSTALL_SCRIPT" 
                  problemResId="PRE_INSTALL_PROBLEM" recomResId="PRE_INSTALL_RECO"/>
            <prov:action id="StopAgent" critical="0" jndiUpdateRequired="true" order="200" scope ="allNode" hidden="true" resourceID="ACTION_DISPLAY_NAME_STOP_AGENT" />
            <prov:action id="Upgrade" critical="1" jndiUpdateRequired="true" order="300" scope="allNode"  hidden="false" resourceID="ACTION_DISPLAY_NAME_UPGRADE" 
                  problemResId="INSTALL_PROBLEM" recomResId="INSTALL_RECO"/>
            <prov:action id="StartAgent" critical="0" jndiUpdateRequired="true" order="400" scope ="allNode" hidden="true" resourceID="ACTION_DISPLAY_NAME_START_AGENT"/>
            <prov:action id="optionalCommand"  type="Command" critical="0" jndiUpdateRequired="false" order="500" scope="allNode" hidden="true" resourceID="ACTION_DISPLAY_NAME_OPTIONAL_COMMAND">
                <prov:command type="unix" cmd="" args=""/>
                <prov:command type="nt" cmd="" args=""/>
            </prov:action>
            <prov:action id="PreConfigScript" critical="0" jndiUpdateRequired="true"  order="600" scope="allNode" hidden="false" resourceID="ACTION_DISPLAY_NAME_PRE_CONFIG_SCRIPT" 
                problemResId="PRE_CONFIG_PROBLEM" recomResId="PRE_CONFIG_RECO"/>
            <prov:action id="Config" critical="1" jndiUpdateRequired="true"  order="700" scope="allNode" hidden="false" resourceID="ACTION_DISPLAY_NAME_CONFIG"
                problemResId="CONFIG_PROBLEM" recomResId="CONFIG_RECO"/>
            <prov:action id="RunRootSH" critical="0" jndiUpdateRequired="true" order="800" scope="allNode" hidden="false" resourceID="ACTION_DISPLAY_NAME_ROOT_SH" 
                problemResId="RUN_ROOTSH_PROBLEM" recomResId="RUN_ROOTSH_RECO"/>
            <prov:action id="RunAddons" critical="0" jndiUpdateRequired="true" order="900" scope="allNode" hidden="true" resourceID="ACTION_DISPLAY_NAME_ADDONS"/>
            <prov:action id="PostInstallScript" critical="0" jndiUpdateRequired="true" order="1000" scope="allNode" hidden="false" resourceID="ACTION_DISPLAY_NAME_POST_INSTALL_SCRIPT" 
                    problemResId="POST_INSTALL_PROBLEM" recomResId="POST_INSTALL_RECO"/>
            <prov:action id="RunCRSRACPrereqSetup" critical="0" jndiUpdateRequired="true" order="1100" scope="allNode" hidden="true" resourceID="ACTION_DISPLAY_NAME_CRS_RAC_PREREQ_SETUP" />
            <prov:action id="CollectLog" critical="2" jndiUpdateRequired="true" order="1200" scope="allNode" hidden="false" toRetry="true" resourceID="ACTION_DISPLAY_NAME_COLLECT_LOG"
                            problemResId="COLLECT_LOG_PROBLEM" recomResId="COLLECT_LOG_RECO"/>
    </prov:deployment>
    <prov:deployment id = "Cleanup" step="4" remote="true">
        <prov:action id="Cleanup" critical="2" jndiUpdateRequired="true" order="2500" scope="allNode" toRetry="true"/>
    </prov:deployment> 
</prov:agentDeployment>
